"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[389],{9389:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(5206),l=n.n(r),a=n(4924),o=n(281),u=n(8855),i=n(2870),s=n(8053);function c(e,t,n,r,l,a,o){try{var u=e[a](o),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,l)}var f=function(e,t){var n,r,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(l=2&a[0]?r.return:a[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,a[1])).done)return l;switch(r=0,l&&(a=[2&a[0],l.value]),a[0]){case 0:case 1:l=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((l=(l=o.trys).length>0&&l[l.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1],l=a;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(a);break}l[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function v(){var e;return e=function(e){var t,n,r,l,a;return f(this,(function(o){switch(o.label){case 0:t=function(){var t,a,o,u,c,d,v,p,h,y;return f(this,(function(f){switch(f.label){case 0:t=e.length<l+r?e.length:l+r,a=new Array(r),o=new Date,u=l,f.label=1;case 1:return u<t?[4,Promise.all([(0,s.TW)(null===(c=e[u])||void 0===c?void 0:c.queueUuid,null===(d=e[u])||void 0===d?void 0:d.queueEntryUuid,o)])]:[3,4];case 2:f.sent(),a.push((0,i.openmrsFetch)("/ws/rest/v1/visit/".concat(e[u].visitUuid),{method:"POST",headers:{"Content-Type":"application/json"},signal:n.signal,body:{location:null===(v=e[u])||void 0===v?void 0:v.visitLocation,startDatetime:(0,i.parseDate)(null===(p=e[u])||void 0===p?void 0:p.visitStartDateTime),visitType:null===(h=e[u])||void 0===h?void 0:h.visitTypeUuid,stopDatetime:new Date}})),l++,f.label=3;case 3:return u++,[3,1];case 4:return y={},[4,Promise.all(a).then((function(e){return e})).catch((function(e){return e}))];case 5:return[2,(y.v=f.sent(),y)]}}))},n=new AbortController,r=10,l=0,o.label=1;case 1:return l<e.length?[5,d(t())]:[3,3];case 2:return a=o.sent(),"object"==((u=a)&&"undefined"!=typeof Symbol&&u.constructor===Symbol?"symbol":typeof u)?[2,a.v]:[3,1];case 3:return[2]}var u}))},v=function(){var t=this,n=arguments;return new Promise((function(r,l){var a=e.apply(t,n);function o(e){c(a,r,l,o,u,"next",e)}function u(e){c(a,r,l,o,u,"throw",e)}o(void 0)}))},v.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const h=function(e){var t,n,c=e.visitQueueEntries,f=e.closeModal,d=(0,a.useTranslation)().t,h=(0,s.P4)("","").mutate,y=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw l}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=y[0],m=y[1],w=(0,r.useCallback)((function(){m(!0),function(e){return v.apply(this,arguments)}(c).then((function(e){f(),(0,i.showSnackbar)({isLowContrast:!0,title:d("clearQueue","Clear queue"),kind:"success",subtitle:d("queuesClearedSuccessfully","Queues cleared successfully")}),h()}),(function(e){(0,i.showSnackbar)({title:d("errorClearingQueues","Error clearing queues"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})}))}),[f,h,d,c]);return l().createElement("div",null,l().createElement(u.xBx,{closeModal:f,label:d("serviceQueue","Service queue"),title:d("clearAllQueueEntries","Clear all queue entries?")}),l().createElement(u.fef,null,l().createElement("p",{className:o.Z.subHeading,id:"subHeading"},d("clearAllQueueEntriesWarningMessage","Clearing all queue entries will remove  all the patients from the queues and will not allow you to fill any other encounter forms for the patients"))),l().createElement(u.mzw,null,l().createElement(u.zxk,{kind:"secondary",onClick:f},d("cancel","Cancel")),!0===b?l().createElement(u.Db,null):l().createElement(u.zxk,{kind:"danger",onClick:w},d("clearQueue","Clear queue"))))}}}]);