"use strict";(globalThis.webpackChunk_openmrs_esm_laboratory_app=globalThis.webpackChunk_openmrs_esm_laboratory_app||[]).push([[112],{5952:(e,t,a)=>{a.d(t,{c:()=>s});var r=a(6004),o=a.n(r),n=a(1056),l=a.n(n)()(o());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-laboratory__orders-data-table__productiveHeading01___QgZsi{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-laboratory__orders-data-table__productiveHeading02___R0p9o{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-laboratory__orders-data-table__productiveHeading03___bCt31{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-laboratory__orders-data-table__productiveHeading04___tiOmn{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-laboratory__orders-data-table__bodyLong01___OiNTM{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-laboratory__orders-data-table__bodyShort01___hkyhF{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-laboratory__orders-data-table__bodyShort02___o1pZm{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-laboratory__orders-data-table__text02___VE7d7{color:#525252}.-esm-laboratory__orders-data-table__label01___vsNLz{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-laboratory__orders-data-table__modal___G1tyV{position:fixed;width:100vw;height:100vh;display:grid;background-color:rgba(0,0,0,.5);z-index:9000;justify-items:center;align-items:center}.-esm-laboratory__orders-data-table__tableContainer___D__6d{background-color:#f4f4f4;margin:0 1rem;padding:0}.-esm-laboratory__orders-data-table__tableContainer___D__6d .cds--data-table-content{overflow-x:unset}.-esm-laboratory__orders-data-table__tableContainer___D__6d a{text-decoration:none}.-esm-laboratory__orders-data-table__tableContainer___D__6d th{color:#525252}.-esm-laboratory__orders-data-table__tableContainer___D__6d .cds--data-table{background-color:#e0e0e0}.-esm-laboratory__orders-data-table__tableContainer___D__6d .cds--table-toolbar{position:static;margin:.5rem}.-esm-laboratory__orders-data-table__tableContainer___D__6d .cds--overflow-menu{width:75%}.-esm-laboratory__orders-data-table__tableContainer___D__6d .-esm-laboratory__orders-data-table__toolbarContent___EQssl{height:2rem;margin-bottom:.25rem}.-esm-laboratory__orders-data-table__toolbarItem___ognrj{margin:5px 10px}.-esm-laboratory__orders-data-table__tableWrapper___TYIue tr:last-of-type td{border-bottom:none}.-esm-laboratory__orders-data-table__tileContainer___O7Jw1{background-color:#fff;border-top:1px solid #e0e0e0;padding:5rem 0}.-esm-laboratory__orders-data-table__tile___roPzA{margin:auto;width:fit-content}.-esm-laboratory__orders-data-table__tileContent___AeH5p{display:flex;flex-direction:column;align-items:center}.-esm-laboratory__orders-data-table__content___UBZf6{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-laboratory__orders-data-table__singleLineDisplay___JJ8eJ{white-space:nowrap}","",{version:3,sources:["webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./src/components/orders-table/orders-data-table.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CAHF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,iEC81BI,mDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,2DAAA,CD11BJ,iEC01BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BJ,iECs1BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDl1BJ,iECk1BI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CD90BJ,wDC80BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD10BJ,yDC00BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDt0BJ,yDCs0BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDl0BJ,oDACE,aD5BQ,CC+BV,qDC8zBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CD1zBJ,mDACE,cAAA,CACA,WAAA,CACA,YAAA,CACA,YAAA,CACA,+BAAA,CACA,YAAA,CACA,oBAAA,CACA,kBAAA,CE3CF,4DACE,wBHNM,CGON,aAAA,CACA,SAAA,CAEA,qFACE,gBAAA,CAGF,8DACE,oBAAA,CAGF,+DACE,aHdM,CGiBR,6EACE,wBHrBI,CGwBN,gFACE,eAAA,CACA,YAAA,CAGF,gFACE,SAAA,CAGF,wHACE,WCKS,CDJT,oBCrBS,CDyBb,yDACE,eAAA,CAIA,6EACE,kBAAA,CAIJ,2DACE,qBHnDM,CGoDN,4BAAA,CACA,cAAA,CAGF,kDACE,WAAA,CACA,iBAAA,CAGF,yDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAGF,qDD8xBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CC5xBF,aHjEQ,CGkER,mBAAA,CAGF,+DACE,kBAAA",sourceRoot:""}]),l.locals={productiveHeading01:"-esm-laboratory__orders-data-table__productiveHeading01___QgZsi",productiveHeading02:"-esm-laboratory__orders-data-table__productiveHeading02___R0p9o",productiveHeading03:"-esm-laboratory__orders-data-table__productiveHeading03___bCt31",productiveHeading04:"-esm-laboratory__orders-data-table__productiveHeading04___tiOmn",bodyLong01:"-esm-laboratory__orders-data-table__bodyLong01___OiNTM",bodyShort01:"-esm-laboratory__orders-data-table__bodyShort01___hkyhF",bodyShort02:"-esm-laboratory__orders-data-table__bodyShort02___o1pZm",text02:"-esm-laboratory__orders-data-table__text02___VE7d7",label01:"-esm-laboratory__orders-data-table__label01___vsNLz",modal:"-esm-laboratory__orders-data-table__modal___G1tyV",tableContainer:"-esm-laboratory__orders-data-table__tableContainer___D__6d",toolbarContent:"-esm-laboratory__orders-data-table__toolbarContent___EQssl",toolbarItem:"-esm-laboratory__orders-data-table__toolbarItem___ognrj",tableWrapper:"-esm-laboratory__orders-data-table__tableWrapper___TYIue",tileContainer:"-esm-laboratory__orders-data-table__tileContainer___O7Jw1",tile:"-esm-laboratory__orders-data-table__tile___roPzA",tileContent:"-esm-laboratory__orders-data-table__tileContent___AeH5p",content:"-esm-laboratory__orders-data-table__content___UBZf6",singleLineDisplay:"-esm-laboratory__orders-data-table__singleLineDisplay___JJ8eJ"};const s=l},9112:(e,t,a)=>{a.d(t,{c:()=>I});var r=a(7244),o=a.n(r),n=a(4652),l=a(4708),s=a(5984),i=a(8704),d=a(3604),A=a.n(d),_=a(7200),c=a.n(_),u=a(8272),b=a.n(u),m=a(712),g=a.n(m),p=a(6768),C=a.n(p),y=a(2116),h=a.n(y),f=a(5952),v={};v.styleTagTransform=h(),v.setAttributes=g(),v.insert=b().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=C(),A()(f.c,v);const E=f.c&&f.c.locals?f.c.locals:void 0;var D=function(e){return"COMPLETED"===e?"green":"IN_PROGRESS"===e?"orange":"red"},w=a(6612);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){S(e,t,a[t])}))}return e}function k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,o,n=[],l=!0,s=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{l||null==a.return||a.return()}finally{if(s)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const I=function(e){var t=e.useFilter,a=void 0!==t&&t,d=e.actionsSlotName,A=e.excludeColumns,_=void 0===A?[]:A,c=e.fulfillerStatus,u=e.excludeCanceledAndDiscontinuedOrders,b=void 0===u||u,m=(0,n.useTranslation)().t,g=(0,i.useConfig)().targetPatientDashboard,p=g.redirectToResultsViewer,C=g.redirectToOrders,y=N((0,r.useState)(null),2),h=y[0],f=y[1],v=(0,w.A5)(a?h:c,b),B=v.labOrders,S=v.isLoading,I=[{value:null,display:m("all","All")},{value:"NEW",display:m("newStatus","NEW")},{value:"RECEIVED",display:m("receivedStatus","RECEIVED")},{value:"IN_PROGRESS",display:m("inProgressStatus","IN_PROGRESS")},{value:"COMPLETED",display:m("completedStatus","COMPLETED")},{value:"EXCEPTION",display:m("exceptionStatus","EXCEPTION")},{value:"ON_HOLD",display:m("onHoldStatus","ON_HOLD")},{value:"DECLINED",display:m("declinedStatus","DECLINED")}],P=(0,r.useMemo)((function(){return[{key:"date",header:m("date","Date")},{key:"orderNumber",header:m("orderNumber","Order Number")},{key:"patient",header:m("patient","Patient")},{key:"test",header:m("test","Test")},{key:"action",header:m("action","Action")},{key:"status",header:m("status","Status")},{key:"orderedBy",header:m("orderedBy","Ordered By")},{key:"urgency",header:m("urgency","Urgency")},{key:"actions",header:m("actions","Actions")}].filter((function(e){return!_.includes(e.key)}))}),[_,m]),T=[10,20,30,40,50],x=N((0,r.useState)(10),2),z=x[0],L=x[1],F=(0,i.usePagination)(B,z),H=F.goTo,j=F.results,G=F.currentPage,J=function(e){var t=e.selectedItem;return f(t.value)},M=(0,r.useMemo)((function(){return j.map((function(e,t){var a,r,n;return{id:e.uuid,date:o().createElement("span",{className:E.singleLineDisplay},(0,i.formatDate)((0,i.parseDate)(e.dateActivated))),patient:o().createElement(i.ConfigurableLink,{to:"${openmrsSpaBase}/patient/".concat(null===(a=e.patient)||void 0===a?void 0:a.uuid,"/chart/").concat("COMPLETED"==c?p:C)},null===(r=e.patient)||void 0===r?void 0:r.display.split("-")[1]),orderNumber:e.orderNumber,test:null===(n=e.concept)||void 0===n?void 0:n.display,action:e.action,status:o().createElement("span",{className:E.statusContainer,style:{color:"".concat(D(e.fulfillerStatus))}},e.fulfillerStatus),orderedBy:e.orderer.display.split("-")[1],urgency:e.urgency,actions:o().createElement(i.CustomOverflowMenu,{menuTitle:o().createElement(s.TN,null)},o().createElement(i.ExtensionSlot,{className:E.menuLink,state:{order:j[t]},name:d}))}}))}),[j,p,C,d]);return S?o().createElement(l.m2V,{role:"progressbar"}):o().createElement(l.iSL,{rows:M,headers:P,useZebraStyles:!0,overflowMenuOnHover:!0},(function(e){var t=e.rows,r=e.headers,n=e.getHeaderProps,s=e.getTableProps,i=e.getRowProps,d=e.onInputChange;return o().createElement(l._tR,{className:E.tableContainer},o().createElement(l.MBp,null,o().createElement(l.aGn,null,a&&o().createElement(l.ar0,{className:E.toolbarItem},o().createElement(l.cS2,{id:"orderStatusFilter",initialSelectedItem:h?I.find((function(e){return e.value===h})):I[0],titleText:m("filterOrdersByStatus","Filter orders by status")+":",type:"inline",items:I,onChange:J,itemToString:function(e){return null==e?void 0:e.display}})),o().createElement(l.ar0,{className:E.toolbarItem},o().createElement(l.OWJ,{expanded:!0,onChange:d,placeholder:m("searchThisList","Search this list"),size:"sm"})))),o().createElement(l.oJK,k(O({},s()),{className:E.tableWrapper}),o().createElement(l.iy5,null,o().createElement(l.CGA,null,r.map((function(e){var t,a;return o().createElement(l.IEe,n({header:e}),null!==(a=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==a?a:e.header)})))),o().createElement(l.qqV,null,t.map((function(e,t){return o().createElement(o().Fragment,{key:e.id},o().createElement(l.CGA,k(O({},i({row:e})),{key:e.id}),e.cells.map((function(e){var t,a;return o().createElement(l.y6P,{key:e.id},null!==(a=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==a?a:e.value)}))))})))),0===t.length?o().createElement("div",{className:E.tileContainer},o().createElement(l.g$J,{className:E.tile},o().createElement("div",{className:E.tileContent},o().createElement("p",{className:E.content},m("noLabRequestsFoundCheckFilters","No lab requests found. Please check your filters and try again."))))):null,o().createElement(l.eML,{forwardText:m("nextPage","Next page"),backwardText:m("previousPage","Previous page"),page:G,pageSize:z,pageSizes:T,totalItems:null==B?void 0:B.length,className:E.pagination,onChange:function(e){var t=e.pageSize,a=e.page;t!==z&&L(t),a!==G&&H(a)}}))}))}},6612:(e,t,a)=>{a.d(t,{A5:()=>l,E9:()=>i,_u:()=>s});var r=a(8704),o=a(4072),n=a(7244);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,r.useConfig)().laboratoryOrderTypeUuid,l=(0,n.useMemo)((function(){return"NEW"===e?null:e}),[e]),s="NEW"===e,i="".concat(r.restBaseUrl,"/order?orderTypes=").concat(a,"&v=full");i=l?i+"&fulfillerStatus=".concat(l):i,i=t?"".concat(i,"&excludeCanceledAndExpired=true&excludeDiscontinueOrders=true"):i;var d=e?5e3:null,A=(0,o.cp)(i,r.openmrsFetch,{refreshInterval:d}),_=A.data,c=A.error,u=A.mutate,b=A.isLoading;return{labOrders:(null==_?void 0:_.data)&&s&&_.data.results.filter((function(e){return"NEW"===(null==e?void 0:e.action)&&null===(null==e?void 0:e.fulfillerStatus)}))||(null==_?void 0:_.data.results)||[],isLoading:b,isError:c,mutate:u}}function s(e,t,a){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/order/").concat(e,"/fulfillerdetails/"),{method:"POST",headers:{"Content-Type":"application/json"},signal:a.signal,body:{fulfillerStatus:t}})}function i(e,t,a){return(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/order/").concat(e,"/fulfillerdetails/"),{method:"POST",headers:{"Content-Type":"application/json"},signal:a.signal,body:{fulfillerStatus:"DECLINED",fulfillerComment:t}})}}}]);