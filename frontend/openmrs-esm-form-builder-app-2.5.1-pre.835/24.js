(globalThis.webpackChunk_openmrs_esm_form_builder_app=globalThis.webpackChunk_openmrs_esm_form_builder_app||[]).push([[24],{85301:(e,t,n)=>{var r={"./en.json":[90011,11],"./es.json":[27308,308],"./fr.json":[84512,512],"./km.json":[60092,92]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n.t(a,19)))}a.keys=()=>Object.keys(r),a.id=85301,e.exports=a},67033:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__action-buttons__actionButtons___fHui9{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__action-buttons__actionButtons___fHui9 button{margin-left:1rem}.-esm-form-builder__action-buttons__spinner___uTjVo.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/action-buttons/action-buttons.scss"],names:[],mappings:"AAAA,0DACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,iEACE,gBAAA,CAKF,wEACE,eAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__action-buttons__actionButtons___fHui9",spinner:"-esm-form-builder__action-buttons__spinner___uTjVo"};const l=i},18691:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__dashboard__container___Wal_P{padding:1rem;background-color:#f4f4f4}.-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5{flex:1}.-esm-form-builder__dashboard__flexContainer___Mm18q{display:flex;justify-content:space-between}.-esm-form-builder__dashboard__toolbarWrapper___RUga4{position:relative;display:flex;justify-content:flex-end}.omrs-breakpoint-lt-desktop .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:3rem}.omrs-breakpoint-gt-tablet .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:2rem}.-esm-form-builder__dashboard__tableToolbar___C3SIt{width:20%;min-width:12.5rem}.-esm-form-builder__dashboard__headerContainer___p8D9T{background-color:#f4f4f4}.-esm-form-builder__dashboard__searchbox___Xqlyd input{outline:2px solid #ff832b !important}.-esm-form-builder__dashboard__link___qKq6V{text-decoration:none}.-esm-form-builder__dashboard__table___bB2_m tr:last-of-type td{border-bottom:none}.-esm-form-builder__dashboard__table___bB2_m td{padding-top:0;padding-bottom:0}.-esm-form-builder__dashboard__toolbar___Jd1Mo{position:relative;display:flex;width:100%;min-height:2rem;margin-bottom:.5rem}.-esm-form-builder__dashboard__emptyContainer___NMRCU{justify-content:center;align-items:center;width:100%;padding:1rem}.-esm-form-builder__dashboard__tableContainer___g3LIB{padding:0}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--data-table-content{border:1px solid #e0e0e0;border-bottom:none;overflow:visible}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--table-toolbar{position:relative;height:2rem;min-height:0rem;overflow:visible;top:0}.-esm-form-builder__dashboard__tableContainer___g3LIB.cds--data-table-container{padding-top:0rem}.-esm-form-builder__dashboard__filterContainer____yxN0{flex:1}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--dropdown__wrapper--inline{gap:0}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--list-box__menu-icon{height:1rem}.-esm-form-builder__dashboard__filterDropdown___Uo1aK{margin-bottom:.5rem}.-esm-form-builder__dashboard__content___rpYvj{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-form-builder__dashboard__tileContainer___qC3f7{background-color:#fff;border-top:1px solid #525252;padding:5rem 0}.-esm-form-builder__dashboard__tile___NdQlL{margin:auto;width:fit-content}.-esm-form-builder__dashboard__tileContent___OIedg{display:flex;flex-direction:column;align-items:center}.-esm-form-builder__dashboard__warningMessage___hTdHn{margin:1rem 0}.-esm-form-builder__dashboard__spinner___e3Lbh.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/dashboard/dashboard.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iDACE,YAAA,CACA,wBCoCQ,CDjCV,uEACE,MAAA,CAGF,qDACE,YAAA,CACA,6BAAA,CAGF,sDACE,iBAAA,CACA,YAAA,CACA,wBAAA,CAIA,kFACE,WEyBS,CFpBX,iFACE,WESS,CFLb,oDACE,SAAA,CACA,iBAAA,CAGF,uDACE,wBAAA,CAIA,uDACE,oCAAA,CAIJ,4CACE,oBAAA,CAMI,gEACE,kBAAA,CAKN,gDACE,aAAA,CACA,gBAAA,CAIJ,+CACE,iBAAA,CACA,YAAA,CACA,UAAA,CACA,eAAA,CACA,mBAAA,CAGF,sDACE,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CAGF,sDACE,SAAA,CAEA,+EACE,wBAAA,CACA,kBAAA,CACA,gBAAA,CAGF,0EACE,iBAAA,CACA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,KAAA,CAGF,gFACE,gBAAA,CAKJ,uDACE,MAAA,CAEA,uFACE,KAAA,CAGF,iFACE,WAAA,CAIJ,sDACE,mBEpGW,CFuGb,+CGsuBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CHpuBF,aC9EQ,CD+ER,mBAAA,CAGF,qDACE,qBCTQ,CDUR,4BAAA,CACA,cAAA,CAGF,4CACE,WAAA,CACA,iBAAA,CAGF,mDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAGF,sDACE,aAAA,CAIA,mEACE,eAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__dashboard__container___Wal_P",backgroundDataFetchingIndicator:"-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5",flexContainer:"-esm-form-builder__dashboard__flexContainer___Mm18q",toolbarWrapper:"-esm-form-builder__dashboard__toolbarWrapper___RUga4",tableToolbar:"-esm-form-builder__dashboard__tableToolbar___C3SIt",headerContainer:"-esm-form-builder__dashboard__headerContainer___p8D9T",searchbox:"-esm-form-builder__dashboard__searchbox___Xqlyd",link:"-esm-form-builder__dashboard__link___qKq6V",table:"-esm-form-builder__dashboard__table___bB2_m",toolbar:"-esm-form-builder__dashboard__toolbar___Jd1Mo",emptyContainer:"-esm-form-builder__dashboard__emptyContainer___NMRCU",tableContainer:"-esm-form-builder__dashboard__tableContainer___g3LIB",filterContainer:"-esm-form-builder__dashboard__filterContainer____yxN0",filterDropdown:"-esm-form-builder__dashboard__filterDropdown___Uo1aK",content:"-esm-form-builder__dashboard__content___rpYvj",tileContainer:"-esm-form-builder__dashboard__tileContainer___qC3f7",tile:"-esm-form-builder__dashboard__tile___NdQlL",tileContent:"-esm-form-builder__dashboard__tileContent___OIedg",warningMessage:"-esm-form-builder__dashboard__warningMessage___hTdHn",spinner:"-esm-form-builder__dashboard__spinner___e3Lbh"};const l=i},80199:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,'.-esm-form-builder__empty-state__action___O1dBg{margin-bottom:.5rem}.-esm-form-builder__empty-state__content___qowQ3{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__tabletHeading___BEQmV h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__desktopHeading___kdF99,.-esm-form-builder__empty-state__tabletHeading___BEQmV{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4:after,.-esm-form-builder__empty-state__tabletHeading___BEQmV h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__heading___UrKNa:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__tile___kOT5S{text-align:center;border:1px solid #e0e0e0}',"",{version:3,sources:["webpack://./src/components/empty-state/empty-state.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,gDACE,mBCgBW,CDbb,iDE01BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CFx1BF,aGsCQ,CHrCR,eCoBW,CDnBX,mBCSW,CDLX,2DEk1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFh1BA,aG8BM,CHzBR,0DE20BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFz0BA,aGuBM,CHnBV,+GACE,eAAA,CACA,yBAAA,CACA,kBCDW,CDGX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,uDACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAGF,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={action:"-esm-form-builder__empty-state__action___O1dBg",content:"-esm-form-builder__empty-state__content___qowQ3",desktopHeading:"-esm-form-builder__empty-state__desktopHeading___kdF99",tabletHeading:"-esm-form-builder__empty-state__tabletHeading___BEQmV",heading:"-esm-form-builder__empty-state__heading___UrKNa",tile:"-esm-form-builder__empty-state__tile___kOT5S"};const l=i},44831:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,'.-esm-form-builder__error-state__errorMessage___Y5qNF{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-top:2.25rem;margin-bottom:.5rem}.-esm-form-builder__error-state__errorCopy___JQziZ{margin-bottom:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__tabletHeading___XUrSF h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7,.-esm-form-builder__error-state__tabletHeading___XUrSF{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4:after,.-esm-form-builder__error-state__tabletHeading___XUrSF h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__error-state__tile___w49e4{text-align:center;border:1px solid #e0e0e0}',"",{version:3,sources:["webpack://./src/components/error-state/error-state.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,sDC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD31BF,kBAAA,CACA,mBEaW,CFVb,mDACE,mBESW,CD60BT,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDp1BF,aGkCQ,CH9BR,2DCg1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD90BA,aG4BM,CHvBR,0DCy0BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDv0BA,aGqBM,CHjBV,+GACE,eAAA,CACA,yBAAA,CACA,kBEHW,CFKX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={errorMessage:"-esm-form-builder__error-state__errorMessage___Y5qNF",errorCopy:"-esm-form-builder__error-state__errorCopy___JQziZ",desktopHeading:"-esm-form-builder__error-state__desktopHeading___Ri1i7",tabletHeading:"-esm-form-builder__error-state__tabletHeading___XUrSF",tile:"-esm-form-builder__error-state__tile___w49e4"};const l=i},90935:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__form-editor__container___EWcU0{padding:1rem 2rem;display:flex;flex-direction:column}.-esm-form-builder__form-editor__grid___wYMDM{margin-left:0;margin-right:0;padding-left:0;padding-right:0;max-width:100%}.-esm-form-builder__form-editor__grid___wYMDM .cds--tabs__nav-item--selected{border-bottom:2px solid var(--cds-border-interactive, #005d5d);outline:none !important}.-esm-form-builder__form-editor__column___C5MAT{margin-left:0;margin-right:0}.-esm-form-builder__form-editor__maximized___Iv6AJ .-esm-form-builder__form-editor__column___C5MAT:last-child{display:none}.-esm-form-builder__form-editor__errorNotification___G_V3y{min-width:100%;margin:0;padding:0}.-esm-form-builder__form-editor__actionButtons___SA2Vs{display:flex;align-items:center;justify-content:space-between}.-esm-form-builder__form-editor__actionButtons___SA2Vs button{margin-left:1rem}.-esm-form-builder__form-editor__formName___rQ3Te{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-form-builder__form-editor__editorContainer___ABeSl{padding:1rem}.-esm-form-builder__form-editor__editorContainer___ABeSl .ace_editor .ace_content .ace_layer .error{position:absolute;background-color:#da1e28;border-radius:0}.-esm-form-builder__form-editor__heading___SeRaW{display:flex;margin-right:1rem;align-items:center}.-esm-form-builder__form-editor__bottomHeader___vFLMN{display:flex;justify-content:space-between;align-items:center}.-esm-form-builder__form-editor__tabHeading___As8B0{display:flex;align-items:center;font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);min-height:2.5rem;width:100%;padding:.75rem}.-esm-form-builder__form-editor__backButton___uELHk{margin-left:1rem;padding:.5rem 0;max-width:fit-content}.-esm-form-builder__form-editor__backButton___uELHk a{text-decoration:none}.-esm-form-builder__form-editor__backButton___uELHk button{display:flex;padding-left:0 !important}.-esm-form-builder__form-editor__backButton___uELHk button svg{order:1;margin:0 .5rem}.-esm-form-builder__form-editor__backButton___uELHk button span{order:2}button{padding-block-start:.5rem}.-esm-form-builder__form-editor__topBtns____p75f{display:flex;align-items:center}","",{version:3,sources:["webpack://./src/components/form-editor/form-editor.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAIA,mDACE,iBAAA,CACA,YAAA,CACA,qBAAA,CAGF,8CACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CAEA,6EACE,8DAAA,CACA,uBAAA,CAIJ,gDACE,aAAA,CACA,cAAA,CAGF,8GACE,YAAA,CAGF,2DACE,cAAA,CACA,QAAA,CACA,SAAA,CAGF,uDACE,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,8DACE,gBAAA,CAIJ,kDCkzBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD9yBJ,yDACE,YAAA,CAEA,oGACE,iBAAA,CACA,wBEwCK,CFvCL,eAAA,CAIJ,iDACE,YAAA,CACA,iBAAA,CACA,kBAAA,CAGF,sDACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAGF,oDACE,YAAA,CACA,kBAAA,CCsxBE,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDpxBF,iBAAA,CACA,UAAA,CACA,cAAA,CAGF,oDACE,gBGrDW,CHsDX,eAAA,CACA,qBAAA,CAEA,sDACE,oBAAA,CAGF,2DACE,YAAA,CACA,yBAAA,CAEA,+DACE,OAAA,CACA,cAAA,CAGF,gEACE,OAAA,CAKN,OACE,yBAAA,CAGF,iDACE,YAAA,CACA,kBAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-editor__container___EWcU0",grid:"-esm-form-builder__form-editor__grid___wYMDM",column:"-esm-form-builder__form-editor__column___C5MAT",maximized:"-esm-form-builder__form-editor__maximized___Iv6AJ",errorNotification:"-esm-form-builder__form-editor__errorNotification___G_V3y",actionButtons:"-esm-form-builder__form-editor__actionButtons___SA2Vs",formName:"-esm-form-builder__form-editor__formName___rQ3Te",editorContainer:"-esm-form-builder__form-editor__editorContainer___ABeSl",heading:"-esm-form-builder__form-editor__heading___SeRaW",bottomHeader:"-esm-form-builder__form-editor__bottomHeader___vFLMN",tabHeading:"-esm-form-builder__form-editor__tabHeading___As8B0",backButton:"-esm-form-builder__form-editor__backButton___uELHk",topBtns:"-esm-form-builder__form-editor__topBtns____p75f"};const l=i},947:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__form-renderer__container___qmP2j,.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#fff;padding:1rem;overflow-y:scroll;height:100vh}.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#f4f4f4;margin-top:5rem}.-esm-form-builder__form-renderer__loader___AOiPt{display:flex;justify-content:center;align-items:center;height:inherit}.-esm-form-builder__form-renderer__emptyStateTile___mZ_kI,.-esm-form-builder__form-renderer__errorStateTile___q9583{width:80%;margin:1.25rem auto;display:flex;flex-flow:column wrap;align-items:center;justify-content:center;padding:1.5rem}.-esm-form-builder__form-renderer__errorStateTile___q9583 .-esm-form-builder__form-renderer__helperText___Pnlco{margin:.75rem 0}.-esm-form-builder__form-renderer__errorStateTile___q9583 button{margin-top:.25rem}.-esm-form-builder__form-renderer__heading___S2HQc{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#161616}.-esm-form-builder__form-renderer__helperText___Pnlco{margin-top:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#262626}","",{version:3,sources:["webpack://./src/components/form-renderer/form-renderer.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iHACE,qBCqHQ,CDpHR,YAAA,CACA,iBAAA,CACA,YAAA,CAGF,4DAEE,wBC6BQ,CD5BR,eAAA,CAGF,kDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA,CAGF,oHACE,SAAA,CACA,mBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CAMA,gHACE,eAAA,CAGF,iEACE,iBAAA,CAIJ,mDEozBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFlzBF,aCGS,CAAA,sDDCT,gBAAA,CE8yBE,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CF5yBF,aCJQ",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-renderer__container___qmP2j",loadingContainer:"-esm-form-builder__form-renderer__loadingContainer___RJP8p",loader:"-esm-form-builder__form-renderer__loader___AOiPt",emptyStateTile:"-esm-form-builder__form-renderer__emptyStateTile___mZ_kI",errorStateTile:"-esm-form-builder__form-renderer__errorStateTile___q9583",helperText:"-esm-form-builder__form-renderer__helperText___Pnlco",heading:"-esm-form-builder__form-renderer__heading___S2HQc"};const l=i},19707:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-form-builder__header__header___obAkY{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;height:6rem;background-color:#fff;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;padding:1rem}.-esm-form-builder__header__left-justified-items___ZXpgL{display:flex;flex-direction:row;align-items:center;cursor:pointer;align-items:center}.-esm-form-builder__header__right-justified-items___uoIaX{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;display:flex;flex-direction:column;justify-content:space-between}.-esm-form-builder__header__page-name___qNLcY{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-form-builder__header__page-labels___Vv_ab{margin:.5rem}.-esm-form-builder__header__page-labels___Vv_ab p:first-of-type{margin-bottom:.25rem}.-esm-form-builder__header__date-and-location___xokFh{display:flex;justify-content:flex-end;align-items:center}.-esm-form-builder__header__userContainer___X1P0O{display:flex;align-items:center;justify-content:flex-end;gap:1rem}.-esm-form-builder__header__value___eNsZZ{margin-left:.25rem}.-esm-form-builder__header__middot___Euiks{margin:0 .5rem}.-esm-form-builder__header__view___r7RBY{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}","",{version:3,sources:["webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/components/header/header.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,2CC81BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CD51BF,aDDQ,CCER,WE2DW,CF1DX,qBDPM,CCQN,+BAAA,CACA,YAAA,CACA,6BAAA,CACA,YEmBW,CFhBb,yDACE,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,cAAA,CACA,kBAAA,CAGF,0DC20BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDz0BF,aDpBQ,CCqBR,YAAA,CACA,qBAAA,CACA,6BAAA,CAGF,8CCm0BI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CD/zBJ,gDACE,YEfW,CFiBX,gEACE,oBEvBS,CF2Bb,sDACE,YAAA,CACA,wBAAA,CACA,kBAAA,CAGF,kDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,QEtBW,CFyBb,0CACE,kBEzCW,CF4Cb,2CACE,cAAA,CAGF,yCCkyBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA",sourceRoot:""}]),i.locals={header:"-esm-form-builder__header__header___obAkY","left-justified-items":"-esm-form-builder__header__left-justified-items___ZXpgL","right-justified-items":"-esm-form-builder__header__right-justified-items___uoIaX","page-name":"-esm-form-builder__header__page-name___qNLcY","page-labels":"-esm-form-builder__header__page-labels___Vv_ab","date-and-location":"-esm-form-builder__header__date-and-location___xokFh",userContainer:"-esm-form-builder__header__userContainer___X1P0O",value:"-esm-form-builder__header__value___eNsZZ",middot:"-esm-form-builder__header__middot___Euiks",view:"-esm-form-builder__header__view___r7RBY"};const l=i},26821:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__draggable-question__buttonsContainer___DCYP_{display:flex;align-items:center}.-esm-form-builder__draggable-question__iconAndName___IqOwD{display:flex;align-items:center}.-esm-form-builder__draggable-question__questionLabel___Qbeje{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-form-builder__draggable-question__isDragged___Ro1hP,.-esm-form-builder__draggable-question__normal___NG24l{display:flex;height:3rem;justify-content:space-between;align-items:center;width:100%}.-esm-form-builder__draggable-question__isDragged___Ro1hP{box-shadow:0 4px 8px rgba(0,0,0,.2);background-color:rgba(255,255,255,.552)}.-esm-form-builder__draggable-question__dragIcon___QEZvt{margin-right:.5rem}.-esm-form-builder__draggable-question__dragIcon___QEZvt :focus{border:none !important}","",{version:3,sources:["webpack://./src/components/interactive-builder/draggable-question.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iEACE,YAAA,CACA,kBAAA,CAGF,4DACE,YAAA,CACA,kBAAA,CAGF,8DCo1BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDh1BJ,iHACE,YAAA,CACA,WAAA,CACA,6BAAA,CACA,kBAAA,CACA,UAAA,CAGF,0DACE,mCAAA,CACA,uCAAA,CAGF,yDACE,kBAAA,CAEA,gEACE,sBAAA",sourceRoot:""}]),i.locals={buttonsContainer:"-esm-form-builder__draggable-question__buttonsContainer___DCYP_",iconAndName:"-esm-form-builder__draggable-question__iconAndName___IqOwD",questionLabel:"-esm-form-builder__draggable-question__questionLabel___Qbeje",isDragged:"-esm-form-builder__draggable-question__isDragged___Ro1hP",normal:"-esm-form-builder__draggable-question__normal___NG24l",dragIcon:"-esm-form-builder__draggable-question__dragIcon___QEZvt"};const l=i},50407:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,'.-esm-form-builder__editable-value__schemaLabel___n7Tqt{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-form-builder__editable-value__pageLabel___HDnGY{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__editable-value__pageLabel___HDnGY:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__editable-value__sectionLabel___SfPGZ{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}',"",{version:3,sources:["webpack://./src/components/interactive-builder/editable-value.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAEA,wDCg2BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD51BJ,sDC41BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD11BF,iBAAA,CAEA,4DACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,yDC+0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA",sourceRoot:""}]),i.locals={schemaLabel:"-esm-form-builder__editable-value__schemaLabel___n7Tqt",pageLabel:"-esm-form-builder__editable-value__pageLabel___HDnGY",sectionLabel:"-esm-form-builder__editable-value__sectionLabel___SfPGZ"};const l=i},60823:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,'.-esm-form-builder__interactive-builder__container___QqXP7 .cds--modal-content:focus{outline:none}.-esm-form-builder__interactive-builder__container___QqXP7 .cds--tooltip{z-index:1}.-esm-form-builder__interactive-builder__flexContainer___hKEjz{display:flex;align-items:center}.-esm-form-builder__interactive-builder__helperText___hIqWi{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);margin:1rem 0rem}.-esm-form-builder__interactive-builder__heading___YzI9_,.-esm-form-builder__interactive-builder__name___DstHx,.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin:1rem 0rem .5rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__name___DstHx{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus{margin:1rem 0;border-bottom:1px solid #e0e0e0}.-esm-form-builder__interactive-builder__addQuestionButton___tNA7f{margin:.75rem 0}.-esm-form-builder__interactive-builder__header___PFzXV{margin:2rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c{margin:1rem .5rem}.-esm-form-builder__interactive-builder__explainer___IK72c p{margin:1.5rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c p:first-of-type{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-form-builder__interactive-builder__sectionExplainer___g_g6b{margin:1rem .5rem}.-esm-form-builder__interactive-builder__startButton___BrSte{margin:1rem 0}.-esm-form-builder__interactive-builder__editorContainer___OseKc{display:flex;justify-content:space-between;margin:.25rem .5rem;align-items:center;width:100%}.-esm-form-builder__interactive-builder__buttonContainer___JLN17 span{margin:0rem .5rem}.-esm-form-builder__interactive-builder__addSectionButton___BOQnt{margin:1rem}.-esm-form-builder__interactive-builder__validationErrorMessage___JQuV_{margin-left:1rem;color:#da1e28;font-size:.75rem}.-esm-form-builder__interactive-builder__answerErrors___CRbQP{display:flex;flex-direction:column;gap:.5rem;margin-left:2rem;margin-top:1rem;font-size:.75rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/interactive-builder.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIE,qFACE,YAAA,CAGF,yEACE,SAAA,CAIJ,+DACE,YAAA,CACA,kBAAA,CAGF,4DCg1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BF,gBAAA,CAGF,2KC20BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDz0BF,sBAAA,CAGF,+DCs0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDp0BF,iBAAA,CAEA,qEACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,4DCyzBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDpzBJ,sDCozBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD/yBJ,yEACE,aAAA,CACA,+BAAA,CAGF,mEACE,eAAA,CAGF,wDACE,aAAA,CAGF,2DACE,iBAAA,CAEA,6DACE,eAAA,CAEA,2EC4xBA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDtxBJ,kEACE,iBAAA,CAGF,6DACE,aAAA,CAGF,iEACE,YAAA,CACA,6BAAA,CACA,mBAAA,CACA,kBAAA,CACA,UAAA,CAIA,sEACE,iBAAA,CAIJ,kEACE,WAAA,CAGF,wEACE,gBAAA,CACA,aEPO,CFQP,gBAAA,CAGF,8DACE,YAAA,CACA,qBAAA,CACA,SAAA,CACA,gBAAA,CACA,eAAA,CACA,gBAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__interactive-builder__container___QqXP7",flexContainer:"-esm-form-builder__interactive-builder__flexContainer___hKEjz",helperText:"-esm-form-builder__interactive-builder__helperText___hIqWi",heading:"-esm-form-builder__interactive-builder__heading___YzI9_",name:"-esm-form-builder__interactive-builder__name___DstHx",subheading:"-esm-form-builder__interactive-builder__subheading___KNIIX",styledHeading:"-esm-form-builder__interactive-builder__styledHeading___On3NK",editableFieldsContainer:"-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus",addQuestionButton:"-esm-form-builder__interactive-builder__addQuestionButton___tNA7f",header:"-esm-form-builder__interactive-builder__header___PFzXV",explainer:"-esm-form-builder__interactive-builder__explainer___IK72c",sectionExplainer:"-esm-form-builder__interactive-builder__sectionExplainer___g_g6b",startButton:"-esm-form-builder__interactive-builder__startButton___BrSte",editorContainer:"-esm-form-builder__interactive-builder__editorContainer___OseKc",buttonContainer:"-esm-form-builder__interactive-builder__buttonContainer___JLN17",addSectionButton:"-esm-form-builder__interactive-builder__addSectionButton___BOQnt",validationErrorMessage:"-esm-form-builder__interactive-builder__validationErrorMessage___JQuV_",answerErrors:"-esm-form-builder__interactive-builder__answerErrors___CRbQP"};const l=i},51475:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,'.-esm-form-builder__question-modal__label___sskPy{margin-bottom:.5rem}.-esm-form-builder__question-modal__loader___Qa5xT{padding:.75rem .5rem}.-esm-form-builder__question-modal__tag___vovd0{margin-right:.5rem}.-esm-form-builder__question-modal__form___iKunL{overflow-y:scroll}.-esm-form-builder__question-modal__conceptList___mA4im,.-esm-form-builder__question-modal__personAttributeTypeList___UMfHx{background:#fff;max-height:14rem;overflow-y:auto;border:1px solid #e0e0e0;border-top:none}.-esm-form-builder__question-modal__conceptList___mA4im,.-esm-form-builder__question-modal__personAttributeTypeList___UMfHx li:hover{background-color:#e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr,.-esm-form-builder__question-modal__personAttributeType___TvlLc{padding:.75rem;border-bottom:1px solid #e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr:last-of-type,.-esm-form-builder__question-modal__personAttributeType___TvlLc:last-of-type{border-bottom:none}.-esm-form-builder__question-modal__emptyResults___WqYUv{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;min-height:1rem}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp{padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;background-color:#8d8d8d}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp p{color:#fff}.-esm-form-builder__question-modal__oclLink___MSYtU{color:#edf5ff;display:flex;align-items:center}.-esm-form-builder__question-modal__oclLink___MSYtU svg{margin-left:.25rem}.-esm-form-builder__question-modal__table___yZxgG,.-esm-form-builder__question-modal__tableStriped___db53S{width:100%}.-esm-form-builder__question-modal__table___yZxgG tr,.-esm-form-builder__question-modal__tableStriped___db53S tr{background-color:#fff;border:1px solid #e0e0e0}.-esm-form-builder__question-modal__table___yZxgG td,.-esm-form-builder__question-modal__tableStriped___db53S td,.-esm-form-builder__question-modal__table___yZxgG th,.-esm-form-builder__question-modal__tableStriped___db53S th{padding:.25rem;border:1px solid #e0e0e0;max-width:10rem;text-align:left}.-esm-form-builder__question-modal__tableStriped___db53S thead{font-weight:bold}.-esm-form-builder__question-modal__tableStriped___db53S tbody>tr:nth-child(odd){background-color:#f4f4f4}.-esm-form-builder__question-modal__multiSelect___GYmMF .cds--list-box__field--wrapper{align-items:center;display:flex;height:2.5rem;justify-content:space-between;margin-left:.5rem;width:100%}.-esm-form-builder__question-modal__error___insjw{width:100%;max-width:unset;padding:"0rem";margin-bottom:1rem}.-esm-form-builder__question-modal__questionIdLabel___kEBUA{display:flex;align-items:center}.-esm-form-builder__question-modal__questionIdLabel___kEBUA>span{display:inline-block;margin-right:1rem}.-esm-form-builder__question-modal__required___irTPy{color:#da1e28;margin-left:.125rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/question-modal.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAGA,kDACE,mBAAA,CAGF,mDACE,oBAAA,CAGF,gDACE,kBAAA,CAGF,iDACE,iBAAA,CAGF,4HACE,eCsGQ,CDrGR,gBAAA,CACA,eAAA,CACA,wBAAA,CACA,eAAA,CAGF,qIACE,wBCeQ,CDZV,oHACE,cAAA,CACA,+BAAA,CAEA,8IACE,kBAAA,CAIJ,yDE0zBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFxzBF,aCMQ,CDLR,eAAA,CAGF,8DACE,kBAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,wBCLQ,CDOR,gEACE,UCoEM,CDhEV,oDACE,aC/CQ,CDgDR,YAAA,CACA,kBAAA,CAEA,wDACE,kBAAA,CAIJ,2GACE,UAAA,CAEA,iHACE,qBCkDM,CDjDN,wBAAA,CAGF,kOACE,cAAA,CACA,wBAAA,CACA,eAAA,CACA,eAAA,CAOF,+DACE,gBAAA,CAGF,iFACE,wBClDM,CDuDR,uFACE,kBAAA,CACA,YAAA,CACA,aAAA,CACA,6BAAA,CACA,iBAAA,CACA,UAAA,CAIJ,kDACE,UAAA,CACA,eAAA,CACA,cAAA,CACA,kBAAA,CAGF,4DAME,YAAA,CACA,kBAAA,CANA,iEACE,oBAAA,CACA,iBAAA,CAOJ,qDACE,aC5BO,CD6BP,mBAAA",sourceRoot:""}]),i.locals={label:"-esm-form-builder__question-modal__label___sskPy",loader:"-esm-form-builder__question-modal__loader___Qa5xT",tag:"-esm-form-builder__question-modal__tag___vovd0",form:"-esm-form-builder__question-modal__form___iKunL",conceptList:"-esm-form-builder__question-modal__conceptList___mA4im",personAttributeTypeList:"-esm-form-builder__question-modal__personAttributeTypeList___UMfHx",concept:"-esm-form-builder__question-modal__concept___mZEZr",personAttributeType:"-esm-form-builder__question-modal__personAttributeType___TvlLc",emptyResults:"-esm-form-builder__question-modal__emptyResults___WqYUv",oclLauncherBanner:"-esm-form-builder__question-modal__oclLauncherBanner___bvAqp",oclLink:"-esm-form-builder__question-modal__oclLink___MSYtU",table:"-esm-form-builder__question-modal__table___yZxgG",tableStriped:"-esm-form-builder__question-modal__tableStriped___db53S",multiSelect:"-esm-form-builder__question-modal__multiSelect___GYmMF",error:"-esm-form-builder__question-modal__error___insjw",questionIdLabel:"-esm-form-builder__question-modal__questionIdLabel___kEBUA",required:"-esm-form-builder__question-modal__required___irTPy"};const l=i},58026:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__value-editor__actionButtons___IHzt_{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__value-editor__actionButtons___IHzt_ button{margin-left:1rem}","",{version:3,sources:["webpack://./src/components/interactive-builder/value-editor.scss"],names:[],mappings:"AAAA,wDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,+DACE,gBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__value-editor__actionButtons___IHzt_"};const l=i},31475:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__save-form-modal__spinner___MeJjY.cds--inline-loading{min-height:1rem}.-esm-form-builder__save-form-modal__saveFormBody___DeV3z{max-height:75vh;overflow-y:auto}","",{version:3,sources:["webpack://./src/components/modals/save-form-modal.scss"],names:[],mappings:"AACE,yEACE,eAAA,CAIJ,0DACE,eAAA,CACA,eAAA",sourceRoot:""}]),i.locals={spinner:"-esm-form-builder__save-form-modal__spinner___MeJjY",saveFormBody:"-esm-form-builder__save-form-modal__saveFormBody___DeV3z"};const l=i},81521:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__pagination__bodyShort01___EqwXU,.-esm-form-builder__pagination__configurableLink___p0FSW{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-form-builder__pagination__desktop___hgBiG,.-esm-form-builder__pagination__tablet___qRkW1{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);display:flex;justify-content:space-between;color:#525252;background-color:#fff;padding-left:1rem;align-items:center}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination{min-height:0rem;height:2rem;width:auto;border:none}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--select-input,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--btn,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--pagination__right{min-height:0rem;height:2rem}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination{min-height:0rem;height:3rem;width:auto;border:none}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--select-input,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--btn,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--pagination__right{min-height:0rem;height:3rem}.-esm-form-builder__pagination__configurableLink___p0FSW{text-decoration:none;padding:0 .5rem}.-esm-form-builder__pagination__pagination___AT0no{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;display:flex}div.-esm-form-builder__pagination__pagination___AT0no>.cds--pagination__left{display:none}","",{version:3,sources:["webpack://./src/components/pagination/pagination.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,6GC81BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD11BJ,+FC01BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDx1BF,YAAA,CACA,6BAAA,CACA,aEoCQ,CFnCR,qBE6GQ,CF5GR,iBAAA,CACA,kBAAA,CAGF,iEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,wPACE,eAAA,CACA,WAAA,CAIJ,gEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,qPACE,eAAA,CACA,WAAA,CAIJ,yDACE,oBAAA,CAEA,eAAA,CAGF,mDCkzBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDhzBF,qBEwEQ,CFvER,aEHQ,CFIR,YAAA,CAIA,6EACE,YAAA",sourceRoot:""}]),i.locals={bodyShort01:"-esm-form-builder__pagination__bodyShort01___EqwXU",configurableLink:"-esm-form-builder__pagination__configurableLink___p0FSW",desktop:"-esm-form-builder__pagination__desktop___hgBiG",tablet:"-esm-form-builder__pagination__tablet___qRkW1",pagination:"-esm-form-builder__pagination__pagination___AT0no"};const l=i},20331:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,".-esm-form-builder__schema-editor__actionButtons___RskyC{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__schema-editor__actionButtons___RskyC button{margin-left:1rem}.-esm-form-builder__schema-editor__errorContainer___qqx2V{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);background-color:#ffd7d9;color:#a2191f;padding:1.5rem;margin:1rem 0}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3{display:flex;gap:.5rem}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3 .cds--actionable-notification{max-width:38rem}.-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3 .cds--actionable-notification__details{margin:0 0rem 0 .8125rem !important}.-esm-form-builder__schema-editor__pagination___E1aa6{display:flex;align-items:center;gap:.5rem;font-size:.875rem}.-esm-form-builder__schema-editor__pagination___E1aa6 .-esm-form-builder__schema-editor__paginationIcon___DKe3W{fill:#4589ff;cursor:pointer}.-esm-form-builder__schema-editor__pagination___E1aa6 .-esm-form-builder__schema-editor__disabledIcon___wE65f{fill:#a8a8a8;cursor:not-allowed}.-esm-form-builder__schema-editor__heading___wAlzp{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-bottom:1rem}","",{version:3,sources:["webpack://./src/components/schema-editor/schema-editor.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAGA,yDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,gEACE,gBAAA,CAIJ,0DCo1BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDl1BF,wBE6EO,CF5EP,aEiFO,CFhFP,cAAA,CACA,aAAA,CAGF,qEACE,YAAA,CACA,SAAA,CAEA,mGACE,eAAA,CAEF,4GACE,mCAAA,CAIJ,sDACE,YAAA,CACA,kBAAA,CACA,SAAA,CACA,iBAAA,CAEA,gHACE,YEzBM,CF0BN,cAAA,CAGF,8GACE,YEDM,CFEN,kBAAA,CAIJ,mDC+yBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD7yBF,kBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__schema-editor__actionButtons___RskyC",errorContainer:"-esm-form-builder__schema-editor__errorContainer___qqx2V",validationErrorsContainer:"-esm-form-builder__schema-editor__validationErrorsContainer___C3Dk3",pagination:"-esm-form-builder__schema-editor__pagination___E1aa6",paginationIcon:"-esm-form-builder__schema-editor__paginationIcon___DKe3W",disabledIcon:"-esm-form-builder__schema-editor__disabledIcon___wE65f",heading:"-esm-form-builder__schema-editor__heading___wAlzp"};const l=i},50132:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ir});var r=n(16072),a=n.n(r),o=n(84976),i=n(47767),l=n(53941),s=n(32802),c=n(63654),u=n(83270),d=n(92137),m=n(25987),A=n(57626);function _(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_(o,r,a,i,l,"next",e)}function l(e){_(o,r,a,i,l,"throw",e)}i(void 0)}))}}function p(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function b(e){return h.apply(this,arguments)}function h(){return(h=f((function(e){return p(this,(function(t){switch(t.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/clobdata/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function g(){return(g=f((function(e){return p(this,(function(t){switch(t.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function C(){return(C=f((function(e,t){return p(this,(function(n){switch(n.label){case 0:return[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e,"/resource/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=f((function(e){var t,n;return p(this,(function(r){switch(r.label){case 0:return t=new Blob([JSON.stringify(e)],{type:"application/json"}),(n=new FormData).append("file",t),[4,window.fetch("".concat(window.openmrsBase).concat(m.restBaseUrl,"/clobdata"),{body:n,method:"POST"}).then((function(e){return e.text()}))];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function E(e,t){return w.apply(this,arguments)}function w(){return(w=f((function(e,t){var n;return p(this,(function(r){switch(r.label){case 0:return n={name:"JSON schema",dataType:"AmpathJsonSchema",valueReference:t},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e,"/resource"),{method:"POST",headers:{"Content-Type":"application/json"},body:n})];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function k(e,t,n,r,a){return S.apply(this,arguments)}function S(){return(S=f((function(e,t,n,r,a){var o,i;return p(this,(function(l){switch(l.label){case 0:return o=new AbortController,i={name:t,version:n,description:r,encounterType:{uuid:a}},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:i,signal:o.signal})];case 1:return[2,l.sent()]}}))}))).apply(this,arguments)}function D(e,t,n,r,a){return x.apply(this,arguments)}function x(){return(x=f((function(e,t,n,r,a){var o,i,l;return p(this,(function(s){switch(s.label){case 0:return o=new AbortController,i={name:e,version:t,published:null!=n&&n,description:null!=r?r:""},a&&(i.encounterType=a),l={"Content-Type":"application/json"},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form"),{method:"POST",headers:l,body:i,signal:o.signal})];case 1:return[2,s.sent().data]}}))}))).apply(this,arguments)}function O(e){return B.apply(this,arguments)}function B(){return(B=f((function(e){var t;return p(this,(function(n){switch(n.label){case 0:return t={published:!0},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function T(e){return I.apply(this,arguments)}function I(){return(I=f((function(e){var t;return p(this,(function(n){switch(n.label){case 0:return t={published:!1},[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/form/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=n(87710),P=n.n(F),j=n(74583),N=n.n(j),M=n(16765),z=n.n(M),L=n(68206),U=n.n(L),R=n(73930),H=n.n(R),G=n(4079),Q=n.n(G),V=n(81521),Y={};Y.styleTagTransform=Q(),Y.setAttributes=U(),Y.insert=z().bind(null,"head"),Y.domAPI=N(),Y.insertStyleElement=H(),P()(V.A,Y);const W=V.A&&V.A.locals?V.A.locals:void 0;var J=function(e){var t=e.totalItems,n=e.pageSize,o=e.onPageNumberChange,i=e.pageNumber,c=function(e,t,n,a){var o=(0,l.useTranslation)().t,i=(0,r.useMemo)((function(){var n,r=Math.ceil(t/e);return isNaN(r)&&(r=0),(n=Array(r).keys(),function(e){if(Array.isArray(e))return q(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return(t+1)*e}))}),[e,t]),s=(0,r.useMemo)((function(){return e>t?"".concat(t," / ").concat(t):e*n>t?"".concat(e*(n-1)+a," / ").concat(t):"".concat(e*n," / ").concat(t)}),[e,t,n,a]);return{pageSizes:i,itemsDisplayed:"".concat(s," ").concat(o("items"," items"))}}(n,t,i,e.currentItems),u=c.itemsDisplayed,d=c.pageSizes,A="tablet"===(0,m.useLayoutType)();return a().createElement(a().Fragment,null,t>0&&a().createElement("div",{className:A?W.tablet:W.desktop},a().createElement("div",null,u),a().createElement(s.dKS,{className:W.pagination,page:i,pageSize:n,pageSizes:d,totalItems:t,onChange:o,size:A?"lg":"sm"})))},K=n(23627),$=function(e){var t,n,r,a=null==e||null===(n=e.resources)||void 0===n||null===(t=n.find((function(e){return"JSON schema"===e.name})))||void 0===t?void 0:t.valueReference,o=e&&(null==e||null===(r=e.resources)||void 0===r?void 0:r.length)>0&&a,i="".concat(m.restBaseUrl,"/clobdata/").concat(a),l=(0,K.A)(o?i:null,m.openmrsFetch),s=l.data,c=l.error,u=l.isLoading,d=l.isValidating,A=l.mutate;return{clobdata:null==s?void 0:s.data,clobdataError:c,isLoadingClobdata:u,isValidatingClobdata:d,mutate:A}},X=function(e){var t=e.width,n=void 0===t?"64":t,r=e.height,o=void 0===r?"64":r;return a().createElement("svg",{width:n,height:o,viewBox:"0 0 64 64"},a().createElement("title",null,"Empty data illustration"),a().createElement("g",{fill:"none",fillRule:"evenodd"},a().createElement("path",{d:"M38.133 13.186H21.947c-.768.001-1.39.623-1.39 1.391V50.55l-.186.057-3.97 1.216a.743.743 0 01-.927-.493L3.664 12.751a.742.742 0 01.492-.926l6.118-1.874 17.738-5.43 6.119-1.873a.741.741 0 01.926.492L38.076 13l.057.186z",fill:"#F4F4F4"}),a().createElement("path",{d:"M41.664 13L38.026 1.117A1.576 1.576 0 0036.056.07l-8.601 2.633-17.737 5.43-8.603 2.634a1.578 1.578 0 00-1.046 1.97l12.436 40.616a1.58 1.58 0 001.969 1.046l5.897-1.805.185-.057v-.194l-.185.057-5.952 1.822a1.393 1.393 0 01-1.737-.923L.247 12.682a1.39 1.39 0 01.923-1.738L9.772 8.31 27.51 2.881 36.112.247a1.393 1.393 0 011.737.923L41.47 13l.057.186h.193l-.057-.185z",fill:"#8D8D8D"}),a().createElement("path",{d:"M11.378 11.855a.836.836 0 01-.798-.59L9.385 7.361a.835.835 0 01.554-1.042l16.318-4.996a.836.836 0 011.042.554l1.195 3.902a.836.836 0 01-.554 1.043l-16.318 4.995a.831.831 0 01-.244.037z",fill:"#C6C6C6"}),a().createElement("circle",{fill:"#C6C6C6",cx:17.636,cy:2.314,r:1.855}),a().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:17.636,cy:2.314,r:1.175}),a().createElement("path",{d:"M55.893 53.995H24.544a.79.79 0 01-.788-.789V15.644a.79.79 0 01.788-.788h31.349a.79.79 0 01.788.788v37.562a.79.79 0 01-.788.789z",fill:"#F4F4F4"}),a().createElement("path",{d:"M41.47 13H21.948a1.579 1.579 0 00-1.576 1.577V52.4l.185-.057V14.577c.001-.768.623-1.39 1.391-1.39h19.581L41.471 13zm17.02 0H21.947a1.579 1.579 0 00-1.576 1.577v42.478c0 .87.706 1.576 1.576 1.577H58.49a1.579 1.579 0 001.576-1.577V14.577a1.579 1.579 0 00-1.576-1.576zm1.39 44.055c0 .768-.622 1.39-1.39 1.392H21.947c-.768-.001-1.39-.624-1.39-1.392V14.577c0-.768.622-1.39 1.39-1.39H58.49c.768 0 1.39.622 1.39 1.39v42.478z",fill:"#8D8D8D"}),a().createElement("path",{d:"M48.751 17.082H31.686a.836.836 0 01-.835-.835v-4.081c0-.46.374-.834.835-.835H48.75c.461 0 .834.374.835.835v4.08c0 .462-.374.835-.835.836z",fill:"#C6C6C6"}),a().createElement("circle",{fill:"#C6C6C6",cx:40.218,cy:9.755,r:1.855}),a().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:40.218,cy:9.755,r:1.13})))},Z=n(80199),ee={};ee.styleTagTransform=Q(),ee.setAttributes=U(),ee.insert=z().bind(null,"head"),ee.domAPI=N(),ee.insertStyleElement=H(),P()(Z.A,ee);const te=Z.A&&Z.A.locals?Z.A.locals:void 0,ne=function(){var e=(0,l.useTranslation)().t,t="tablet"===(0,m.useLayoutType)();return a().createElement(s.Wdr,null,a().createElement(s.FAs,{className:te.tile},a().createElement("div",{className:t?te.tabletHeading:te.desktopHeading},a().createElement("h4",null,e("forms","Forms"))),a().createElement(X,null),a().createElement("p",{className:te.content},e("noFormsToDisplay","There are no forms to display.")),a().createElement("p",{className:te.action},a().createElement(s.N_E,{onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},e("createNewForm","Create a new form")))))};var re=n(44831),ae={};ae.styleTagTransform=Q(),ae.setAttributes=U(),ae.insert=z().bind(null,"head"),ae.domAPI=N(),ae.insertStyleElement=H(),P()(re.A,ae);const oe=re.A&&re.A.locals?re.A.locals:void 0,ie=function(e){var t=e.error,n=(0,l.useTranslation)().t,r="tablet"===(0,m.useLayoutType)();return a().createElement(s.Wdr,null,a().createElement(s.FAs,{className:oe.tile},a().createElement("div",{className:r?oe.tabletHeading:oe.desktopHeading},a().createElement("h4",null,n("forms","Forms"))),a().createElement("p",{className:oe.errorMessage},n("error","Error"),": ",null==t?void 0:t.message),a().createElement("p",{className:oe.errorCopy},n("errorCopy","Sorry, there was a problem displaying this information. You can try to reload this page, or contact the site administrator and quote the error code above."))))};var le=n(31362),se=n(79610);const ce=function(){return a().createElement("svg",{height:"64",width:"64",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2"},a().createElement("path",{d:"M27 31.36H8a.36.36 0 0 1-.36-.36v-1.64H6a.36.36 0 0 1-.36-.36v-1.64H5a.36.36 0 0 1-.36-.36V3A.36.36 0 0 1 5 2.64h4.64V2a.36.36 0 0 1 .36-.36h1.64V1A.36.36 0 0 1 12 .64h4a.36.36 0 0 1 .36.36v.64H18a.36.36 0 0 1 .36.36v.64H23a.36.36 0 0 1 .36.36v1.64H25a.36.36 0 0 1 .36.36v1.64H27a.36.36 0 0 1 .36.36v24a.36.36 0 0 1-.36.36Z",fill:"#d2e5e5"}),a().createElement("path",{d:"M8.36 30.64h18.28V7.36h-1.28V29a.36.36 0 0 1-.36.36H8.36v1.28Z",fill:"#8abab8"}),a().createElement("path",{d:"M5.36 26.64h17.28V3.36h-4.28V4a.36.36 0 0 1-.36.36h-8A.36.36 0 0 1 9.64 4v-.64H5.36v23.28Z",fill:"#8abab8"}),a().createElement("path",{fill:"#fff",d:"M7.5 12.64h13v.72h-13zM7.5 8.64h13v.72h-13zM7.5 20.64h13v.72h-13zM7.5 16.64h13v.72h-13z"}),a().createElement("path",{d:"M10.36 3.64h7.28V2.36H16a.36.36 0 0 1-.36-.36v-.64h-3.28V2a.36.36 0 0 1-.36.36h-1.64v1.28ZM6.36 28.64h18.28V5.36h-1.28V27a.36.36 0 0 1-.36.36H6.36v1.28Z",fill:"#8abab8"}))};var ue=n(19707),de={};de.styleTagTransform=Q(),de.setAttributes=U(),de.insert=z().bind(null,"head"),de.domAPI=N(),de.insertStyleElement=H(),P()(ue.A,de);const me=ue.A&&ue.A.locals?ue.A.locals:void 0,Ae=function(e){var t,n,r,o=e.title,i=(0,l.useTranslation)().t,s=(0,m.useSession)(),c=null==s||null===(t=s.sessionLocation)||void 0===t?void 0:t.display;return a().createElement("div",{className:me.header},a().createElement("div",{className:me["left-justified-items"]},a().createElement(ce,null),a().createElement("div",{className:me["page-labels"]},a().createElement("p",null,i("formBuilder","Form builder")),a().createElement("p",{className:me["page-name"]},o))),a().createElement("div",{className:me["right-justified-items"]},a().createElement("div",{className:me.userContainer},a().createElement("p",null,null==s||null===(r=s.user)||void 0===r||null===(n=r.person)||void 0===n?void 0:n.display),a().createElement(u.rs,{size:16,className:me.userIcon})),a().createElement("div",{className:me["date-and-location"]},a().createElement(le.aZ,{size:16}),a().createElement("span",{className:me.value},c),a().createElement("span",{className:me.middot},"·"),a().createElement(se.Vv,{size:16}),a().createElement("span",{className:me.value},(0,m.formatDate)(new Date,{mode:"standard"})))))};var _e=n(18691),fe={};fe.styleTagTransform=Q(),fe.setAttributes=U(),fe.insert=z().bind(null,"head"),fe.domAPI=N(),fe.insertStyleElement=H(),P()(_e.A,fe);const pe=_e.A&&_e.A.locals?_e.A.locals:void 0;function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}function ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e){var t=e.condition,n=(0,l.useTranslation)().t;return t?a().createElement(s.vwO,{type:"green",size:"md",title:"Clear Filter","data-testid":"yes-tag"},n("yes","Yes")):a().createElement(s.vwO,{type:"red",size:"md",title:"Clear Filter","data-testid":"no-tag"},n("no","No"))}function we(e){var t=e.form,n=e.mutate,o=e.responsiveSize,i=e.t,l=$(t).clobdata,d=null==t?void 0:t.resources,A=ve((0,r.useState)(!1),2),_=A[0],f=A[1],p=ve((0,r.useState)(!1),2),b=p[0],h=p[1],C=(0,r.useMemo)((function(){return new Blob([JSON.stringify(l,null,2)],{type:"application/json"})}),[l]),y=(0,r.useCallback)((function(e){var r,a;(function(e){return g.apply(this,arguments)})(e).then((r=function(e){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(r){switch(r.label){case 0:return 204!==e.status?[3,2]:((0,m.showSnackbar)({title:i("formDeleted","Form deleted"),kind:"success",isLowContrast:!0,subtitle:"".concat(t.name," ")+i("formDeletedSuccessfully","deleted successfully")}),[4,n()]);case 1:r.sent(),f(!1),r.label=2;case 2:return[2]}}))},a=function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function i(e){he(o,n,a,i,l,"next",e)}function l(e){he(o,n,a,i,l,"throw",e)}i(void 0)}))},function(e){return a.apply(this,arguments)})).catch((function(e){return(0,m.showSnackbar)({title:i("errorDeletingForm","Error deleting form"),kind:"error",subtitle:null==e?void 0:e.message})})).finally((function(){return h(!1)}))}),[t.name,n,i]),v=function(){return a().createElement(s.$nd,{renderIcon:c.t0,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("import","Import"),hasIconOnly:!0,size:o})},E=function(){return a().createElement(s.$nd,{enterDelayMs:300,renderIcon:c.ff,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("editSchema","Edit schema"),hasIconOnly:!0,size:o,tooltipAlignment:"center"})},w=function(){return a().createElement("a",{download:"".concat(null==t?void 0:t.name,".json"),href:window.URL.createObjectURL(C)},a().createElement(s.$nd,{enterDelayMs:300,renderIcon:c.f5,kind:"ghost",iconDescription:i("downloadSchema","Download schema"),hasIconOnly:!0,size:o,tooltipAlignment:"center"}))},k=function(){return a().createElement(s.$nd,{enterDelayMs:300,renderIcon:u.zH,onClick:function(){return f(!0)},kind:"ghost",iconDescription:i("deleteSchema","Delete schema"),hasIconOnly:!0,size:o,tooltipAlignment:"center"})},S=function(){return a().createElement(s.KXP,{danger:!0,open:_,onClose:function(){return f(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:i("deleteForm","Delete form")}),a().createElement(s.lVW,{onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,null,a().createElement("p",null,i("deleteFormConfirmation","Are you sure you want to delete this form?")))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return f(!1)}},i("cancel","Cancel")),a().createElement(s.$nd,{disabled:b,kind:"danger",onClick:function(){h(!0),y(t.uuid)}},b?a().createElement(s.OuH,{className:pe.spinner,description:i("deleting","Deleting")+"..."}):a().createElement("span",null,i("delete","Delete")))))};return a().createElement(a().Fragment,null,0!=d.length&&(null==t?void 0:t.resources[0])?a().createElement(a().Fragment,null,a().createElement(E,null),a().createElement(w,null)):a().createElement(v,null),a().createElement(k,null),_&&a().createElement(S,null))}function ke(e){var t=e.forms,n=e.isValidating,o=e.mutate,i=e.t,l=(0,m.useConfig)(),c="tablet"===(0,m.useLayoutType)(),u=c?"lg":"sm",_=ve((0,r.useState)(""),2),f=_[0],p=_[1],b=ve((0,r.useState)(""),2),h=b[0],g=b[1],C=(0,r.useMemo)((function(){return f?"Published"===f?t.filter((function(e){return e.published})):"Unpublished"===f?t.filter((function(e){return!e.published})):"Retired"===f?t.filter((function(e){return e.retired})):t:t}),[f,t]),y=[{header:i("name","Name"),key:"name"},{header:i("version","Version"),key:"version"},{header:i("published","Published"),key:"published"},{header:i("retired","Retired"),key:"retired"},{header:i("schemaActions","Schema actions"),key:"actions"}],v=(0,r.useMemo)((function(){return h&&""!==h.trim()?C.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})):C}),[h,C]),E=(0,m.usePagination)(v,10),w=E.paginated,k=E.goTo,S=E.results,D=E.currentPage,x=null==S?void 0:S.map((function(e){return ye(Ce({},e),{id:null==e?void 0:e.uuid,name:a().createElement(m.ConfigurableLink,{className:pe.link,to:"${openmrsSpaBase}/form-builder/edit/${formUuid}",templateParams:{formUuid:null==e?void 0:e.uuid},onMouseEnter:function(){(0,A.uv)("".concat(m.restBaseUrl,"/form/").concat(null==e?void 0:e.uuid,"?v=full"),m.openmrsFetch)}},e.name),published:a().createElement(Ee,{condition:e.published}),retired:a().createElement(Ee,{condition:e.retired}),actions:a().createElement(we,{form:e,mutate:o,responsiveSize:u,t:i})})})),O=(0,r.useCallback)((function(e){k(1),g(e.target.value)}),[k,g]);return a().createElement(a().Fragment,null,l.showSchemaSaveWarning&&a().createElement(s.jeF,{className:pe.warningMessage,kind:"info",lowContrast:!0,title:i("schemaSaveWarningMessage","The dev3 server is ephemeral at best and can't be relied upon to save your schemas permanently. To avoid losing your work, please save your schemas to your local machine. Alternatively, upload your schema to the distro repo to have it persisted across server resets.")}),a().createElement("div",{className:pe.flexContainer},a().createElement("div",{className:pe.filterContainer},a().createElement(s.msM,{className:pe.filterDropdown,id:"publishStatusFilter",initialSelectedItem:"All",label:"",titleText:i("filterBy","Filter by")+":",size:u,type:"inline",items:["All","Published","Unpublished","Retired"],onChange:function(e){var t=e.selectedItem;return p(t)}})),a().createElement("div",{className:pe.backgroundDataFetchingIndicator},a().createElement("span",null,n?a().createElement(s.OuH,null):null))),a().createElement(s.bQt,{rows:x,headers:y,size:c?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,r=e.getTableProps,o=e.getHeaderProps,l=e.getRowProps;return a().createElement(a().Fragment,null,a().createElement(s.K3K,{className:pe.tableContainer,"data-testid":"forms-table"},a().createElement("div",{className:pe.toolbarWrapper},a().createElement(s.e1U,{className:pe.tableToolbar,size:u},a().createElement(s.VbH,{className:pe.headerContainer},a().createElement(s.w6V,{expanded:!0,className:pe.searchbox,onChange:O,placeholder:i("searchThisList","Search this list")}),a().createElement(s.$nd,{kind:"primary",iconDescription:i("createNewForm","Create a new form"),renderIcon:function(){return a().createElement(d.OM,{size:16})},size:u,onClick:function(){return(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},i("createNewForm","Create a new form"))))),a().createElement(s.XIK,ye(Ce({},r()),{className:pe.table}),a().createElement(s.ndF,null,a().createElement(s.Hjg,null,n.map((function(e){return a().createElement(s.A0N,o({header:e}),e.header)})))),a().createElement(s.BFY,null,t.map((function(e){return a().createElement(s.Hjg,ye(Ce({key:"row.id"},l({row:e})),{"data-testid":"form-row-".concat(e.id)}),e.cells.map((function(e){return a().createElement(s.nA6,{key:e.id},e.value)})))}))))),0===t.length?a().createElement("div",{className:pe.tileContainer},a().createElement(s.FAs,{className:pe.tile},a().createElement("div",{className:pe.tileContent},a().createElement("p",{className:pe.content},i("noMatchingFormsToDisplay","No matching forms to display")),a().createElement("p",{className:pe.helper},i("checkFilters","Check the filters above"))))):null)})),w&&a().createElement(J,{currentItems:S.length,totalItems:v.length,onPageNumberChange:function(e){var t=e.page;k(t)},pageNumber:D,pageSize:10}))}const Se=function(){var e=(0,l.useTranslation)().t,t=function(){var e,t,n="".concat(m.restBaseUrl,"/form?v=custom:(uuid,name,encounterType:(uuid,name),version,published,retired,resources:(uuid,name,dataType,valueReference))"),r=(0,A.Ay)(n,m.openmrsFetch),a=r.data,o=r.error,i=r.isValidating,l=r.mutate;return{forms:null!==(t=null==a||null===(e=a.data)||void 0===e?void 0:e.results)&&void 0!==t?t:[],error:o,isLoading:!a&&!o||!1,isValidating:i,mutate:l}}(),n=t.forms,r=t.error,o=t.isLoading,i=t.isValidating,c=t.mutate;return a().createElement("main",null,a().createElement(Ae,{title:e("home","Home")}),a().createElement("div",{className:pe.container},r?a().createElement(ie,{error:r}):o?a().createElement(s.OOb,{role:"progressbar"}):0===n.length?a().createElement(ne,null):a().createElement(ke,{forms:n,isValidating:i,mutate:c,t:e})))};var De=n(46942),xe=n.n(De),Oe=n(97136),Be=function(e){var t="".concat(m.restBaseUrl,"/form/").concat(e,"?v=full"),n=(0,K.A)(e?t:null,m.openmrsFetch),r=n.data,a=n.error,o=n.isLoading,i=n.isValidating,l=n.mutate;return{form:null==r?void 0:r.data,formError:a,isLoadingForm:o,isValidatingForm:i,mutate:l}};function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ie(o,r,a,i,l,"next",e)}function l(e){Ie(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Fe(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Pe,je=(Pe=qe((function(e,t){var n,r,a,o,i;return Fe(this,(function(l){switch(l.label){case 0:return n=[],r=[],e?(o="string"==typeof e?JSON.parse(e):e,i=[],null===(a=o.pages)||void 0===a||a.forEach((function(e){var a;return null===(a=e.sections)||void 0===a?void 0:a.forEach((function(e){var a;return null===(a=e.questions)||void 0===a?void 0:a.forEach((function(e){var a;i.push(Ne(e,n,t,r),ze(e,n)),"obsGroup"===e.type&&(null==e||null===(a=e.questions)||void 0===a||a.forEach((function(a){return i.push(Ne(a,n,t,r),ze(e,n))})))}))}))})),[4,Promise.all(i)]):[3,2];case 1:return l.sent(),[2,[n,r]];case 2:return[2,[n,r]]}}))})),function(e,t){return Pe.apply(this,arguments)}),Ne=function(){var e=qe((function(e,t,n,r){var a,o,i,l,s,c,u,d;return Fe(this,(function(A){switch(A.label){case 0:if(i="custom:(uuid,display,datatype,answers,conceptMappings:(conceptReferenceTerm:(conceptSource:(name),code)))",!(l=e.questionOptions.concept?e.questionOptions.concept:(null===(a=e.questionOptions.conceptMappings)||void 0===a?void 0:a.length)?null===(o=e.questionOptions.conceptMappings)||void 0===o?void 0:o.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(","):""))return[3,5];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/concept?references=").concat(l,"&v=").concat(i))];case 2:return(s=A.sent().data).results.length?(_=s.results,f=1,c=function(e){if(Array.isArray(e))return e}(_)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(_,f)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(_,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),"Boolean"===(u=c[0]).datatype.name&&e.questionOptions.answers.forEach((function(n){"cf82933b-3f3f-45e7-a5ab-5d31aaee3da3"!==n.concept&&"488b58ff-64f5-4f8a-8979-fa79940b1594"!==n.concept&&t.push({errorMessage:'❌ concept "'.concat(e.questionOptions.concept,'" of type "boolean" has a non-boolean answer "').concat(n.label,'"'),field:e})})),"Coded"===u.datatype.name&&e.questionOptions.answers.forEach((function(t){u.answers.some((function(e){return e.uuid===t.concept}))||r.push({warningMessage:'⚠️ answer: "'.concat(t.label,'" - "').concat(t.concept,'" does not exist in the response answers but exists in the form'),field:e})})),Me(e,u,t,n)):t.push({errorMessage:'❓ Concept "'.concat(e.questionOptions.concept,'" not found'),field:e}),[3,4];case 3:return d=A.sent(),console.error(d),[3,4];case 4:return[3,6];case 5:t.push({errorMessage:"❓ No UUID",field:e}),A.label=6;case 6:return[2]}var _,f}))}));return function(t,n,r,a){return e.apply(this,arguments)}}(),Me=function(e,t,n,r){Object.prototype.hasOwnProperty.call(r,t.datatype.name)&&!r[t.datatype.name].includes(e.questionOptions.rendering)&&n.push({errorMessage:"❓ ".concat(e.questionOptions.concept,': datatype "').concat(t.datatype.name,'" doesn\'t match control type "').concat(e.questionOptions.rendering,'"'),field:e}),!Object.prototype.hasOwnProperty.call(r,t.datatype.name)&&n.push({errorMessage:'❓ Untracked datatype "'.concat(t.datatype.name,'"'),field:e})},ze=function(){var e=qe((function(e,t){var n,r,a,o,i,l,s,c,u,d,A,_;return Fe(this,(function(f){switch(f.label){case 0:if(n=e.questionOptions.answers,r="custom:(uuid,display,datatype,conceptMappings:(conceptReferenceTerm:(conceptSource:(name),code)))",!(null==n?void 0:n.length))return[3,10];a=!0,o=!1,i=void 0,f.label=1;case 1:f.trys.push([1,8,9,10]),l=n[Symbol.iterator](),f.label=2;case 2:if(a=(s=l.next()).done)return[3,7];c=s.value,d=c.concept?c.concept:(null===(u=c.conceptMappings)||void 0===u?void 0:u.length)?c.conceptMappings.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(","):"",f.label=3;case 3:return f.trys.push([3,5,,6]),[4,(0,m.openmrsFetch)("".concat(m.restBaseUrl,"/concept?references=").concat(d,"&v=").concat(r))];case 4:return f.sent().data.results.length||t.push({errorMessage:'❌ concept "'.concat(c.concept,'" not found'),field:c}),[3,6];case 5:return A=f.sent(),console.error("Error fetching concept:",A),[3,6];case 6:return a=!0,[3,2];case 7:return[3,10];case 8:return _=f.sent(),o=!0,i=_,[3,10];case 9:try{a||null==l.return||l.return()}finally{if(o)throw i}return[7];case 10:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Le=function(e){var t=e.hasValidationErrors,n=e.publishedWithErrors,r=e.errorsCount,o=(0,l.useTranslation)().t;return n?a().createElement(s.jeF,{kind:"error",title:o("publishingFailed","Publishing failed"),lowContrast:!0,subtitle:o("publishWarning","Cannot publish form with validation errors")}):t?a().createElement(s.jeF,{kind:"error",title:o("validationErrors","Validation found {{count}} errors",{count:r}),lowContrast:!0,subtitle:o("viewErrors","View the errors in the interactive builder")}):a().createElement(s.jeF,{kind:"success",title:o("ValidationSuccessful","Validation Successful"),lowContrast:!0,subtitle:o("noValidationErrorsFound","No validation errors found")})},Ue=n(31475),Re={};Re.styleTagTransform=Q(),Re.setAttributes=U(),Re.insert=z().bind(null,"head"),Re.domAPI=N(),Re.insertStyleElement=H(),P()(Ue.A,Re);const He=Ue.A&&Ue.A.locals?Ue.A.locals:void 0;function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qe(o,r,a,i,l,"next",e)}function l(e){Qe(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ye(e,t,n[t])}))}return e}function Ke(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}const Ze=function(e){var t,n,o,c,u,d,A,_=e.form,f=e.schema,p=(0,l.useTranslation)().t,h=(o="".concat(m.restBaseUrl,"/encountertype?v=custom:(uuid,name)"),c=(0,K.A)(o,m.openmrsFetch),u=c.data,d=c.error,A=c.isLoading,{encounterTypes:null!==(n=null==u||null===(t=u.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],encounterTypesError:d,isEncounterTypesLoading:A}).encounterTypes,g=(0,i.g)().formUuid,v=Be(g).mutate,w=!g,S=$e((0,r.useState)(""),2),x=S[0],O=S[1],B=$e((0,r.useState)(""),2),T=B[0],I=B[1],q=$e((0,r.useState)(!1),2),F=q[0],P=q[1],j=$e((0,r.useState)(!1),2),N=j[0],M=j[1],z=$e((0,r.useState)(""),2),L=z[0],U=z[1],R=$e((0,r.useState)(!1),2),H=R[0],G=R[1],Q=$e((0,r.useState)(!1),2),V=Q[0],Y=Q[1],W=$e((0,r.useState)(""),2),J=W[0],$=W[1],X=$e((0,r.useState)(""),2),Z=X[0],ee=X[1],te=(0,r.useCallback)((function(){return localStorage.removeItem("formSchema")}),[]);(0,r.useEffect)((function(){f&&(U(f.name),O(f.description),I(f.encounterType),ee(f.version))}),[f]);var ne=(0,r.useCallback)((function(e){"newVersion"===e?($("newVersion"),G(!1),Y(!0)):"new"===e?($("newVersion"),Y(!0)):"update"===e&&($("update"),G(!1),Y(!0))}),[]),re=function(){var e=Ve((function(e){var t,n,r,a,o,i,l,s,c,u,d,A,h,g,w;return Xe(this,(function(S){switch(S.label){case 0:if(e.preventDefault(),M(!0),t=e.target,"new"!==J&&"newVersion"!==J)return[3,8];n=t.name.value,r=t.version.value,a=t.encounterType.value,o=t.description.value,S.label=1;case 1:return S.trys.push([1,6,,7]),[4,D(n,r,!1,o,a)];case 2:return i=S.sent(),[4,y(Ke(Je({},f),{name:n,version:r,description:o,encounterType:a,uuid:i.uuid}))];case 3:return l=S.sent(),[4,E(i.uuid,l.toString())];case 4:return S.sent(),(0,m.showSnackbar)({title:p("formCreated","New form created"),kind:"success",isLowContrast:!0,subtitle:n+" "+p("saveSuccessMessage","was created successfully. It is now visible on the Forms dashboard.")}),te(),Y(!1),[4,v()];case 5:return S.sent(),(0,m.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(i.uuid)}),M(!1),[3,7];case 6:return We(s=S.sent(),Error)&&(0,m.showSnackbar)({title:p("errorCreatingForm","Error creating form"),kind:"error",subtitle:null==s?void 0:s.message}),M(!1),[3,7];case 7:return[3,13];case 8:return S.trys.push([8,12,,13]),u=Ke(Je({},f),{name:L,version:Z,description:x,encounterType:T}),[4,k(_.uuid,L,Z,x,T)];case 9:return S.sent(),0===(null==_||null===(c=_.resources)||void 0===c?void 0:c.length)?[3,11]:(g=null!==(h=null==_||null===(A=_.resources)||void 0===A||null===(d=A.find((function(e){return"JSON schema"===e.name})))||void 0===d?void 0:d.valueReference)&&void 0!==h?h:"",[4,b(g).catch((function(e){return console.error("Unable to delete clobdata: ",e)})).then((function(){var e,t,n,r=null!==(n=null==_||null===(t=_.resources)||void 0===t||null===(e=t.find((function(e){return"JSON schema"===e.name})))||void 0===e?void 0:e.uuid)&&void 0!==n?n:"";(function(e,t){return C.apply(this,arguments)})(null==_?void 0:_.uuid,r).then((function(){y(u).then((function(e){E(null==_?void 0:_.uuid,e.toString()).then(Ve((function(){return Xe(this,(function(e){switch(e.label){case 0:return(0,m.showSnackbar)({title:p("success","Success!"),kind:"success",isLowContrast:!0,subtitle:(null==_?void 0:_.name)+" "+p("saveSuccess","was updated successfully")}),Y(!1),[4,v()];case 1:return e.sent(),M(!1),[2]}}))}))).catch((function(e){console.error("Error associating form with new schema: ",e),(0,m.showSnackbar)({title:p("errorSavingForm","Unable to save form"),kind:"error",subtitle:p("saveError","There was a problem saving your form. Try saving again. To ensure you don’t lose your changes, copy them, reload the page and then paste them back into the editor.")})}))})).catch((function(e){return console.error("Error uploading new schema: ",e)}))})).catch((function(e){return console.error("Unable to create new clobdata resource: ",e)}))}))]);case 10:S.sent(),S.label=11;case 11:return[3,13];case 12:return We(w=S.sent(),Error)&&(0,m.showSnackbar)({title:p("errorUpdatingForm","Error updating form"),kind:"error",subtitle:null==w?void 0:w.message}),M(!1),[3,13];case 13:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return a().createElement(a().Fragment,null,w?null:a().createElement(s.KXP,{open:H,onClose:function(){return G(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:p("saveConfirmation","Save or Update form")}),a().createElement(s.cwr,null,a().createElement("p",null,p("saveAsModal","A version of the form you're working on already exists on the server. Do you want to update the form or to save it as a new version?"))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"tertiary",onClick:function(){return ne("update")}},p("updateExistingForm","Update existing version")),a().createElement(s.$nd,{kind:"primary",onClick:function(){return ne("newVersion")}},p("saveAsNewForm","Save as a new")),a().createElement(s.$nd,{kind:"secondary",onClick:function(){return G(!1)}},p("close","Close")))),a().createElement(s.KXP,{open:V,onClose:function(){return Y(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:p("saveFormToServer","Save form to server")}),a().createElement(s.lVW,{onSubmit:re,className:He.saveFormBody},a().createElement(s.cwr,null,a().createElement("p",null,p("saveExplainerText","Clicking the Save button saves your form schema to the database. To see your form in your frontend, you first need to publish it. Click the Publish button to publish your form.")),a().createElement(s.gE_,{legendText:""},a().createElement(s.BJc,{gap:5},a().createElement(s.ksK,{id:"name",labelText:p("formName","Form Name"),onChange:function(e){return U(e.target.value)},placeholder:p("formNamePlaceholder","e.g. OHRI Express Care Patient Encounter Form"),required:!0,value:L}),"update"===J?a().createElement(s.ksK,{id:"uuid",labelText:p("autogeneratedUuid","UUID (auto-generated"),disabled:!0,value:null==_?void 0:_.uuid}):null,a().createElement(s.ksK,{id:"version",labelText:p("version","Version"),placeholder:"e.g. 1.0",onChange:function(e){!function(e){if(!e)return P(!1);P(!/^[0-9]/.test(e))}(e.target.value),F||ee(e.target.value)},invalid:F,invalidText:p("invalidVersionWarning","Version can only start with with a number"),required:!0,value:Z}),a().createElement(s.l6P,{id:"encounterType",labelText:p("encounterType","Encounter Type"),onChange:function(e){return I(e.target.value)},required:!0,value:T},T?null:a().createElement(s.ebT,{text:p("chooseEncounterType","Choose an encounter type to link your form to"),value:""}),(null==h?void 0:h.length)>0&&h.map((function(e){return a().createElement(s.ebT,{key:e.uuid,value:e.uuid,text:e.name},e.name)}))),a().createElement(s.fs1,{labelText:p("description","Description"),onChange:function(e){return O(e.target.value)},id:"description",placeholder:p("descriptionPlaceholderText","e.g. A form used to collect encounter data for clients in the Express Care program."),required:!0,value:x})))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return Y(!1)}},p("close","Close")),a().createElement(s.$nd,{disabled:N||F,className:He.spinner,type:"submit",kind:"primary"},N?a().createElement(s.OuH,{description:p("saving","Saving")+"..."}):a().createElement("span",null,p("save","Save")))))),a().createElement(s.$nd,{disabled:!f,kind:"primary",onClick:function(){return w?ne("new"):G(!0)}},p("saveForm","Save form")))};var et=n(67033),tt={};tt.styleTagTransform=Q(),tt.setAttributes=U(),tt.insert=z().bind(null,"head"),tt.domAPI=N(),tt.insertStyleElement=H(),P()(et.A,tt);const nt=et.A&&et.A.locals?et.A.locals:void 0;function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){at(o,r,a,i,l,"next",e)}function l(e){at(o,r,a,i,l,"throw",e)}i(void 0)}))}}function it(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}const ct=function(e){var t=e.schema,n=e.t,o=e.isValidating,l=e.setPublishedWithErrors,c=e.onFormValidation,u=e.setValidationComplete,d=e.setValidationResponse,A=e.schemaErrors,_=(0,i.g)().formUuid,f=Be(_),p=f.form,b=f.mutate,h=lt((0,r.useState)("idle"),2),g=h[0],C=h[1],y=lt((0,r.useState)(!1),2),v=y[0],E=y[1],w=(0,m.useConfig)(),k=w.dataTypeToRenderingMap,S=w.enableFormValidation;function D(){return x.apply(this,arguments)}function x(){return(x=ot((function(){var e;return st(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),C("publishing"),[4,O(p.uuid)];case 1:return t.sent(),(0,m.showSnackbar)({title:n("formPublished","Form published"),kind:"success",isLowContrast:!0,subtitle:"".concat(p.name," ")+n("formPublishedSuccessfully","form was published successfully")}),C("published"),[4,b()];case 2:return t.sent(),[3,4];case 3:return it(e=t.sent(),Error)&&((0,m.showSnackbar)({title:n("errorPublishingForm","Error publishing form"),kind:"error",subtitle:null==e?void 0:e.message}),C("error")),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}function B(){return B=ot((function(){var e,n;return st(this,(function(r){switch(r.label){case 0:return C("validateBeforePublishing"),[4,je(t,k)];case 1:return e=lt.apply(void 0,[r.sent(),1]),n=e[0],d(n),n.length?(C("validated"),u(!0),l(!0),[2]):[4,D()];case 2:return r.sent(),[2]}}))})),B.apply(this,arguments)}function I(){return(I=ot((function(){var e;return st(this,(function(t){switch(t.label){case 0:C("unpublishing"),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,T(p.uuid)];case 2:return t.sent(),(0,m.showSnackbar)({title:n("formUnpublished","Form unpublished"),kind:"success",isLowContrast:!0,subtitle:"".concat(p.name," ")+n("formUnpublishedSuccessfully","form was unpublished successfully")}),C("unpublished"),[4,b()];case 3:return t.sent(),[3,5];case 4:return it(e=t.sent(),Error)&&((0,m.showSnackbar)({title:n("errorUnpublishingForm","Error unpublishing form"),kind:"error",subtitle:null==e?void 0:e.message}),C("error")),[3,5];case 5:return E(!1),[2]}}))}))).apply(this,arguments)}return a().createElement("div",{className:nt.actionButtons},a().createElement(Ze,{form:p,schema:t}),a().createElement(a().Fragment,null,p&&S&&a().createElement(s.$nd,{kind:"tertiary",onClick:c,disabled:o},o?a().createElement(s.OuH,{className:nt.spinner,description:n("validating","Validating")+"..."}):a().createElement("span",null,n("validateForm","Validate form"))),p&&!p.published?S?a().createElement(s.$nd,{kind:"secondary",onClick:function(){return B.apply(this,arguments)},disabled:"validateBeforePublishing"===g||A.length>0},"validateBeforePublishing"===g?a().createElement(s.OuH,{className:nt.spinner,description:n("validating","Validating")+"..."}):a().createElement("span",null,n("validateAndPublishForm","Validate and publish form"))):a().createElement(s.$nd,{kind:"secondary",onClick:D,disabled:"publishing"===g||A.length>0},"publishing"!==g||(null==p?void 0:p.published)?a().createElement("span",null,n("publishForm","Publish form")):a().createElement(s.OuH,{className:nt.spinner,description:n("publishing","Publishing")+"..."})):null,p&&p.published?a().createElement(s.$nd,{kind:"danger",onClick:function(){E(!0)},disabled:"unpublishing"===g},n("unpublishForm","Unpublish form")):null,!!v&&a().createElement(s.KXP,{open:!0,onClose:function(){return E(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:n("unpublishConfirmation","Are you sure you want to unpublish this form?")}),a().createElement(s.cwr,null,a().createElement("p",null,n("unpublishExplainerText","Unpublishing a form means you can no longer access it from your frontend. Unpublishing forms does not delete their associated schemas, it only affects whether or not you can access them in your frontend."))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return E(!1)}},n("cancel","Cancel")),a().createElement(s.$nd,{disabled:"unpublishing"===g,kind:"unpublishing"===g?"secondary":"danger",onClick:function(){return I.apply(this,arguments)}},"unpublishing"===g?a().createElement(s.OuH,{className:nt.spinner,description:n("unpublishing","Unpublishing")+"..."}):a().createElement("span",null,n("confirm","Confirm")))))))},ut=function(e){var t,n,r,o,i,c,u,d=e.form,A=(0,l.useTranslation)().t;return a().createElement(s.r9c,{isCondensed:!0,selection:!1},a().createElement(s.GRJ,null,a().createElement(s.Cvq,null,a().createElement(s.Um2,null,a().createElement("b",null,A("formName","Form Name"))),a().createElement(s.Um2,null,d.name)),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("description","Description")),a().createElement(s.Um2,null,d.description)),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("formUuid","Form UUID")),a().createElement(s.Um2,null,d.uuid)),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("version","Version")),a().createElement(s.Um2,null,d.version)),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("encounterType","Encounter Type")),a().createElement(s.Um2,null,d.encounterType.uuid)),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("createdBy","Created By")),a().createElement(s.Um2,null,"".concat(null!==(u=null==d||null===(n=d.auditInfo)||void 0===n||null===(t=n.creator)||void 0===t?void 0:t.display)&&void 0!==u?u:A("unknownUser","Unknown")," on ").concat((0,m.formatDatetime)((0,m.parseDate)(null==d||null===(r=d.auditInfo)||void 0===r?void 0:r.dateCreated))))),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("lastEditedBy","Last Edited By")),a().createElement(s.Um2,null,(null==d||null===(o=d.auditInfo)||void 0===o?void 0:o.dateChanged)?"".concat(null==d||null===(i=d.auditInfo)||void 0===i?void 0:i.changedBy.display," on ").concat((0,m.formatDatetime)((0,m.parseDate)(null==d||null===(c=d.auditInfo)||void 0===c?void 0:c.dateChanged))):A("uneditedFormMsg","This form has never been edited"))),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("published","Published")),a().createElement(s.Um2,null,d.published?A("yes","Yes"):A("no","No"))),a().createElement(s.Cvq,null,a().createElement(s.Um2,null,A("retired","Retired")),a().createElement(s.Um2,null,d.retired?A("yes","Yes"):A("no","No")))))};var dt=n(47665),mt=n(17246),At=n(947),_t={};_t.styleTagTransform=Q(),_t.setAttributes=U(),_t.insert=z().bind(null,"head"),_t.domAPI=N(),_t.insertStyleElement=H(),P()(At.A,_t);const ft=At.A&&At.A.locals?At.A.locals:void 0;function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e){var t=e.error,n=e.resetErrorBoundary,r=(0,l.useTranslation)().t;return a().createElement(s.FAs,{className:ft.errorStateTile},a().createElement("h4",{className:ft.heading},r("problemLoadingPreview","There was a problem loading the form preview")),a().createElement("p",{className:ft.helperText},a().createElement("pre",null,t.message)),a().createElement(s.$nd,{kind:"primary",onClick:n},r("tryAgain","Try again")))}const ht=function(e){var t,n,o=e.isLoading,i=e.schema,c=(0,l.useTranslation)().t,u=(t=(0,r.useState)({encounterType:"",name:"Test Form",pages:[{label:"Test Page",sections:[{label:"Test Section",isExpanded:"true",questions:[{label:"Test Question",type:"obs",questionOptions:{rendering:"text",concept:"xxxx"},id:"testQuestion"}]}]}],processor:"EncounterFormProcessor",referencedForms:[],uuid:"xxx"}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],m=u[1];return(0,r.useEffect)((function(){i&&m(i)}),[i]),o?a().createElement("div",{className:ft.loadingContainer},a().createElement(s.OuH,{className:ft.loader,description:c("loading","Loading")+"..."})):a().createElement("div",{className:ft.container},!i&&a().createElement(s.FAs,{className:ft.emptyStateTile},a().createElement("h4",{className:ft.heading},c("noSchemaLoaded","No schema loaded")),a().createElement("p",{className:ft.helperText},c("formRendererHelperText","Load a form schema in the Schema Editor to the left to see it rendered here by the Form Engine."))),i===d&&a().createElement(dt.tH,{FallbackComponent:bt},a().createElement(mt.Tn,{formJson:d,mode:"enter",patientUUID:""})))};var gt=n(82790),Ct=n(84370);function yt(e){var t,n,r="".concat(m.restBaseUrl,"/concept?q=").concat(e,"&v=full"),a=(0,A.Ay)(e?r:null,m.openmrsFetch),o=a.data,i=a.error,l=a.isLoading;return{concepts:null!==(n=null==o||null===(t=o.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],conceptLookupError:i,isLoadingConcepts:l}}var vt=n(51475),Et={};Et.styleTagTransform=Q(),Et.setAttributes=U(),Et.insert=z().bind(null,"head"),Et.domAPI=N(),Et.insertStyleElement=H(),P()(vt.A,Et);const wt=vt.A&&vt.A.locals?vt.A.locals:void 0;function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){St(e,t,n[t])}))}return e}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ot="both";function Bt(e){var t=e.isRequired,n=e.text,r=e.t;return a().createElement(a().Fragment,null,a().createElement("span",null,n),t&&a().createElement("span",{title:r("required","Required"),className:wt.required},"*"))}const Tt=function(e){var t,n,o,i,c,u,_,f=e.onModalChange,p=e.onSchemaChange,b=e.pageIndex,h=e.questionIndex,g=e.resetIndices,C=e.schema,y=e.sectionIndex,v=e.showModal,E=(0,l.useTranslation)().t,w=(0,m.useConfig)(),k=w.fieldTypes,S=w.questionTypes,D=xt((0,r.useState)([]),2),x=D[0],O=D[1],B=xt((0,r.useState)([]),2),T=B[0],I=B[1],q=xt((0,r.useState)(""),2),F=q[0],P=q[1],j=(0,m.useDebounce)(F),N=xt((0,r.useState)(Ot),2),M=N[0],z=N[1],L=xt((0,r.useState)(null),2),U=L[0],R=L[1],H=xt((0,r.useState)(!1),2),G=H[0],Q=H[1],V=xt((0,r.useState)(""),2),Y=V[0],W=V[1],J=xt((0,r.useState)(""),2),K=J[0],$=J[1],X=xt((0,r.useState)(""),2),Z=X[0],ee=X[1],te=xt((0,r.useState)(""),2),ne=te[0],re=te[1],ae=xt((0,r.useState)(null),2),oe=ae[0],ie=ae[1],le=xt((0,r.useState)(""),2),se=le[0],ce=le[1],ue=xt((0,r.useState)([]),2),de=ue[0],me=ue[1],Ae=xt((0,r.useState)(null),2),_e=Ae[0],fe=Ae[1],pe=xt((0,r.useState)(null),2),be=pe[0],he=pe[1],ge=yt(j),Ce=ge.concepts,ye=ge.conceptLookupError,ve=ge.isLoadingConcepts,Ee=(o="".concat(m.restBaseUrl,"/personattributetype?v=").concat("custom:(uuid,display,format,concept)"),c=(i=(0,A.Ay)(o,m.openmrsFetch)).data,u=i.error,_=i.isLoading,{personAttributeTypes:null!==(n=null==c||null===(t=c.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],personAttributeTypeLookupError:u,isLoadingPersonAttributeTypes:_}),we=Ee.personAttributeTypes,ke=Ee.personAttributeTypeLookupError,Se=function(e){var t,n=null==C||null===(t=C.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,Ct.A)(n).includes(e)},De=function(){try{var e,t,n,r,a="question".concat(h+1,"Section").concat(y+1,"Page-").concat(b+1),o=(i=Dt({label:ne,type:oe,required:G,id:null!=Z?Z:a},"encounterDatetime"===oe&&{datePickerType:M}),l=null!=(l={questionOptions:Dt({rendering:U,concept:null==_e?void 0:_e.uuid},T.length&&{conceptMappings:T},de.length&&{answers:de.map((function(e){return{concept:e.id,label:e.text}}))},"personAttribute"===oe&&{attributeType:be.uuid},"obs"===oe&&"number"===U&&!1===(null==_e?void 0:_e.allowDecimal)&&{disallowDecimals:!0}),validators:[]})?l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(l)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(l,e))})),i);null===(r=C.pages[b])||void 0===r||null===(n=r.sections)||void 0===n||null===(t=n[y])||void 0===t||null===(e=t.questions)||void 0===e||e.push(o),p(Dt({},C)),g(),re(""),ee(""),Q(!1),ie(null),R(null),fe(null),I([]),O([]),me([]),(0,m.showSnackbar)({title:E("success","Success!"),kind:"success",isLowContrast:!0,subtitle:E("questionCreated","New question created")})}catch(e){s=e,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](s):s instanceof c)&&(0,m.showSnackbar)({title:E("errorCreatingQuestion","Error creating question"),kind:"error",subtitle:null==e?void 0:e.message})}var i,l,s,c};return a().createElement(s.KXP,{open:v,onClose:function(){return f(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:E("createNewQuestion","Create a new question")}),a().createElement(s.lVW,{className:wt.form,onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,{hasScrollingContent:!0},a().createElement(s.gE_,{legendText:""},a().createElement(s.BJc,{gap:5},a().createElement(s.ksK,{id:"questionLabel",labelText:a().createElement(Bt,{isRequired:G,text:E("questionLabel","Label"),t:E}),placeholder:E("labelPlaceholder","e.g. Type of Anaesthesia"),value:ne,onChange:function(e){return re(e.target.value)},required:!0}),a().createElement(s.ksK,{id:"questionId",invalid:Se(Z),invalidText:E("questionIdExists","This question ID already exists in your schema"),labelText:a().createElement("div",{className:wt.questionIdLabel},a().createElement("span",null,E("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID.")),ne?a().createElement(s.$nd,{kind:"ghost",onClick:function(){var e,t=null==ne||null===(e=ne.toLowerCase())||void 0===e?void 0:e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"");ee(t)},size:"sm"},E("convertLabelToCamelCase","Convert label to camel-case")):null),value:Z,onChange:function(e){ee(e.target.value)},placeholder:E("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),a().createElement(s.zWQ,{defaultSelected:"optional",name:"isQuestionRequired",legendText:E("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},a().createElement(s.aaP,{id:"questionIsNotRequired",defaultChecked:!0,labelText:E("optional","Optional"),onClick:function(){return Q(!1)},value:"optional"}),a().createElement(s.aaP,{id:"questionIsRequired",defaultChecked:!1,labelText:E("required","Required"),onClick:function(){return Q(!0)},value:"required"})),a().createElement(s.l6P,{value:oe,onChange:function(e){return ie(e.target.value)},id:"questionType",invalidText:E("typeRequired","Type is required"),labelText:E("questionType","Question type"),required:!0},!oe&&a().createElement(s.ebT,{text:E("chooseQuestionType","Choose a question type"),value:""}),S.map((function(e,t){return a().createElement(s.ebT,{text:e,value:e,key:t})}))),a().createElement(s.l6P,{value:U,onChange:function(e){return R(e.target.value)},id:"renderingType",invalidText:E("validRenderingTypeRequired","A valid rendering type value is required"),labelText:E("renderingType","Rendering type"),required:!0},!U&&a().createElement(s.ebT,{text:E("chooseRenderingType","Choose a rendering type"),value:""}),S.filter((function(e){return"obs"!==e})).includes(oe)?{control:["text"],encounterDatetime:["date"],encounterLocation:["ui-select-extended"],encounterProvider:["ui-select-extended"],obsGroup:["group","repeating"],personAttribute:["ui-select-extended","select","text"],testOrder:["group","repeating"]}[oe].map((function(e,t){return a().createElement(s.ebT,{key:"".concat(oe,"-").concat(t),text:e,value:e})})):k.map((function(e,t){return a().createElement(s.ebT,{key:t,text:e,value:e})}))),"personAttribute"===oe&&a().createElement("div",null,a().createElement(s.lRv,{className:wt.label},E("searchForBackingPersonAttributeType","Search for a backing person attribute type")),ke?a().createElement(s.jeF,{kind:"error",lowContrast:!0,className:wt.error,title:E("errorFetchingPersonAttributeTypes","Error fetching person attribute types"),subtitle:E("pleaseTryAgain","Please try again.")}):null,a().createElement(s.a32,{helperText:E("personAttributeTypeHelperText","Person attribute type fields must be linked to a person attribute type"),id:"personAttributeTypeLookup",items:we,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t=e.selectedItem;he(t)},placeholder:E("choosePersonAttributeType","Choose a person attribute type"),selectedItem:be})),"obs"===oe?a().createElement(a().Fragment,null,"number"===U?a().createElement(a().Fragment,null,a().createElement(s.ksK,{id:"min",labelText:"Min",value:K||"",onChange:function(e){return $(e.target.value)},required:!0}),a().createElement(s.ksK,{id:"max",labelText:"Max",value:Y||"",onChange:function(e){return W(e.target.value)},required:!0})):"textarea"===U?a().createElement(s.ksK,{id:"textAreaRows",labelText:E("rows","Rows"),value:se||"",onChange:function(e){return ce(e.target.value)},required:!0}):null,"ui-select-extended"!==U&&a().createElement("div",null,a().createElement(s.lRv,{className:wt.label},E("searchForBackingConcept","Search for a backing concept")),ye?a().createElement(s.jeF,{kind:"error",lowContrast:!0,className:wt.error,title:E("errorFetchingConcepts","Error fetching concepts"),subtitle:E("pleaseTryAgain","Please try again.")}):null,a().createElement(s.vji,{id:"conceptLookup",onClear:function(){fe(null),O([]),I([])},onChange:function(e){return P(e.target.value)},placeholder:E("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:F||(_e?_e.display:"")}),F?ve?a().createElement(s.OuH,{className:wt.loader,description:E("searching","Searching")+"..."}):(null==Ce?void 0:Ce.length)&&!ve?a().createElement("ul",{className:wt.conceptList},null==Ce?void 0:Ce.map((function(e,t){return a().createElement("li",{role:"menuitem",className:wt.concept,key:t,onClick:function(){return function(e){var t,n;P(""),fe(e),O(null==e||null===(t=e.answers)||void 0===t?void 0:t.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}}))),I(null==e||null===(n=e.mappings)||void 0===n?void 0:n.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}})))}(e)}},e.display)}))):a().createElement(s.Wdr,null,a().createElement(s.FAs,{className:wt.emptyResults},a().createElement("span",null,E("noMatchingConcepts","No concepts were found that match")," ",a().createElement("strong",null,'"',j,'".'))),a().createElement("div",{className:wt.oclLauncherBanner},a().createElement("p",{className:wt.bodyShort01},E("conceptSearchHelpText","Can't find a concept?")),a().createElement("a",{className:wt.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},E("searchInOCL","Search in OCL"),a().createElement(d.F1,{size:16})))):null),!1===(null==_e?void 0:_e.allowDecimal)&&a().createElement(s.jeF,{kind:"info",lowContrast:!0,title:E("decimalsNotAllowed","This concept does not allow decimals")}),(null==T?void 0:T.length)?a().createElement(s.gE_,null,a().createElement(s.lRv,{className:wt.label},E("mappings","Mappings")),a().createElement("table",{className:wt.tableStriped},a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",null,E("relationship","Relationship")),a().createElement("th",null,E("source","Source")),a().createElement("th",null,E("code","Code")))),a().createElement("tbody",null,T.map((function(e,t){return a().createElement("tr",{key:"mapping-".concat(t)},a().createElement("td",null,e.relationship),a().createElement("td",null,e.type),a().createElement("td",null,e.value))}))))):null,(null==x?void 0:x.length)?a().createElement(s.KFt,{className:wt.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:x.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return me(t.sort())},size:"md",titleText:E("selectAnswersToDisplay","Select answers to display")}):null,de.length?a().createElement("div",null,de.map((function(e){return a().createElement(s.vwO,{className:wt.tag,key:e.id,type:"blue"},e.text)}))):null):null,"encounterDatetime"===oe?a().createElement(s.zWQ,{defaultSelected:"both",name:"datePickerType",legendText:E("datePickerType","The type of date picker to show ")},a().createElement(s.aaP,{id:"both",defaultChecked:!0,labelText:E("calendarAndTimer","Calendar and timer"),onClick:function(){return z(Ot)},value:"both"}),a().createElement(s.aaP,{id:"calendar",defaultChecked:!1,labelText:E("calendarOnly","Calendar only"),onClick:function(){return z("calendar")},value:"calendar"}),a().createElement(s.aaP,{id:"timer",defaultChecked:!1,labelText:E("timerOnly","Timer only"),onClick:function(){return z("timer")},value:"timer"})):null)))),a().createElement(s.jlY,null,a().createElement(s.$nd,{onClick:function(){return f(!1)},kind:"secondary"},E("cancel","Cancel")),a().createElement(s.$nd,{disabled:!ne||!Z||Se(Z)||!U,onClick:function(){De(),f(!1)}},a().createElement("span",null,E("save","Save")))))};function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,o=e.pageIndex,i=e.sectionIndex,c=e.schema,u=e.showModal,d=(0,l.useTranslation)().t;return a().createElement(s.KXP,{open:u,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:d("deleteSectionConfirmation","Are you sure you want to delete this section?")}),a().createElement(s.cwr,null,a().createElement("p",null,d("deleteSectionExplainerText","Deleting this section will delete all the questions associated with it. This action cannot be undone."))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return t(!1)}},d("cancel","Cancel")),a().createElement(s.$nd,{kind:"danger",onClick:function(){(function(e,t){try{c.pages[e].sections.splice(t,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){It(e,t,n[t])}))}return e}({},c)),r(),(0,m.showSnackbar)({title:d("success","Success!"),kind:"success",isLowContrast:!0,subtitle:d("SectionDeleted","Section deleted")})}catch(e){a=e,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](a):a instanceof o)&&(0,m.showSnackbar)({title:d("errorDeletingSection","Error deleting section"),kind:"error",subtitle:null==e?void 0:e.message})}var a,o})(o,i),t(!1)}},a().createElement("span",null,d("deleteSection","Delete section")))))};function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,o=e.pageIndex,i=e.schema,c=e.showModal,u=(0,l.useTranslation)().t;return a().createElement(s.KXP,{open:c,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:u("deletePageConfirmation","Are you sure you want to delete this page?")}),a().createElement(s.cwr,null,a().createElement("p",null,u("deletePageExplainerText","Deleting this page will delete all the sections and questions associated with it. This action cannot be undone."))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return t(!1)}},u("cancel","Cancel")),a().createElement(s.$nd,{kind:"danger",onClick:function(){(function(e){try{i.pages.splice(e,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ft(e,t,n[t])}))}return e}({},i)),r(),(0,m.showSnackbar)({title:u("success","Success!"),kind:"success",isLowContrast:!0,subtitle:u("pageDeleted","Page deleted")})}catch(e){t=e,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](t):t instanceof a)&&(0,m.showSnackbar)({title:u("errorDeletingPage","Error deleting page"),kind:"error",subtitle:null==e?void 0:e.message})}var t,a})(o),t(!1)}},a().createElement("span",null,u("deletePage","Delete page")))))};function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Nt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,o=e.pageIndex,i=e.sectionIndex,c=e.questionIndex,u=e.schema,d=e.showModal,A=(0,l.useTranslation)().t;return a().createElement(s.KXP,{open:d,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:A("deleteQuestionConfirmation","Are you sure you want to delete this question?")}),a().createElement(s.cwr,null,a().createElement("p",null,A("deleteQuestionExplainerText","This action cannot be undone."))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return t(!1)}},A("cancel","Cancel")),a().createElement(s.$nd,{kind:"danger",onClick:function(){(function(e,t,a){try{u.pages[e].sections[t].questions.splice(a,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jt(e,t,n[t])}))}return e}({},u)),r(),(0,m.showSnackbar)({title:A("success","Success!"),kind:"success",isLowContrast:!0,subtitle:A("QuestionDeleted","Question deleted")})}catch(e){o=e,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i)&&(0,m.showSnackbar)({title:A("errorDeletingQuestion","Error deleting question"),kind:"error",subtitle:null==e?void 0:e.message})}var o,i})(o,i,c),t(!1)}},a().createElement("span",null,A("deleteQuestion","Delete question")))))};var Mt=n(63366);function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Rt=function(e){var t,n,o,i,c,u,_,f,p,b,h,g,C,y,v,E,w,k,S,D=e.onModalChange,x=e.onQuestionEdit,O=e.onSchemaChange,B=e.pageIndex,T=e.questionIndex,I=e.questionToEdit,q=e.resetIndices,F=e.schema,P=e.sectionIndex,j=e.showModal,N=(0,l.useTranslation)().t,M=(0,m.useConfig)(),z=M.fieldTypes,L=M.questionTypes,U=Ut((0,r.useState)(!1),2),R=U[0],H=U[1],G=Ut((0,r.useState)([]),2),Q=G[0],V=G[1],Y=Ut((0,r.useState)(I.questionOptions.conceptMappings),2),W=Y[0],J=Y[1],K=Ut((0,r.useState)(""),2),$=K[0],X=K[1],Z=Ut((0,r.useState)(null),2),ee=Z[0],te=Z[1],ne=Ut((0,r.useState)(!1),2),re=ne[0],ae=ne[1],oe=Ut((0,r.useState)(""),2),ie=oe[0],le=oe[1],se=Ut((0,r.useState)(""),2),ce=se[0],ue=se[1],de=Ut((0,r.useState)(""),2),me=de[0],Ae=de[1],_e=Ut((0,r.useState)(""),2),fe=_e[0],pe=_e[1],be=Ut((0,r.useState)(null),2),he=be[0],ge=be[1],Ce=Ut((0,r.useState)(""),2),ye=Ce[0],ve=Ce[1],Ee=Ut((0,r.useState)([]),2),we=Ee[0],ke=Ee[1],Se=Ut((0,r.useState)(null),2),De=Se[0],xe=Se[1],Oe=yt($),Be=Oe.concepts,Te=Oe.isLoadingConcepts,Ie=(g=I.questionOptions.concept,E="".concat(m.restBaseUrl,"/concept/").concat(g,"?v=").concat("custom:(name:(display))"),k=(w=(0,A.Ay)(g?E:null,m.openmrsFetch)).data,S=w.error,{conceptName:null!==(v=null==k||null===(y=k.data)||void 0===y||null===(C=y.name)||void 0===C?void 0:C.display)&&void 0!==v?v:null,conceptNameLookupError:S,isLoadingConceptName:!k&&!S||!1}),qe=Ie.conceptName,Fe=Ie.conceptNameLookupError,Pe=Ie.isLoadingConceptName,je=De&&(null==I||null===(t=I.questionOptions)||void 0===t?void 0:t.concept)!==(null==De?void 0:De.uuid),Ne=(0,r.useMemo)((function(){return(0,Mt.A)((function(e){return X(e)}),500)}),[]);return a().createElement(s.KXP,{open:j,onClose:function(){return D(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:N("editQuestion","Edit question")}),a().createElement(s.lVW,{className:wt.form,onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,{hasScrollingContent:!0},a().createElement(s.BJc,{gap:5},a().createElement(s.ksK,{defaultValue:I.label,id:I.id,labelText:N("questionLabel","Label"),onChange:function(e){return pe(e.target.value)},required:!0}),a().createElement(s.ksK,{defaultValue:I.id,id:"questionId",invalid:function(e){var t;if((null==I?void 0:I.id)===e)return!1;var n=null==F||null===(t=F.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,Ct.A)(n).includes(e)}(me),invalidText:N("questionIdExists","This question ID already exists in your schema"),labelText:N("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID."),onChange:function(e){return Ae(e.target.value)},placeholder:N("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),a().createElement(s.zWQ,{defaultSelected:/true/.test(null==I||null===(n=I.required)||void 0===n?void 0:n.toString())?"required":"optional",name:"isQuestionRequired",legendText:N("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},a().createElement(s.aaP,{id:"questionIsNotRequired",defaultChecked:!0,labelText:N("optional","Optional"),onClick:function(){return ae(!1)},value:"optional"}),a().createElement(s.aaP,{id:"questionIsRequired",defaultChecked:!1,labelText:N("required","Required"),onClick:function(){return ae(!0)},value:"required"})),a().createElement(s.l6P,{defaultValue:I.type,onChange:function(e){return ge(e.target.value)},id:"questionType",invalidText:N("typeRequired","Type is required"),labelText:N("questionType","Question type"),required:!0},!he&&a().createElement(s.ebT,{text:N("chooseQuestionType","Choose a question type"),value:""}),L.map((function(e,t){return a().createElement(s.ebT,{text:e,value:e,key:t})}))),a().createElement(s.l6P,{defaultValue:I.questionOptions.rendering,onChange:function(e){return te(e.target.value)},id:"renderingType",invalidText:N("validFieldTypeRequired","A valid field type value is required"),labelText:N("renderingType","Rendering type"),required:!0},!ee&&a().createElement(s.ebT,{text:N("chooseRenderingType","Choose a rendering type"),value:""}),z.map((function(e,t){return a().createElement(s.ebT,{text:e,value:e,key:t})}))),"number"===ee?a().createElement(a().Fragment,null,a().createElement(s.ksK,{id:"min",labelText:"Min",value:ce||"",onChange:function(e){return ue(e.target.value)},required:!0}),a().createElement(s.ksK,{id:"max",labelText:"Max",value:ie||"",onChange:function(e){return le(e.target.value)},required:!0})):"textarea"===ee?a().createElement(s.ksK,{id:"textAreaRows",labelText:N("rows","Rows"),value:ye||"",onChange:function(e){return ve(e.target.value)},required:!0}):null,"ui-select-extended"!==ee&&a().createElement("div",null,a().createElement(s.lRv,{className:wt.label},N("searchForBackingConcept","Search for a backing concept")),Fe?a().createElement(s.jeF,{kind:"error",lowContrast:!0,className:wt.error,title:N("errorFetchingConceptName","Couldn't resolve concept name"),subtitle:N("conceptDoesNotExist","The linked concept '{{conceptName}}' does not exist in your dictionary",{conceptName:I.questionOptions.concept})}):null,Pe?a().createElement(s.OuH,{className:wt.loader,description:N("loading","Loading")+"..."}):a().createElement(a().Fragment,null,a().createElement(s.vji,{defaultValue:qe,id:"conceptLookup",onClear:function(){return xe(null)},onChange:function(e){var t,n;(n=null===(t=e.target.value)||void 0===t?void 0:t.trim())&&Ne(n)},placeholder:N("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:null==De?void 0:De.display}),$?Te?a().createElement(s.OuH,{className:wt.loader,description:N("searching","Searching")+"..."}):(null==Be?void 0:Be.length)&&!Te?a().createElement("ul",{className:wt.conceptList},null==Be?void 0:Be.map((function(e,t){return a().createElement("li",{role:"menuitem",className:wt.concept,key:t,onClick:function(){return function(e){var t,n,r;X(""),ke([]),xe(e),J(null==e||null===(t=e.mappings)||void 0===t?void 0:t.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}}))),V(null!==(r=null==e||null===(n=e.answers)||void 0===n?void 0:n.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}})))&&void 0!==r?r:[])}(e)}},e.display)}))):a().createElement(s.Wdr,null,a().createElement(s.FAs,{className:wt.emptyResults},a().createElement("span",null,N("noMatchingConcepts","No concepts were found that match")," ",a().createElement("strong",null,'"',$,'".'))),a().createElement("div",{className:wt.oclLauncherBanner},a().createElement("p",{className:wt.bodyShort01},N("conceptSearchHelpText","Can't find a concept?")),a().createElement("a",{className:wt.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},N("searchInOCL","Search in OCL"),a().createElement(d.F1,{size:16})))):null)),(null==W?void 0:W.length)?a().createElement(s.gE_,null,a().createElement(s.lRv,{className:wt.label},N("mappings","Mappings")),a().createElement("table",{className:wt.tableStriped},a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",null,N("relationship","Relationship")),a().createElement("th",null,N("source","Source")),a().createElement("th",null,N("code","Code")))),a().createElement("tbody",null,W.map((function(e,t){var n,r,o;return a().createElement("tr",{key:"mapping-".concat(t)},a().createElement("td",null,null!==(n=e.relationship)&&void 0!==n?n:"--"),a().createElement("td",null,null!==(r=e.type)&&void 0!==r?r:"--"),a().createElement("td",null,null!==(o=e.value)&&void 0!==o?o:"--"))}))))):null,!je&&(null==I||null===(o=I.questionOptions.answers)||void 0===o?void 0:o.length)?a().createElement(s.KFt,{className:wt.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},initialSelectedItems:null==I||null===(c=I.questionOptions)||void 0===c||null===(i=c.answers)||void 0===i?void 0:i.map((function(e){return{id:e.concept,text:e.label}})),items:null==I||null===(_=I.questionOptions)||void 0===_||null===(u=_.answers)||void 0===u?void 0:u.map((function(e){var t;return{id:e.concept,text:null!==(t=e.label)&&void 0!==t?t:""}})),onChange:function(e){var t=e.selectedItems;H(!0),ke(t.sort())},size:"md",titleText:N("selectAnswersToDisplay","Select answers to display")}):null,je||!(null==I||null===(p=I.questionOptions)||void 0===p||null===(f=p.answers)||void 0===f?void 0:f.length)||R?null:a().createElement("div",null,null==I||null===(h=I.questionOptions)||void 0===h||null===(b=h.answers)||void 0===b?void 0:b.map((function(e){return a().createElement(s.vwO,{className:wt.tag,key:null==e?void 0:e.concept,type:"blue"},null==e?void 0:e.label)}))),je&&Q.length?a().createElement(s.KFt,{className:wt.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:Q.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return ke(t.sort())},size:"md",titleText:N("selectAnswersToDisplay","Select answers to display")}):null,(null!=je?je:R)&&a().createElement("div",null,we.map((function(e){return a().createElement(s.vwO,{className:wt.tag,key:e.id,type:"blue"},e.text)}))))),a().createElement(s.jlY,null,a().createElement(s.$nd,{onClick:function(){return D(!1)},kind:"secondary"},N("cancel","Cancel")),a().createElement(s.$nd,{onClick:function(){!function(e){var t,n,r;r=!je&&(null==we?void 0:we.length)?we.map((function(e){return{concept:e.id,label:e.text}})):je&&0===Q.length?[]:je&&(null==Q?void 0:Q.length)>0&&(null==we?void 0:we.length)&&(null==we?void 0:we.length)?we.map((function(e){return{concept:e.id,label:e.text}})):I.questionOptions.answers;try{var a,o={label:fe||I.label,type:he||I.type,required:re||/true/.test(null==I||null===(a=I.required)||void 0===a?void 0:a.toString()),id:me||I.id,questionOptions:{rendering:ee||I.questionOptions.rendering,concept:(null==De?void 0:De.uuid)?De.uuid:I.questionOptions.concept,conceptMappings:(null==W?void 0:W.length)?W:I.questionOptions.conceptMappings,answers:r}};F.pages[B].sections[P].questions[e]=o,O(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lt(e,t,n[t])}))}return e}({},F)),q(),pe(""),Ae(""),ae(!1),ge(null),te(null),xe(null),J([]),ke([]),x(null),(0,m.showSnackbar)({title:N("success","Success!"),kind:"success",isLowContrast:!0,subtitle:N("questionUpdated","Question updated")}),D(!1)}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&(0,m.showSnackbar)({title:N("errorUpdatingQuestion","Error updating question"),kind:"error",subtitle:null==e?void 0:e.message})}}(T)}},a().createElement("span",null,N("save","Save"))))))};var Ht=n(81673),Gt=n(59184),Qt=n(58026),Vt={};Vt.styleTagTransform=Q(),Vt.setAttributes=U(),Vt.insert=z().bind(null,"head"),Vt.domAPI=N(),Vt.insertStyleElement=H(),P()(Qt.A,Vt);const Yt=Qt.A&&Qt.A.locals?Qt.A.locals:void 0;function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Jt(e,t,n[t])}))}return e}function $t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Xt=function(e){var t,n,o=e.id,i=e.handleCancel,c=e.handleSave,u=e.value,d=(0,l.useTranslation)().t,m=(t=(0,r.useState)(u),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=m[0],_=m[1];return a().createElement(a().Fragment,null,a().createElement(s.ksK,{id:o,labelText:"",value:A,onChange:function(e){return _(e.target.value)}}),a().createElement("div",{className:Yt.actionButtons},a().createElement(s.$nd,{size:"md",renderIcon:function(e){return a().createElement(Ht.eM,$t(Kt({},e),{size:16}))},kind:"primary",onClick:function(){return c(A)}},d("saveButtonText","Save")),a().createElement(s.$nd,{size:"md",renderIcon:function(e){return a().createElement(Gt.bm,$t(Kt({},e),{size:16}))},kind:"secondary",onClick:i},d("cancelButtonText","Cancel"))))};var Zt=n(50407),en={};en.styleTagTransform=Q(),en.setAttributes=U(),en.insert=z().bind(null,"head"),en.domAPI=N(),en.insertStyleElement=H(),P()(Zt.A,en);const tn=Zt.A&&Zt.A.locals?Zt.A.locals:void 0;function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const an=function(e){var t,n,o=e.elementType,i=e.id,u=e.value,d=e.onSave,m=(0,l.useTranslation)().t,A=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=A[0],f=A[1],p=function(){f(!1)};return _?a().createElement(Xt,{handleCancel:p,handleSave:function(e){d(e),p()},id:i,value:u}):a().createElement(a().Fragment,null,a().createElement("h1",{className:tn["".concat(o)+"Label"]},u),a().createElement(s.$nd,{kind:"ghost",size:"sm",enterDelayMs:300,iconDescription:m("editButton","Edit {{elementType}}",{elementType:o}),onClick:function(){return f(!0)},renderIcon:function(e){return a().createElement(c.ff,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rn(e,t,n[t])}))}return e}({size:16},e))},hasIconOnly:!0}))};function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const cn=function(e){var t=e.schema,n=e.onSchemaChange,o=e.showModal,i=e.onModalChange,c=(0,l.useTranslation)().t,u=sn((0,r.useState)(""),2),d=u[0],A=u[1],_=sn((0,r.useState)(""),2),f=_[0],p=_[1];return a().createElement(s.KXP,{open:o,onClose:function(){return i(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:c("createNewForm","Create a new form")}),a().createElement(s.lVW,{onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,null,a().createElement(s.BJc,{gap:5},a().createElement(s.gE_,{legendText:""},a().createElement(s.ksK,{id:"formName",labelText:c("formName","Form Name"),placeholder:c("namePlaceholder","What the form is called in the system"),value:d,onChange:function(e){return A(e.target.value)}})),a().createElement(s.gE_,{legendText:""},a().createElement(s.ksK,{id:"formDescription",labelText:c("formDescription","Form description"),placeholder:c("formDescriptionPlaceholder","A short description of the form e.g. A form for collecting COVID-19 symptoms"),value:f,onChange:function(e){return p(e.target.value)}}))))),a().createElement(s.jlY,null,a().createElement(s.$nd,{kind:"secondary",onClick:function(){return i(!1)}},c("cancel","Cancel")),a().createElement(s.$nd,{disabled:!d,onClick:function(){d&&(function(e){try{var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ln(e,t,n[t])}))}return e}({},t,e);n(r),(0,m.showSnackbar)({title:c("success","Success!"),kind:"success",isLowContrast:!0,subtitle:c("formCreated","New form created")})}catch(e){a=e,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](a):a instanceof o)&&(0,m.showSnackbar)({title:c("errorCreatingForm","Error creating form"),kind:"error",subtitle:null==e?void 0:e.message})}var a,o}({name:d,description:f}),i(!1))}},a().createElement("span",null,c("createForm","Create Form")))))};function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mn=function(e){var t,n,o=e.schema,i=e.onSchemaChange,c=e.showModal,u=e.onModalChange,d=(0,l.useTranslation)().t,A=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=A[0],f=A[1];return a().createElement(s.KXP,{open:c,onClose:function(){return u(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:d("createNewPage","Create a new page")}),a().createElement(s.lVW,{onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,null,a().createElement(s.gE_,{legendText:""},a().createElement(s.ksK,{id:"pageTitle",labelText:d("enterPageTitle","Enter a title for your new page"),value:_,onChange:function(e){return f(e.target.value)}})))),a().createElement(s.jlY,null,a().createElement(s.$nd,{onClick:function(){return u(!1)},kind:"secondary"},d("cancel","Cancel")),a().createElement(s.$nd,{disabled:!_,onClick:function(){(function(){try{_&&(o.pages.push({label:_,sections:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dn(e,t,n[t])}))}return e}({},o)),f("")),(0,m.showSnackbar)({title:d("success","Success!"),kind:"success",isLowContrast:!0,subtitle:d("pageCreated","New page created")})}catch(n){e=n,(null!=(t=Error)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)&&(0,m.showSnackbar)({title:d("errorCreatingPage","Error creating page"),kind:"error",subtitle:null==n?void 0:n.message})}var e,t})(),u(!1)}},a().createElement("span",null,d("save","Save")))))};function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const fn=function(e){var t,n,o=e.schema,i=e.onSchemaChange,c=e.pageIndex,u=e.resetIndices,d=e.showModal,A=e.onModalChange,_=(0,l.useTranslation)().t,f=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?An(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],b=f[1];return a().createElement(s.KXP,{open:d,onClose:function(){return A(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:_("createNewSection","Create a new section")}),a().createElement(s.lVW,{onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,null,a().createElement(s.gE_,{legendText:""},a().createElement(s.ksK,{id:"sectionTitle",labelText:_("enterSectionTitle","Enter a section title"),value:p,onChange:function(e){return b(e.target.value)}})))),a().createElement(s.jlY,null,a().createElement(s.$nd,{onClick:function(){return A(!1)},kind:"secondary"},_("cancel","Cancel")),a().createElement(s.$nd,{disabled:!p,onClick:function(){(function(){try{var e,t;null===(t=o.pages[c])||void 0===t||null===(e=t.sections)||void 0===e||e.push({label:p,isExpanded:"true",questions:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_n(e,t,n[t])}))}return e}({},o)),b(""),u(),(0,m.showSnackbar)({title:_("success","Success!"),kind:"success",isLowContrast:!0,subtitle:_("sectionCreated","New section created")})}catch(e){n=e,(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)&&(0,m.showSnackbar)({title:_("errorCreatingSection","Error creating section"),kind:"error",subtitle:null==e?void 0:e.message})}var n,r})(),A(!1)}},a().createElement("span",null,_("save","Save")))))};var pn=n(74979),bn=n(26821),hn={};hn.styleTagTransform=Q(),hn.setAttributes=U(),hn.insert=z().bind(null,"head"),hn.domAPI=N(),hn.insertStyleElement=H(),P()(bn.A,hn);const gn=bn.A&&bn.A.locals?bn.A.locals:void 0;function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Cn(e,t,n[t])}))}return e}var vn=function(e){var t=e.question,n=e.pageIndex,r=e.sectionIndex,o=e.questionIndex,i=e.handleDuplicateQuestion,d=e.handleDeleteButtonClick,m=e.handleEditButtonClick,A=e.questionCount,_=(0,l.useTranslation)().t,f="question-".concat(n,"-").concat(r,"-").concat(o),p=(0,gt.PM)({id:f,disabled:A<=1}),b=p.attributes,h=p.listeners,g=p.transform,C=p.isDragging,y=p.setNodeRef,v={transform:pn.Ks.Translate.toString(g)},E=C?gn.isDragged:gn.normal;return a().createElement("div",{className:E,style:v},a().createElement("div",{className:gn.iconAndName},a().createElement("div",yn({ref:y},b,h),a().createElement(s.$nd,{className:gn.dragIcon,enterDelayMs:300,hasIconOnly:!0,iconDescription:_("reorderQuestion","Reorder question"),kind:"ghost",renderIcon:function(e){return a().createElement(c.sx,yn({size:16},e))},size:"md"})),a().createElement("p",{className:gn.questionLabel},t.label)),a().createElement("div",{className:gn.buttonsContainer},a().createElement(s.i8y,{align:"top",className:"cds--btn--sm",feedback:_("duplicated","Duplicated")+"!",iconDescription:_("duplicateQuestion","Duplicate question"),kind:"ghost",onClick:function(){return!C&&i(t,n,r)}}),a().createElement(s.$nd,{enterDelayMs:300,hasIconOnly:!0,iconDescription:_("editQuestion","Edit question"),kind:"ghost",onClick:function(){C||m(t)},renderIcon:function(e){return a().createElement(c.ff,yn({size:16},e))},size:"md"}),a().createElement(s.$nd,{enterDelayMs:300,hasIconOnly:!0,iconDescription:_("deleteQuestion","Delete question"),kind:"ghost",onClick:d,renderIcon:function(e){return a().createElement(u.zH,yn({size:16},e))},size:"md"})))};function En(e){var t=e.id,n=e.children,r=(0,gt.zM)({id:t}),o=r.isOver,i=r.setNodeRef,l={border:"1px solid ".concat(o?"#005d5d":"transparent")};return a().createElement("div",{ref:i,style:l},n)}var wn=n(60823),kn={};kn.styleTagTransform=Q(),kn.setAttributes=U(),kn.insert=z().bind(null,"head"),kn.domAPI=N(),kn.insertStyleElement=H(),P()(wn.A,kn);const Sn=wn.A&&wn.A.locals?wn.A.locals:void 0;function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xn(e,t,n[t])}))}return e}function Tn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}const Fn=function(e){var t,n=e.isLoading,o=e.onSchemaChange,c=e.schema,A=e.validationResponse,_=(0,gt.MS)(gt.cA,{activationConstraint:{distance:10}}),f=(0,gt.MS)(gt.uN),p=(0,gt.FR)(_,f),b=(0,l.useTranslation)().t,h=(0,i.g)().formUuid,g=Boolean(h),C=In((0,r.useState)(0),2),y=C[0],v=C[1],E=In((0,r.useState)(0),2),w=E[0],k=E[1],S=In((0,r.useState)(),2),D=S[0],x=S[1],O=In((0,r.useState)(0),2),B=O[0],T=O[1],I=In((0,r.useState)(!1),2),q=I[0],F=I[1],P=In((0,r.useState)(!1),2),j=P[0],N=P[1],M=In((0,r.useState)(!1),2),z=M[0],L=M[1],U=In((0,r.useState)(!1),2),R=U[0],H=U[1],G=In((0,r.useState)(!1),2),Q=G[0],V=G[1],Y=In((0,r.useState)(!1),2),W=Y[0],J=Y[1],K=In((0,r.useState)(!1),2),$=K[0],X=K[1],Z=In((0,r.useState)(!1),2),ee=Z[0],te=Z[1],ne=(0,r.useCallback)((function(){c||o(Bn({},{name:"",pages:[],processor:"EncounterFormProcessor",encounterType:"",referencedForms:[],uuid:""}))}),[o,c]),re=function(){v(0),T(0),k(0)},ae=(0,r.useCallback)((function(e){try{e&&(c.name=e),o(Bn({},c)),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("formRenamed","Form renamed")})}catch(e){(0,m.showSnackbar)({title:b("errorRenamingForm","Error renaming form"),kind:"error",subtitle:null==e?void 0:e.message})}}),[o,c,b]),oe=(0,r.useCallback)((function(e,t){try{e&&(c.pages[t].label=e),o(Bn({},c)),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("pageRenamed","Page renamed")})}catch(e){On(e,Error)&&(0,m.showSnackbar)({title:b("errorRenamingPage","Error renaming page"),kind:"error",subtitle:null==e?void 0:e.message})}}),[o,c,b]),ie=(0,r.useCallback)((function(e,t,n){try{e&&(c.pages[t].sections[n].label=e),o(Bn({},c)),re(),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("sectionRenamed","Section renamed")})}catch(e){On(e,Error)&&(0,m.showSnackbar)({title:b("errorRenamingSection","Error renaming section"),kind:"error",subtitle:null==e?void 0:e.message})}}),[o,c,b]),le=(0,r.useCallback)((function(e,t,n){try{var r=JSON.parse(JSON.stringify(e));r.id=r.id+"Duplicate",c.pages[t].sections[n].questions.push(r),o(Bn({},c)),re(),(0,m.showSnackbar)({title:b("success","Success!"),kind:"success",isLowContrast:!0,subtitle:b("questionDuplicated","Question duplicated. Please change the duplicated question's ID to a unique, camelcased value")})}catch(e){On(e,Error)&&(0,m.showSnackbar)({title:b("errorDuplicatingQuestion","Error duplicating question"),kind:"error",subtitle:null==e?void 0:e.message})}}),[o,c,b]),se=function(e){X(!0),v(y),T(B),k(w),x(e)},ce=function(){v(y),T(B),k(w),V(!0)},ue=function(e){var t=(null==e?void 0:e.map((function(e){return e.label})))||[];return A.filter((function(e){return null==t?void 0:t.includes(e.field.label)}))||[]},de=function(e){var t=A.find((function(t){return t.field.label===e.label&&t.field.id===e.id&&t.field.type===e.type}));return(null==t?void 0:t.errorMessage)||""};return a().createElement("div",{className:Sn.container},n?a().createElement(s.OuH,{description:b("loadingSchema","Loading schema")+"..."}):null,ee?a().createElement(cn,{schema:c,onSchemaChange:o,showModal:ee,onModalChange:te}):null,q?a().createElement(mn,{schema:c,onSchemaChange:o,showModal:q,onModalChange:F}):null,z?a().createElement(fn,{schema:c,onSchemaChange:o,pageIndex:y,resetIndices:re,showModal:z,onModalChange:L}):null,j?a().createElement(Tt,{onModalChange:N,onQuestionEdit:x,onSchemaChange:o,pageIndex:y,sectionIndex:B,questionIndex:w,resetIndices:re,schema:c,showModal:j}):null,$?a().createElement(Rt,{onModalChange:X,onQuestionEdit:x,onSchemaChange:o,pageIndex:y,questionIndex:w,questionToEdit:D,resetIndices:re,schema:c,sectionIndex:B,showModal:$}):null,R?a().createElement(Pt,{onModalChange:H,onSchemaChange:o,resetIndices:re,pageIndex:y,schema:c,showModal:R}):null,W?a().createElement(qt,{onModalChange:J,onSchemaChange:o,resetIndices:re,pageIndex:y,sectionIndex:B,schema:c,showModal:W}):null,Q?a().createElement(Nt,{onModalChange:V,onSchemaChange:o,resetIndices:re,pageIndex:y,sectionIndex:B,questionIndex:w,schema:c,showModal:Q}):null,(null==c?void 0:c.name)&&a().createElement(a().Fragment,null,a().createElement("div",{className:Sn.header},a().createElement("div",{className:Sn.explainer},a().createElement("p",null,b("welcomeHeading","Welcome to the Interactive Schema builder")),a().createElement("p",null,b("welcomeExplainer","Add pages, sections and questions to your form. The Preview tab automatically updates as you build your form. For a detailed explanation of what constitutes an OpenMRS form schema, please read through the ")," ",a().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ohri-docs.globalhealthapp.net/"},b("formBuilderDocs","form builder documentation"),"."))),a().createElement(s.$nd,{kind:"ghost",renderIcon:d.OM,onClick:function(){F(!0)},iconDescription:b("addPage","Add Page")},b("addPage","Add Page"))),a().createElement("div",{className:Sn.editorContainer},a().createElement(an,{elementType:"schema",id:"formNameInput",value:null==c?void 0:c.name,onSave:function(e){return ae(e)}}))),!g&&!(null==c?void 0:c.name)&&a().createElement("div",{className:Sn.header},a().createElement("p",{className:Sn.explainer},b("interactiveBuilderHelperText","The Interactive Builder lets you build your form schema without writing JSON code. The Preview tab automatically updates as you build your form. When done, click Save Form to save your form.")),a().createElement(s.$nd,{onClick:function(){ne(),te(!0)},className:Sn.startButton,kind:"ghost"},b("startBuilding","Start building"))),a().createElement(gt.Mp,{onDragEnd:function(e){return function(e){var t=e.active,n=e.delta;if(t){var r=t.id.toString().split("-"),a=parseInt(r[1]),i=parseInt(r[2]),l=parseInt(r[3]),s=c.pages[a].sections[i].questions,u=s[l];s.splice(l,1),s.splice(l+n.y,0,u);var d=Tn(Bn({},c),{pages:c.pages.map((function(e,t){return t===a?Tn(Bn({},e),{sections:e.sections.map((function(e,t){return t===i?Tn(Bn({},e),{questions:(n=s,function(e){if(Array.isArray(e))return Dn(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||qn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}):e;var n}))}):e}))});o(d)}}(e)},sensors:p},(null==c||null===(t=c.pages)||void 0===t?void 0:t.length)?c.pages.map((function(e,t){var n,r,o;return a().createElement("div",{className:Sn.editableFieldsContainer},a().createElement("div",{style:{display:"flex",alignItems:"center"}},a().createElement("div",{className:Sn.editorContainer},a().createElement(an,{elementType:"page",id:"pageNameInput",value:c.pages[t].label,onSave:function(e){return oe(e,t)}})),a().createElement(s.$nd,{hasIconOnly:!0,enterDelayMs:300,iconDescription:b("deletePage","Delete page"),kind:"ghost",onClick:function(){v(t),H(!0)},renderIcon:function(e){return a().createElement(u.zH,Bn({size:16},e))},size:"sm"})),a().createElement("div",null,(null==e||null===(n=e.sections)||void 0===n?void 0:n.length)?a().createElement("p",{className:Sn.sectionExplainer},b("expandSectionExplainer","Below are the sections linked to this page. Expand each section to add questions to it.")):null,(null==e||null===(r=e.sections)||void 0===r?void 0:r.length)?null===(o=e.sections)||void 0===o?void 0:o.map((function(e,n){var r;return a().createElement(s.nD3,null,a().createElement(s.AsP,{title:e.label},a().createElement(a().Fragment,null,a().createElement("div",{style:{display:"flex",alignItems:"center"}},a().createElement("div",{className:Sn.editorContainer},a().createElement(an,{elementType:"section",id:"sectionNameInput",value:e.label,onSave:function(e){return ie(e,t,n)}})),a().createElement(s.$nd,{hasIconOnly:!0,enterDelayMs:300,iconDescription:b("deleteSection","Delete section"),kind:"ghost",onClick:function(){v(t),T(n),J(!0)},renderIcon:function(e){return a().createElement(u.zH,Bn({size:16},e))},size:"sm"})),a().createElement("div",null,(null===(r=e.questions)||void 0===r?void 0:r.length)?e.questions.map((function(r,o){var i,l;return a().createElement(En,{id:"droppable-question-".concat(t,"-").concat(n,"-").concat(o)},a().createElement(vn,{key:r.id,question:r,pageIndex:t,sectionIndex:n,questionIndex:o,handleDuplicateQuestion:le,handleEditButtonClick:se,handleDeleteButtonClick:ce,questionCount:e.questions.length}),de(r)&&a().createElement("div",{className:Sn.validationErrorMessage},de(r)),(null===(i=ue(r.questionOptions.answers))||void 0===i?void 0:i.length)?a().createElement("div",{className:Sn.answerErrors},a().createElement("div",null,"Answer Errors"),null===(l=ue(r.questionOptions.answers))||void 0===l?void 0:l.map((function(e){return a().createElement("div",{className:Sn.validationErrorMessage},"".concat(e.field.label,": ").concat(e.errorMessage))}))):null)})):a().createElement("p",{className:Sn.explainer},b("sectionExplainer","A section will typically contain one or more questions. Click the button below to add a question to this section.")),a().createElement(s.$nd,{className:Sn.addQuestionButton,kind:"ghost",renderIcon:d.OM,onClick:function(){N(!0),k(w),v(t),T(n)},iconDescription:b("addQuestion","Add Question")},b("addQuestion","Add Question"))))))})):a().createElement("p",{className:Sn.explainer},b("pageExplainer","Pages typically have one or more sections. Click the button below to add a section to your page."))),a().createElement(s.$nd,{className:Sn.addSectionButton,kind:"ghost",renderIcon:d.OM,onClick:function(){L(!0),v(t)},iconDescription:b("addSection","Add Section")},b("addSection","Add Section")))})):null))};var Pn=n(70470),jn=(n(62432),n(20047)),Nn=n(63282),Mn=n.n(Nn),zn=n(83335),Ln=n(20331),Un={};Un.styleTagTransform=Q(),Un.setAttributes=U(),Un.insert=z().bind(null,"head"),Un.domAPI=N(),Un.insertStyleElement=H(),P()(Ln.A,Un);const Rn=Ln.A&&Ln.A.locals?Ln.A.locals:void 0;function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Qn=function(e){var t,n,o,i,c=e.onSchemaChange,u=e.stringifiedSchema,d=e.setErrors,A=e.errors,_=e.validationOn,f=e.setValidationOn,p=(n=(t=(0,K.A)("https://json.openmrs.org/form.schema.json",m.openmrsFetch)).data,o=t.error,i=t.isLoading,{schema:null==n?void 0:n.data,schemaProperties:null==n?void 0:n.data.properties,error:o,isLoading:i}),b=p.schema,h=p.schemaProperties,g=(0,l.useTranslation)().t,C=Gn((0,r.useState)([]),2),y=C[0],v=C[1],E=Gn((0,r.useState)(0),2),w=E[0],k=E[1],S=(0,r.useCallback)((function(){var e=[],t=function(n,r){n&&n&&"object"==typeof n&&Object.entries(n).forEach((function(n){var a=Gn(n,2),o=a[0],i=a[1];if("$schema"!==o){var l=r?"".concat(r,".").concat(o):o,s=i;if("object"==typeof i)if("array"===s.type&&s.items&&s.items.properties)t(s.items.properties,l);else if(s.properties)t(s.properties,l);else if(s.oneOf){var c,u=null==s||null===(c=s.oneOf)||void 0===c?void 0:c.map((function(e){return e.type})).join(" | ");e.push({name:o,type:u||"any",path:l})}e.push({name:o,type:s.type||"any",path:l})}}))};return t(h,""),e}),[h]);(0,r.useEffect)((function(){var e=S();v(e.flat())}),[h,S]),(0,r.useEffect)((function(){(0,jn.addCompleter)({getCompletions:function(e,t,n,r,a){a(null,y.map((function(e){return{caption:e.name,value:e.name,meta:e.type,docText:"Path: ".concat(e.path)}})))}})}),[y]);var D=(0,Mt.A)((function(e,t){try{if("{}"===e.replace(/\s/g,"").trim())return void d([]);var n=new(Mn())({allErrors:!0,jsPropertySyntax:!0,strict:!1}).compile(t),r=n(JSON.parse(e)),a=e.split("\n");if(r)d([]);else{var o=n.errors.map((function(e){var t=function(e){var t=e.split("/").filter((function(e){return""!==e||"type"!==e})),n=-1,r=!0,o=!1,i=void 0;try{for(var l,s=function(){var e=l.value;if("properties"===e||"items"===e)return"continue";if(e.match(/^([^[\]]+)/)){var r=t[t.length-2];n=a.findIndex((function(e){return e.includes(r)}))}return-1!==n?"break":void 0},c=t[Symbol.iterator]();!(r=(l=c.next()).done)&&"break"!==s();r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e.schemaPath.replace(/^#\//,"")),n=e.instancePath.split("."),r=n[n.length-1];return{startRow:t,startCol:0,endRow:t,endCol:1,className:"error",text:"type"===e.keyword||"enum"===e.keyword?"".concat(r.charAt(0).toUpperCase()+r.slice(1)," ").concat(e.message):"".concat(e.message.charAt(0).toUpperCase()+e.message.slice(1)),type:"text"}}));d(o)}}catch(e){console.error("Error parsing or validating JSON:",e)}}),300),x=function(e){var t=e.text,n=e.line;return a().createElement(s.kZS,{subtitle:t,inline:!0,title:g("errorOnLine","Error on line")+" ".concat(n+1,": "),kind:"error",lowContrast:!0,actionButtonLabel:a().createElement(s.N_E,{target:"_blank",rel:"noopener noreferrer",href:"https://json.openmrs.org/form.schema.json"},g("referenceSchema","Reference schema"))})},O=function(){k((function(e){return Math.max(e-1,0)}))},B=function(){k((function(e){return Math.min(e+1,A.length-1)}))},T=function(){var e,t;return a().createElement("div",{className:Rn.validationErrorsContainer},a().createElement(x,{text:null===(e=A[w])||void 0===e?void 0:e.text,line:null===(t=A[w])||void 0===t?void 0:t.startRow}),a().createElement("div",{className:Rn.pagination},a().createElement(zn.JG,{disabled:0===w,onClick:O,className:0===w?Rn.disabledIcon:Rn.paginationIcon}),a().createElement("div",null,w+1,"/",A.length),a().createElement(zn.c_,{disabled:w===A.length-1,onClick:B,className:w===A.length-1?Rn.disabledIcon:Rn.paginationIcon})))};return a().createElement("div",null,A.length&&_?a().createElement(T,null):null,a().createElement(Pn.Ay,{style:{height:"100vh",width:"100%",border:A.length?"3px solid #DA1E28":"none"},mode:"json",theme:"textmate",name:"schemaEditor",onChange:function(e){f(!1),k(0),c(e),D(e,b)},fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,value:u,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,displayIndentGuides:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},markers:A}))};var Vn=n(90935),Yn={};Yn.styleTagTransform=Q(),Yn.setAttributes=U(),Yn.insert=z().bind(null,"head"),Yn.domAPI=N(),Yn.insertStyleElement=H(),P()(Vn.A,Yn);const Wn=Vn.A&&Vn.A.locals?Vn.A.locals:void 0;function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function $n(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Kn(o,r,a,i,l,"next",e)}function l(e){Kn(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zn(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xn(e,t,n[t])}))}return e}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var rr=function(e){var t=e.error,n=e.title;return a().createElement(s.jeF,{className:Wn.errorNotification,kind:"error",lowContrast:!0,subtitle:null==t?void 0:t.message,title:n})};function ar(){var e=(0,l.useTranslation)().t;return a().createElement("div",{className:Wn.backButton},a().createElement(m.ConfigurableLink,{to:window.getOpenmrsSpaBase()+"form-builder"},a().createElement(s.$nd,{kind:"ghost",renderIcon:function(e){return a().createElement(d.nk,er({size:24},e))},iconDescription:"Return to dashboard"},a().createElement("span",null,e("backToDashboard","Back to dashboard")))))}const or=function(){var e=(0,l.useTranslation)().t,t=(0,i.g)().formUuid,n=(0,m.useConfig)().dataTypeToRenderingMap,o=!t,u=tr((0,r.useState)(),2),d=u[0],A=u[1],_=tr((0,r.useState)(!1),2),f=_[0],p=_[1],b=Be(t),h=b.form,g=b.formError,C=b.isLoadingForm,y=$(h),v=y.clobdata,E=y.clobdataError,w=y.isLoadingClobdata,k=tr((0,r.useState)("idle"),2),S=k[0],D=k[1],x=tr((0,r.useState)(!1),2),O=x[0],B=x[1],T=tr((0,r.useState)(d?JSON.stringify(d,null,2):""),2),I=T[0],q=T[1],F=tr((0,r.useState)([]),2),P=F[0],j=F[1],N=tr((0,r.useState)(!1),2),M=N[0],z=N[1],L=tr((0,r.useState)(!1),2),U=L[0],R=L[1],H=tr((0,r.useState)(!1),2),G=H[0],Q=H[1],V=tr((0,r.useState)([]),2),Y=V[0],W=V[1],J=tr((0,r.useState)(!1),2),K=J[0],X=J[1],Z=(0,m.useConfig)().blockRenderingWithErrors,ee=Boolean(t)&&(w||C);(0,r.useEffect)((function(){t&&(h&&Object.keys(h).length>0&&D("formLoaded"),"formLoaded"!==S||w||void 0!==v||p(!0),v&&Object.keys(v).length>0&&(D("schemaLoaded"),A(v),localStorage.setItem("formJSON",JSON.stringify(v))))}),[v,h,t,w,ee,S]),(0,r.useEffect)((function(){q(JSON.stringify(d,null,2))}),[d]);var te=(0,r.useCallback)((function(){p(!1);try{var e=localStorage.getItem("formJSON");e&&A(JSON.parse(e))}catch(e){console.error("Error fetching draft schema from localStorage: ",null==e?void 0:e.message)}}),[]),ne=(0,r.useCallback)((function(e){q(e)}),[]),re=(0,r.useCallback)((function(e){A(e),localStorage.setItem("formJSON",JSON.stringify(e))}),[]),ae=function(){var e=$n((function(){var e,t,r;return nr(this,(function(a){switch(a.label){case 0:z(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,je(d,n)];case 2:return e=tr.apply(void 0,[a.sent(),1]),t=e[0],j(t),R(!0),[3,5];case 3:return r=a.sent(),console.error("Error during form validation:",r),[3,5];case 4:return z(!1),[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),oe=(0,r.useCallback)((function(){var e={encounterType:"",name:"Sample Form",processor:"EncounterFormProcessor",referencedForms:[],uuid:"",version:"1.0",pages:[{label:"First Page",sections:[{label:"A Section",isExpanded:"true",questions:[{id:"sampleQuestion",label:"A Question of type obs that renders a text input",type:"obs",questionOptions:{rendering:"text",concept:"a-system-defined-concept-uuid"}}]},{label:"Another Section",isExpanded:"true",questions:[{id:"anotherSampleQuestion",label:"Another Question of type obs whose answers get rendered as radio inputs",type:"obs",questionOptions:{rendering:"radio",concept:"system-defined-concept-uuid",answers:[{concept:"another-system-defined-concept-uuid",label:"Choice 1",conceptMappings:[]},{concept:"yet-another-system-defined-concept-uuid",label:"Choice 2",conceptMappings:[]},{concept:"yet-one-more-system-defined-concept-uuid",label:"Choice 3",conceptMappings:[]}]}}]}]}]};q(JSON.stringify(e,null,2)),re(er({},e))}),[re]),ie=tr((0,r.useState)(""),2),le=ie[0],se=ie[1],ce=(0,r.useCallback)((function(){se("")}),[]),ue=(0,r.useCallback)((function(){ce();try{var e=JSON.parse(I);re(e),q(JSON.stringify(e,null,2))}catch(e){Zn(e,Error)&&se(e.message)}}),[I,re,ce]),de=function(){return a().createElement(s.KXP,{open:f,onClose:function(){return p(!1)},preventCloseOnClickOutside:!0},a().createElement(s.rQ0,{title:e("schemaNotFound","Schema not found")}),a().createElement(s.lVW,{onSubmit:function(e){return e.preventDefault()}},a().createElement(s.cwr,null,a().createElement("p",null,e("schemaNotFoundText","The schema originally associated with this form could not be found. A draft schema was found saved in your browser's local storage. Would you like to load it instead?")))),a().createElement(s.jlY,null,a().createElement(s.$nd,{onClick:function(){return p(!1)},kind:"secondary"},e("cancel","Cancel")),a().createElement(s.$nd,{onClick:te},a().createElement("span",null,e("loadDraft","Load draft")))))},me=(0,r.useMemo)((function(){return new Blob([JSON.stringify(d,null,2)],{type:"application/json"})}),[d]),_e=(0,r.useCallback)($n((function(){return nr(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText(I)];case 1:return e.sent(),[2]}}))})),[I]),fe=O?16:8;return a().createElement(a().Fragment,null,a().createElement(Ae,{title:e("schemaEditor","Schema editor")}),a().createElement(ar,null),a().createElement("div",{className:Wn.container},f&&a().createElement(de,null),a().createElement(s.xA9,{className:xe()(Wn.grid,Xn({},Wn.maximized,O))},a().createElement(s.VPZ,{lg:fe,md:fe,className:Wn.column},a().createElement("div",{className:Wn.actionButtons},ee?a().createElement(s.OuH,{description:e("loadingSchema","Loading schema")+"..."}):a().createElement("h1",{className:Wn.formName},null==h?void 0:h.name)),a().createElement("div",null,a().createElement("div",{className:Wn.heading},a().createElement("span",{className:Wn.tabHeading},e("schemaEditor","Schema editor")),a().createElement("div",{className:Wn.topBtns},d?null:a().createElement(s.l0C,{onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;if("string"==typeof n){var r=n,a=JSON.parse(r);A(a)}else if(Zn(n,ArrayBuffer)){var o=(new TextDecoder).decode(n),i=JSON.parse(o);A(i)}},n.readAsText(t)},labelTitle:"",labelDescription:"",buttonLabel:e("importSchema","Import schema"),buttonKind:"ghost",size:"lg",filenameStatus:"edit",accept:[".json"],multiple:!1,disabled:!1,iconDescription:e("importSchema","Import schema"),name:"form-import"}),o&&!d?a().createElement(s.$nd,{kind:"ghost",onClick:oe},e("inputDummySchema","Input dummy schema")):null,a().createElement(s.$nd,{kind:"ghost",onClick:function(){Y.length&&Z?X(!0):Y.length&&!Z?(X(!0),ue()):ue()},disabled:le},a().createElement("span",null,e("renderChanges","Render changes")))),d?a().createElement(a().Fragment,null,a().createElement(s.$nd,{enterDelayMs:300,renderIcon:O?Oe.Xj:Oe.hz,kind:"ghost",iconDescription:O?e("minimizeEditor","Minimize editor"):e("maximizeEditor","Maximize editor"),hasIconOnly:!0,size:"md",tooltipAlignment:"start",onClick:function(){B(!O)}}),a().createElement(s.i8y,{align:"top",className:"cds--btn--md",enterDelayMs:300,iconDescription:e("copySchema","Copy schema"),kind:"ghost",onClick:_e}),a().createElement("a",{download:"".concat(null==h?void 0:h.name,".json"),href:window.URL.createObjectURL(me)},a().createElement(s.$nd,{enterDelayMs:300,renderIcon:c.f5,kind:"ghost",iconDescription:e("downloadSchema","Download schema"),hasIconOnly:!0,size:"md",tooltipAlignment:"start"}))):null),g?a().createElement(rr,{error:g,title:e("formError","Error loading form metadata")}):null,E?a().createElement(rr,{error:E,title:e("schemaLoadError","Error loading schema")}):null,a().createElement("div",{className:Wn.editorContainer},a().createElement(Qn,{validationOn:K,setValidationOn:X,errors:Y,setErrors:W,isLoading:ee,onSchemaChange:ne,stringifiedSchema:I})))),a().createElement(s.VPZ,{lg:8,md:8,className:Wn.column},a().createElement(ct,{schema:d,t:e,schemaErrors:Y,setPublishedWithErrors:Q,onFormValidation:ae,setValidationResponse:j,setValidationComplete:R,isValidating:M}),U&&a().createElement(Le,{hasValidationErrors:P.length>0,publishedWithErrors:G,errorsCount:P.length}),a().createElement(s.tUM,null,a().createElement(s.wbY,{"aria-label":"Form previews"},a().createElement(s.ozo,null,e("preview","Preview")),a().createElement(s.ozo,null,e("interactiveBuilder","Interactive Builder")),h&&a().createElement(s.ozo,null,e("auditDetails","Audit Details"))),a().createElement(s.T2N,null,a().createElement(s.KpK,null,a().createElement(ht,{schema:d,isLoading:ee})),a().createElement(s.KpK,null,a().createElement(Fn,{schema:d,onSchemaChange:re,isLoading:ee,validationResponse:P})),a().createElement(s.KpK,null,h&&a().createElement(ut,{form:h,key:h.uuid}))))))))},ir=function(){return a().createElement(o.Kd,{basename:"".concat(window.spaBase,"/form-builder")},a().createElement(i.BV,null,a().createElement(i.qh,{path:"/",element:a().createElement(Se,null)}),a().createElement(i.qh,{path:"/new",element:a().createElement(or,null)}),a().createElement(i.qh,{path:"/edit/:formUuid",element:a().createElement(or,null)})))}}}]);