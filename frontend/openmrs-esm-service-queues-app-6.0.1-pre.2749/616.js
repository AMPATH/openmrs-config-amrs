"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[616],{3223:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(272),a=o.n(n),r=o(2609),i=o.n(r)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-service-queues__add-provider-queue-room__section___WHhMV{margin:.5rem}.-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__add-provider-queue-room__checkbox___VEBx1{padding-top:.75rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/add-provider-queue-room/add-provider-queue-room.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,+DACE,YCgBW,CDbb,oEE01BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFx1BF,aDLQ,CCMR,oBCeW,CDZb,gEACE,kBCWW",sourceRoot:""}]),i.locals={section:"-esm-service-queues__add-provider-queue-room__section___WHhMV",sectionTitle:"-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ",checkbox:"-esm-service-queues__add-provider-queue-room__checkbox___VEBx1"};const s=i},6616:(e,t,o)=>{o.r(t),o.d(t,{default:()=>T});var n=o(5206),a=o.n(n),r=o(4924),i=o(8855),s=o(2870),u=o(1995),l=o(3546),c=o(3670),d=o(1354),m=o.n(d),v=o(1583),p=o.n(v),_=o(7378),g=o.n(_),A=o(5993),f=o.n(A),h=o(4154),b=o.n(h),S=o(8141),y=o.n(S),q=o(3223),C={};C.styleTagTransform=y(),C.setAttributes=f(),C.insert=g().bind(null,"head"),C.domAPI=p(),C.insertStyleElement=b(),m()(q.Z,C);const E=q.Z&&q.Z.locals?q.Z.locals:void 0;var k=o(1398);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,a,r=[],i=!0,s=!1;try{for(o=o.call(e);!(i=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(e){var t=e.providerUuid,o=e.closeModal,d=(0,r.useTranslation)().t,m=(0,c.fn)(),v=(0,c.SY)(),p=(0,c.vM)(),_=(0,c.fn)(),g=(0,c.Hp)(),A=(0,l.ej)(t),f=A.providerRoom,h=(A.isLoading,R((0,n.useState)(""),2)),b=h[0],S=h[1],y=R((0,n.useState)(""),2),q=y[0],C=y[1];(0,n.useEffect)((function(){var e;(null==f?void 0:f.length)>0&&(S(null===(e=null==f?void 0:f[0].queueRoom)||void 0===e?void 0:e.uuid),C(null==f?void 0:f[0].uuid))}),[f]);var w=(0,l.ej)(t).mutate,T=(0,k.y)(v).queues,x=(0,l.dF)(v,p).rooms,I=(0,u.J)().queueLocations,Q=R((0,n.useState)(!1),2),D=Q[0],L=Q[1],B=(0,n.useCallback)((function(){b?(L(!1),(null==f?void 0:f.length)>0?(0,l.av)(q,b,t).then((function(e){200===e.status&&((0,s.showSnackbar)({isLowContrast:!0,title:d("updateRoom","Update room"),kind:"success",subtitle:d("queueRoomUpdatedSuccessfully","Queue room updated successfully")}),o(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,c.By)(new Date),w())}),(function(e){(0,s.showSnackbar)({title:d("queueRoomAddFailed","Error adding queue room"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message}),o()})):(0,l._5)(b,t).then((function(e){201===e.status&&((0,s.showSnackbar)({isLowContrast:!0,title:d("addRoom","Add room"),kind:"success",subtitle:d("queueRoomAddedSuccessfully","Queue room added successfully")}),o(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,c.By)(new Date),w())}),(function(e){(0,s.showSnackbar)({title:d("queueRoomAddFailed","Error adding queue room"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})}))):L(!0)}),[b,null==f?void 0:f.length,q,t,d,o,w]);return a().createElement("div",null,a().createElement(i.xBx,{closeModal:o,title:d("addProviderQueueRoom","Add provider queue room?")}),a().createElement(i.fef,null,a().createElement(i.l09,{onSubmit:B},a().createElement("section",{className:E.section},a().createElement("div",{className:E.sectionTitle},d("queueLocation","Queue location")),a().createElement(i.Ltx,{id:"queueLocation","aria-label":d("selectQueueLocation","Select a queue location"),type:"default",items:I,itemToString:function(e){return e?e.name:""},onChange:function(e){var t=e.selectedItem;localStorage.setItem("queueLocationUuid",t.id),localStorage.setItem("queueLocationName",t.name),(0,c.yl)(t.name),(0,c._j)(t.id)},size:"md",initialSelectedItem:{uuid:v,name:m}})),a().createElement("section",{className:E.section},a().createElement("div",{className:E.sectionTitle},d("queueService","Queue service")),a().createElement(i.Ltx,{id:"service","aria-label":d("selectService","Select a service"),type:"default",items:T,itemToString:function(e){return e?e.display:""},onChange:function(e){var t=e.selectedItem;localStorage.setItem("queueServiceName",t.name),localStorage.setItem("queueServiceUuid",t.uuid),(0,c.yk)(t.name),(0,c.u_)(t.uuid)},size:"md",initialSelectedItem:{uuid:p,display:_}})),a().createElement("section",{className:E.section},a().createElement("div",{className:E.sectionTitle},d("queueRoom","Queue room")),a().createElement("div",{className:E.filterContainer},a().createElement(i.PhF,{labelText:d("selectRoom","Select a room"),id:"service",invalidText:"Required",value:b,defaultValue:b,onChange:function(e){S(e.target.value),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString())}},b?null:a().createElement(i.QlF,{text:d("chooseRoom","Select a room"),value:""}),(null==x?void 0:x.length)>0&&x.map((function(e){return a().createElement(i.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)}))))),D&&a().createElement("section",null,a().createElement(i.K0D,{style:{margin:"0",minWidth:"100%"},kind:"error",lowContrast:!0,title:d("missingQueueRoom","Please select a queue room")})),a().createElement("section",{className:E.section},a().createElement(i.XZJ,{onChange:function(e){localStorage.setItem("isPermanentProviderQueueRoom",JSON.parse(e.target.checked)),(0,c.wE)(JSON.parse(e.target.checked))},checked:g,labelText:d("retainLocation","Retain location"),id:"retianLocation",className:E.checkbox})))),a().createElement(i.mzw,null,a().createElement(i.zxk,{kind:"secondary",onClick:o},d("cancel","Cancel")),a().createElement(i.zxk,{onClick:B},d("save","Save"))))}}}]);