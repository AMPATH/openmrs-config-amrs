"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[981],{6362:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(272),i=n.n(a),r=n(2609),o=n.n(r)()(i());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-service-queues__add-patient-toqueue-dialog__radioButtonGroup___qPnUZ{display:flex;flex-direction:column;align-items:flex-start;margin-top:.5rem;min-height:4rem;width:100%;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-service-queues__add-patient-toqueue-dialog__radioButton___V6cji{padding:.25rem .25rem;margin:.5rem 0}section{margin:.5rem}.-esm-service-queues__add-patient-toqueue-dialog__sectionTitle___MAD5_{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__add-patient-toqueue-dialog__modalBody___uxg8z{padding-bottom:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/add-patient-toqueue/add-patient-toqueue-dialog.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,yEAAA,CACA,2GAAA,CCvDF,2EACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,gBCaW,CDZX,eC+CW,CD9CX,UAAA,CEw1BE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFp1BJ,sEACE,qBAAA,CACA,cAAA,CAGF,QACE,YCCW,CDEb,uEE20BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFz0BF,aDpBQ,CCqBR,oBAAA,CAGF,oEACE,mBCCW",sourceRoot:""}]),o.locals={radioButtonGroup:"-esm-service-queues__add-patient-toqueue-dialog__radioButtonGroup___qPnUZ",radioButton:"-esm-service-queues__add-patient-toqueue-dialog__radioButton___V6cji",sectionTitle:"-esm-service-queues__add-patient-toqueue-dialog__sectionTitle___MAD5_",modalBody:"-esm-service-queues__add-patient-toqueue-dialog__modalBody___uxg8z"};const l=o},1981:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(5206),i=n.n(a),r=n(4924),o=n(8427),l=n(2870),u=n(8053),s=n(1354),c=n.n(s),d=n(1583),m=n.n(d),A=n(7378),p=n.n(A),v=n(5993),g=n.n(v),C=n(4154),_=n.n(C),h=n(8141),y=n.n(h),f=n(6362),E={};E.styleTagTransform=y(),E.setAttributes=g(),E.insert=p().bind(null,"head"),E.domAPI=m(),E.insertStyleElement=_(),c()(f.Z,E);const b=f.Z&&f.Z.locals?f.Z.locals:void 0;var q=n(1995),w=n(2312),S=n(9561);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const x=function(e){var t,n,s=e.visitDetails,c=e.closeModal,d=(0,r.useTranslation)().t,m=null==s?void 0:s.visitUuid,A=B((0,a.useState)(""),2),p=A[0],v=A[1],g=null==s?void 0:s.patientUuid,C=null==s?void 0:s.name,_=null==s?void 0:s.age,h=null==s?void 0:s.gender,y=B((0,a.useState)(""),2),f=y[0],E=y[1],k=(0,w.y)(f),x=k.queues,D=k.isLoading,T=(0,q.J)(),Q=T.queueLocations,P=T.isLoading,U=B((0,a.useState)(!1),2),F=U[0],N=U[1],z=B((0,a.useState)(!1),2),L=z[0],M=z[1],Z=(0,l.useConfig)(),W=(0,S.Q)().mutateQueueEntries,G=B((0,a.useState)(Z.concepts.defaultPriorityConceptUuid),2),Y=G[0],j=G[1],I=null!==(n=null===(t=x.find((function(e){return e.uuid===p})))||void 0===t?void 0:t.allowedPriorities)&&void 0!==n?n:[],O=(0,a.useCallback)((function(){if(p)if(M(!1),Y){N(!1);var e=Z.concepts.emergencyPriorityConceptUuid,t=Y===e?1:0,n=Z.concepts.defaultStatusConceptUuid,a=Z.visitQueueNumberAttributeUuid;(0,u.U8)(m,p,g,Y,n,t,f,a).then((function(e){201===e.status&&((0,l.showSnackbar)({isLowContrast:!0,title:d("addEntry","Add entry"),kind:"success",subtitle:d("queueEntryAddedSuccessfully","Queue Entry Added Successfully")}),c(),W())}),(function(e){(0,l.showSnackbar)({title:d("queueEntryAddFailed","Error adding queue entry status"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})}))}else N(!0);else M(!0)}),[p,Y,Z.concepts.emergencyPriorityConceptUuid,Z.concepts.defaultStatusConceptUuid,Z.visitQueueNumberAttributeUuid,m,g,f,d,c,W]);return i().createElement("div",null,i().createElement(o.xBx,{closeModal:c,title:d("addVisitToQueue","Add Visit To Queue?")}),i().createElement(o.fef,null,i().createElement(o.l09,{onSubmit:O},i().createElement("div",{className:b.modalBody},i().createElement("h5",null,C,"   ·  ",h,"   ·  ",_," ",d("years","Years"))),i().createElement("section",null,P?i().createElement(o.xNL,null):i().createElement(o.PhF,{labelText:d("selectQueueLocation","Select a queue location"),id:"location",invalidText:"Required",value:f,onChange:function(e){return E(e.target.value)}},f?null:i().createElement(o.QlF,{text:d("selectQueueLocation","Select a queue location"),value:""}),(null==Q?void 0:Q.length)>0&&Q.map((function(e){return i().createElement(o.QlF,{key:e.id,text:e.name,value:e.id},e.name)})))),i().createElement("section",{className:b.section},i().createElement("div",{className:b.sectionTitle},d("queueService","Queue service")),D?i().createElement(o.xNL,null):i().createElement(o.PhF,{labelText:d("selectService","Select a service"),id:"service",invalidText:"Required",value:p,onChange:function(e){return v(e.target.value)}},p?null:i().createElement(o.QlF,{text:d("chooseService","Select a service"),value:""}),(null==x?void 0:x.length)>0&&x.map((function(e){return i().createElement(o.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)})))),L&&i().createElement("section",null,i().createElement(o.K0D,{style:{margin:"0",minWidth:"100%"},kind:"error",lowContrast:!0,title:d("pleaseSelectService","Please select a service")})),i().createElement("section",{className:b.section},i().createElement("div",{className:b.sectionTitle},d("queueStatus","Queue status")),D?i().createElement(o.SYO,null,i().createElement(o.CMh,null),i().createElement(o.CMh,null),i().createElement(o.CMh,null)):(null==I?void 0:I.length)?i().createElement(o.SYO,{className:b.radioButtonWrapper,name:"priority",defaultSelected:Y,onChange:function(e){j(e)}},(null==I?void 0:I.length)>0&&I.map((function(e){var t=e.uuid,n=e.display;return i().createElement(o.EUY,{key:t,labelText:n,value:t})}))):i().createElement(o.K0D,{className:b.inlineNotification,kind:"error",lowContrast:!0,subtitle:d("configurePriorities","Please configure priorities to continue."),title:d("noPriorityFound","No priority found")})),F&&i().createElement("section",null,i().createElement(o.K0D,{style:{margin:"0",minWidth:"100%"},kind:"error",lowContrast:!0,title:d("missingPriority","Please select a priority")})))),i().createElement(o.mzw,null,i().createElement(o.zxk,{kind:"secondary",onClick:c},d("cancel","Cancel")),i().createElement(o.zxk,{onClick:O},d("save","Save"))))}}}]);