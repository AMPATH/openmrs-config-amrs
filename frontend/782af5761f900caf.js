"use strict";(self.webpackChunkopenmrs=self.webpackChunkopenmrs||[]).push([[448],{448:(e,n,t)=>{t.r(n),t.d(n,{run:()=>sn});var o=t(8749),r=t(521),i={bootstrap:function(){return Promise.resolve()},mount:function(){return Promise.resolve()},unmount:function(){return Promise.resolve()}};function a(e,n,t,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(o,r)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var i=e.apply(n,t);function c(e){a(i,o,r,c,s,"next",e)}function s(e){a(i,o,r,c,s,"throw",e)}c(void 0)}))}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=[];function l(e){if(Array.isArray(e)){var n=e.map(l);return function(e){return n.some((function(n){return n(e)}))}}return"string"==typeof e?(0,o.pathToActiveWhen)(window.getOpenmrsSpaBase()+e):(t=e,(null!=(r=RegExp)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](t):t instanceof r)?function(n){return function(e,n){return e.test(n.pathname.replace(window.getOpenmrsSpaBase(),""))}(e,n)}:function(){return e});var t,r}var f="startupApp",d=new Map;function p(e,n){return c((function(){var t;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(o){switch(o.label){case 0:return[4,(0,r.importDynamic)(e)];case 1:return(t=o.sent())&&Object.hasOwn(t,n)&&"function"==typeof t[n]?e in d?[3,3]:[4,d[e]=new Promise((function(e,n){if(Object.hasOwn(t,f)){var o=t[f];if("function"==typeof o)return Promise.resolve(o()).then(e).catch(n)}e(null)}))]:[3,6];case 2:return o.sent(),[3,5];case 3:return[4,d[e]];case 4:o.sent(),o.label=5;case 5:return[2,Promise.resolve(t[n]())];case 6:t&&Object.hasOwn(t,n)?console.warn("The export ".concat(n," of the app ").concat(e," is not a function")):console.warn("The app ".concat(e," does not define a component called ").concat(n,", this cannot be loaded")),o.label=7;case 7:return[2,i]}}))}))}function h(e,n){if(e&&n&&"object"==typeof n){var t,o;(0,r.registerModuleWithConfigSystem)(e);var i,a,c=null!==(o=n.extensions)&&void 0!==o?o:[],l=null!==(i=n.modals)&&void 0!==i?i:[],f=null!==(a=n.workspaces)&&void 0!==a?a:[];null===(t=n.pages)||void 0===t||t.forEach((function(n){var t,o,r;n&&"object"==typeof n&&Object.hasOwn(n,"component")&&(Object.hasOwn(n,"route")||Object.hasOwn(n,"routeRegex")||Object.hasOwn(n,"routes"))?u.push((o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),o.forEach((function(n){s(e,n,t[n])}))}return e}({},n),r=null!=(r={order:null!==(t=n.order)&&void 0!==t?t:Number.MAX_SAFE_INTEGER,appName:e})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t.push.apply(t,o)}return t}(Object(r)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})),o)):console.warn("A page for ".concat(e," could not be registered as it does not appear to have the required properties"),n)})),c.forEach((function(n){n&&"object"==typeof n&&Object.hasOwn(n,"name")&&Object.hasOwn(n,"component")?g(e,n):console.warn("An extension for ".concat(e," could not be registered as it does not appear to have the required properties"),n)})),l.forEach((function(n){n&&"object"==typeof n&&Object.hasOwn(n,"name")&&Object.hasOwn(n,"component")?function(e,n){var t=n.name;if(t)if(n.component||n.load){var o=void 0;if(n.component)o=p(e,n.component);else if(n.load){if("function"!=typeof n.load)return void console.error("The modal ".concat(t," from ").concat(e," declares a 'load' property that is not a function. This is not\nsupported, so the modal will not be loaded."));o=n.load}o&&(0,r.registerModal)({name:t,load:o,moduleName:e})}else console.error("The modal ".concat(t," from ").concat(e," is missing a 'component' entry and thus cannot be registered.\nTo fix this, ensure that you define a 'component' field inside the modal definition."),n);else console.error("A modal definition in ".concat(e,' is missing an name and thus cannot be\nregistered. To fix this, ensure that you define the "name" field inside the\nmodal definition.'),n)}(e,n):console.warn("A modal for ".concat(e," could not be registered as it does not appear to have the required properties"),n)})),f.forEach((function(n){n&&"object"==typeof n&&Object.hasOwn(n,"name")&&Object.hasOwn(n,"component")?function(e,n){var t=n.name;if(t){var o=n.title;if(o)if(n.component||n.load){var i=void 0;if(n.component)i=p(e,n.component);else if(n.load){if("function"!=typeof n.load)return void console.error("The workspace ".concat(t," from ").concat(e," declares a 'load' property that is not a function. This is not\nsupported, so the workspace will not be loaded."));i=n.load}i&&(0,r.registerWorkspace)({name:t,title:o,load:i,moduleName:e,type:n.type,canHide:n.canHide,canMaximize:n.canMaximize,width:n.width,preferredWindowSize:n.preferredWindowSize})}else console.error("The workspace ".concat(t," from ").concat(e," is missing a 'component' entry and thus cannot be registered.\nTo fix this, ensure that you define a 'component' field inside the workspace definition."),n);else console.error("A workspace definition in ".concat(e,' is missing a title and thus cannot be registered.\nTo fix this, ensure that you define the "title" field inside the workspace definition.'),n)}else console.error("A workspace definition in ".concat(e,' is missing a name and thus cannot be registered.\nTo fix this, ensure that you define the "name" field inside the workspace definition.'),n)}(e,n):console.warn("A workspace for ".concat(e," could not be registered as it does not appear to have the required properties"),n)}))}}function m(){u.sort((function(e,n){var t=e.order-n.order;return 0!=t?t:e.appName.localeCompare(n.appName,"en")}));var e=new Map,n=!0,t=!1,o=void 0;try{for(var r,i=u[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var a=r.value;e.has(a.appName)?e.set(a.appName,e.get(a.appName)+1):e.set(a.appName,0);var c=e.get(a.appName),s="".concat(a.appName,"-page-").concat(c),l=document.createElement("div");l.id="single-spa-application:".concat(s),document.body.appendChild(l),v(s,a)}}catch(e){t=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw o}}}function v(e,n){var t=void 0!==n.route?n.route:void 0!==n.routeRegex&&new RegExp(n.routeRegex);if(!1!==t)if(n.component){var r=function(e,n){var t=n.online,o=n.offline;return window.offlineEnabled?function(n){return!!(navigator.onLine&&(null==t||t)||!navigator.onLine&&null!=o&&o)&&e(n)}:e}(l(t),n),i=p(n.appName,n.component);(0,o.registerApplication)(e,i,r)}else console.warn('A registered page definition is missing a component and thus cannot be registered.\nTo fix this, ensure that you define the "component" field inside the page definition.',e);else console.warn('A registered page definition is missing a route and thus cannot be registered.\nTo fix this, ensure that you define the "route" (or alternatively the "routeRegex") field inside the extension definition.',e)}function g(e,n){var t=n.name;if(t){n.slots&&n.slot&&console.warn("The extension ".concat(t," from ").concat(e," declares both a 'slots' property and\na 'slot' property. Only the 'slots' property will be honored."));var o=n.slots?n.slots:n.slot?[n.slot]:[];if(n.component||n.load){var i,a,c=void 0;if(n.component)c=p(e,n.component);else if(n.load){if("function"!=typeof n.load)return void console.error("The extension ".concat(t," from ").concat(e," declares a 'load' property that is not a function. This is not\nsupported, so the extension will not be loaded."));c=n.load}c&&(0,r.registerExtension)({name:t,load:c,meta:n.meta||{},order:n.order,moduleName:e,privileges:n.privileges,online:null===(i=n.online)||void 0===i||i,offline:null!==(a=n.offline)&&void 0!==a&&a,featureFlag:n.featureFlag});var s=!0,u=!1,l=void 0;try{for(var f,d=o[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var h=f.value;(0,r.attach)(h,t)}}catch(e){u=!0,l=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw l}}}else console.error("The extension ".concat(t," from ").concat(e," is missing a 'component' entry and thus cannot be registered.\nTo fix this, ensure that you define a 'component' field inside the extension definition."),n)}else console.error("An extension definition in ".concat(e,' is missing an name and thus cannot be\nregistered. To fix this, ensure that you define the "name" field inside the\nextension definition.'),n)}var y=t(5928),b=t.n(y),w=t(8146),S=t(900),O=[],x=O.forEach,k=O.slice,A=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,j={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&"undefined"!=typeof document){var t=function(e){for(var n="".concat(e,"="),t=document.cookie.split(";"),o=0;o<t.length;o++){for(var r=t[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(n))return r.substring(n.length,r.length)}return null}(e.lookupCookie);t&&(n=t)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&"undefined"!=typeof document&&function(e,n,t,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*t*1e3)),o&&(r.domain=o),document.cookie=function(e,n,t){var o=t||{};o.path=o.path||"/";var r=encodeURIComponent(n),i="".concat(e,"=").concat(r);if(o.maxAge>0){var a=o.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(a))}if(o.domain){if(!A.test(o.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(o.domain)}if(o.path){if(!A.test(o.path))throw new TypeError("option path is invalid");i+="; Path=".concat(o.path)}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires=".concat(o.expires.toUTCString())}if(o.httpOnly&&(i+="; HttpOnly"),o.secure&&(i+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}(e,encodeURIComponent(n),r)}(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},T={name:"querystring",lookup:function(e){var n;if("undefined"!=typeof window){var t=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(t=window.location.hash.substring(window.location.hash.indexOf("?")));for(var o=t.substring(1).split("&"),r=0;r<o.length;r++){var i=o[r].indexOf("=");i>0&&o[r].substring(0,i)===e.lookupQuerystring&&(n=o[r].substring(i+1))}}return n}},P=null,E=function(){if(null!==P)return P;try{P="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){P=!1}return P},C={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&E()){var t=window.localStorage.getItem(e.lookupLocalStorage);t&&(n=t)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&E()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},N=null,I=function(){if(null!==N)return N;try{N="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){N=!1}return N},L={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&I()){var t=window.sessionStorage.getItem(e.lookupSessionStorage);t&&(n=t)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&I()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},D={name:"navigator",lookup:function(e){var n=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var t=0;t<navigator.languages.length;t++)n.push(navigator.languages[t]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},M={name:"htmlTag",lookup:function(e){var n,t=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return t&&"function"==typeof t.getAttribute&&(n=t.getAttribute("lang")),n}},F={name:"path",lookup:function(e){var n,t,o;if("undefined"!=typeof window){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(t=r,null!=(o=Array)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](t):t instanceof o)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof r[e.lookupFromPathIndex])return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},R={name:"subdomain",lookup:function(e){var n="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,t="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(t)return t[n]}},U=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,w.A)(this,e),this.type="languageDetector",this.detectors={},this.init(n,t)}return(0,S.A)(e,[{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return x.call(k.call(arguments,1),(function(n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t])})),e}(n,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=t,this.addDetector(j),this.addDetector(T),this.addDetector(C),this.addDetector(L),this.addDetector(D),this.addDetector(M),this.addDetector(F),this.addDetector(R)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var n=this;e||(e=this.options.order);var t=[];return e.forEach((function(e){if(n.detectors[e]){var o=n.detectors[e].lookup(n.options);o&&"string"==typeof o&&(o=[o]),o&&(t=t.concat(o))}})),this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}},{key:"cacheUserLanguage",value:function(e,n){var t=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach((function(n){t.detectors[n]&&t.detectors[n].cacheUserLanguage(e,t.options)})))}}]),e}();U.type="languageDetector";var q=t(4809),W=t(8713),_=t(7966);const z=function(){try{var e=(0,_.A)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),B=function(e,n,t){"__proto__"==n&&z?z(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t};var H=t(2329);const J=function(e,n,t){(void 0!==t&&!(0,H.A)(e[n],t)||void 0===t&&!(n in e))&&B(e,n,t)},G=function(e,n,t){for(var o=-1,r=Object(e),i=t(e),a=i.length;a--;){var c=i[++o];if(!1===n(r[c],c,r))break}return e};var Q=t(7626),$="object"==typeof exports&&exports&&!exports.nodeType&&exports,X=$&&"object"==typeof module&&module&&!module.nodeType&&module,Z=X&&X.exports===$?Q.A.Buffer:void 0,K=Z?Z.allocUnsafe:void 0;var V=t(515);const Y=function(e,n){var t,o,r=n?(t=e.buffer,o=new t.constructor(t.byteLength),new V.A(o).set(new V.A(t)),o):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var ee=t(744),ne=Object.create;const te=function(){function e(){}return function(n){if(!(0,ee.A)(n))return{};if(ne)return ne(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();var oe=t(4468),re=t(8070);var ie=t(1341),ae=t(8834),ce=t(1837),se=t(3951);var ue=t(5637),le=t(3835),fe=t(4156),de=t(4004);const pe=function(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]};var he=Object.prototype.hasOwnProperty;const me=function(e,n,t){var o=e[n];he.call(e,n)&&(0,H.A)(o,t)&&(void 0!==t||n in e)||B(e,n,t)};var ve=t(2922);var ge=Object.prototype.hasOwnProperty;const ye=function(e){if(!(0,ee.A)(e))return function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=(0,re.A)(e),t=[];for(var o in e)("constructor"!=o||!n&&ge.call(e,o))&&t.push(o);return t},be=function(e){return(0,ce.A)(e)?(0,ve.A)(e,!0):ye(e)},we=function(e){return function(e,n,t,o){var r=!t;t||(t={});for(var i=-1,a=n.length;++i<a;){var c=n[i],s=o?o(t[c],e[c],c,t,e):void 0;void 0===s&&(s=e[c]),r?B(t,c,s):me(t,c,s)}return t}(e,be(e))},Se=function(e,n,t,o,r,i,a){var c,s=pe(e,t),u=pe(n,t),l=a.get(u);if(l)J(e,t,l);else{var f=i?i(s,u,t+"",e,n,a):void 0,d=void 0===f;if(d){var p=(0,ae.A)(u),h=!p&&(0,ue.A)(u),m=!p&&!h&&(0,de.A)(u);f=u,p||h||m?(0,ae.A)(s)?f=s:(c=s,(0,se.A)(c)&&(0,ce.A)(c)?f=function(e,n){var t=-1,o=e.length;for(n||(n=Array(o));++t<o;)n[t]=e[t];return n}(s):h?(d=!1,f=function(e,n){if(n)return e.slice();var t=e.length,o=K?K(t):new e.constructor(t);return e.copy(o),o}(u,!0)):m?(d=!1,f=Y(u,!0)):f=[]):(0,fe.A)(u)||(0,ie.A)(u)?(f=s,(0,ie.A)(s)?f=we(s):(0,ee.A)(s)&&!(0,le.A)(s)||(f=function(e){return"function"!=typeof e.constructor||(0,re.A)(e)?{}:te((0,oe.A)(e))}(u))):d=!1}d&&(a.set(u,f),r(f,u,o,i,a),a.delete(u)),J(e,t,f)}},Oe=function e(n,t,o,r,i){n!==t&&G(t,(function(a,c){if(i||(i=new W.A),(0,ee.A)(a))Se(n,t,c,o,e,r,i);else{var s=r?r(pe(n,c),a,c+"",n,t,i):void 0;void 0===s&&(s=a),J(n,c,s)}}),be)};var xe=t(5905);var ke=Math.max;const Ae=z?function(e,n){return z(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:xe.A;var je=Date.now;const Te=(Pe=Ae,Ee=0,Ce=0,function(){var e=je(),n=16-(e-Ce);if(Ce=e,n>0){if(++Ee>=800)return arguments[0]}else Ee=0;return Pe.apply(void 0,arguments)});var Pe,Ee,Ce;const Ne=function(e,n){return Te(function(e,n,t){return n=ke(void 0===n?e.length-1:n,0),function(){for(var o=arguments,r=-1,i=ke(o.length-n,0),a=Array(i);++r<i;)a[r]=o[n+r];r=-1;for(var c=Array(n+1);++r<n;)c[r]=o[r];return c[n]=t(a),function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}(e,this,c)}}(e,n,xe.A),e+"")};var Ie=t(1044);const Le=(De=function(e,n,t){Oe(e,n,t)},Ne((function(e,n){var t=-1,o=n.length,r=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(r=De.length>3&&"function"==typeof r?(o--,r):void 0,i&&function(e,n,t){if(!(0,ee.A)(t))return!1;var o,r=void 0===n?"undefined":(o=n)&&"undefined"!=typeof Symbol&&o.constructor===Symbol?"symbol":typeof o;return!!("number"==r?(0,ce.A)(t)&&(0,Ie.A)(n,t.length):"string"==r&&n in t)&&(0,H.A)(t[n],e)}(n[0],n[1],i)&&(r=o<3?void 0:r,o=1),e=Object(e);++t<o;){var a=n[t];a&&De(e,a,t)}return e})));var De;function Me(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function Fe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(o=t.next()).done)&&(i.push(o.value),!n||i.length!==n);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==t.return||t.return()}finally{if(c)throw r}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return Me(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Me(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,n,t){if("function"!=typeof e.importTranslation)throw Error("Module ".concat(n," does not export an importTranslation function"));var o,r,i=e.importTranslation("./".concat(t,".json"));if(o=i,!(null!=(r=Promise)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](o):o instanceof r))throw Error("Module ".concat(n," exports an importTranslation function that does not return a promise. Did you forget to set require.context mode to 'lazy'?"));return i}(0,r.registerTranslationNamespace)("core");var Ue=t(6683),qe="@openmrs/esm-app-shell";function We(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function _e(e,n,t,o,r,i,a){try{var c=e[i](a),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(o,r)}function ze(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var i=e.apply(n,t);function a(e){_e(i,o,r,a,c,"next",e)}function c(e){_e(i,o,r,a,c,"throw",e)}a(void 0)}))}}function Be(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function He(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var Je=Symbol("openmrs_registration_promises");function Ge(){return Ge=ze((function(){var e,n,t,o,i,a,c,s,u;return He(this,(function(l){switch(l.label){case 0:for(e=document.querySelectorAll("script[type='openmrs-routes']"),n=[],t=0;t<e.length;t++)n.push(function(){var e=ze((function(e){var n,t,o;return He(this,(function(i){switch(i.label){case 0:n=void 0,i.label=1;case 1:return i.trys.push([1,5,,6]),e.textContent?(n=JSON.parse(e.textContent),[3,4]):[3,2];case 2:return e.src?[4,(0,r.openmrsFetch)(e.src)]:[3,4];case 3:n=i.sent().data,i.label=4;case 4:return[3,6];case 5:return t=i.sent(),console.error("Caught error while loading routes from ".concat(null!==(o=e.src)&&void 0!==o?o:"JSON script tag content"),t),[2,{}];case 6:return[2,Promise.resolve(null!=n?n:{})]}}))}));return function(n){return e.apply(this,arguments)}}()(e.item(t)));if((0,r.canAccessStorage)())for(o=function(e){var t=i.key(e);if(null==t?void 0:t.startsWith(r.localStorageRoutesPrefix)){var o=i.getItem(t);if(o)try{var a=JSON.parse(o);(0,r.isOpenmrsAppRoutes)(a)?n.push(Promise.resolve(Be({},t.slice(r.localStorageRoutesPrefix.length),a))):"string"==typeof a&&a.startsWith("http")?n.push((0,r.openmrsFetch)(a).then((function(e){return(0,r.isOpenmrsAppRoutes)(e.data)?Promise.resolve(Be({},t.slice(r.localStorageRoutesPrefix.length),e.data)):Promise.reject("".concat(a," did not resolve to a valid OpenmrsAppRoutes JSON object"))})).catch((function(e){throw console.warn("Failed to fetch route overrides for ".concat(t.slice(r.localStorageRoutesPrefix.length)),e),e}))):console.warn("Route override for ".concat(t.slice(r.localStorageRoutesPrefix.length)," could not be handled as it was neither a JSON object nor a URL string"),o)}catch(e){console.error("Error parsing local route override for ".concat(t),e)}}},i=window.localStorage,a=0;a<i.length;a++)o(a);return[4,Promise.allSettled(n)];case 1:return c=l.sent().filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})).filter(r.isOpenmrsRoutes).reduce((function(e,n){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),o.forEach((function(n){Be(e,n,t[n])}))}return e}({},e,n)}),{}),s=[],u=Object.entries(c).map((f=ze((function(e){var n,t,o;return He(this,(function(r){return n=function(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(o=t.next()).done)&&(i.push(o.value),!n||i.length!==n);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==t.return||t.return()}finally{if(c)throw r}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return We(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?We(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),t=n[0],o=n[1],s.push([t,o]),h(t,o),[2]}))})),function(e){return f.apply(this,arguments)})),window[Je]=Promise.all(u),window.installedModules=s,[2]}var f}))})),Ge.apply(this,arguments)}function Qe(e){return $e.apply(this,arguments)}function $e(){return($e=ze((function(e){var n,t,o,i,a,c;return He(this,(function(s){n=!0,t=!1,o=void 0;try{for(i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)c=a.value,(0,r.provide)(c.value,c.name)}catch(e){t=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw o}}return[2]}))}))).apply(this,arguments)}function Xe(){if(window.offlineEnabled){var e=navigator.onLine;(0,o.triggerAppChange)(),(0,r.dispatchConnectivityChanged)(e),(0,r.showToast)({critical:!0,description:"Connection: ".concat(e?"online":"offline"),title:"App",kind:e?"success":"warning"})}}function Ze(){return(window.i18next=b()||y,new MutationObserver((function(){window.i18next.changeLanguage(void 0).catch((function(e){return console.error("i18next failed to re-detect language",e)}))})).observe(document.documentElement,{attributeFilter:["lang"],attributes:!0}),window.i18next.on("languageChanged",(function(){document.documentElement.setAttribute("dir",window.i18next.dir())})),window.i18next.use(U).use({type:"backend",init:function(){},read:function(e,n,o){"translation"===n?o(Error("can't handle translation namespace"),null):void 0===n||void 0===e?o(Error(),null):"core"===n?Promise.all([t(5926)("./".concat(e,".json")),(0,r.getTranslationOverrides)(n)]).then((function(n){var t=Fe(n,2),r=t[0],i=t[1],a=null!=r?r:{};e in i&&(a=Le(a,i[e])),o(null,a)})).catch((function(e){o(e,null)})):(0,r.importDynamic)(n).then((function(t){return Promise.all([Re(t,n,e),(0,r.getTranslationOverrides)(n)])})).then((function(n){var t=Fe(n,2),r=t[0],i=t[1],a=null!=r?r:{};e in i&&(a=Le(a,i[e])),o(null,a)})).catch((function(e){o(e,null)}))}}).use(q.initReactI18next).init({detection:{order:["querystring","htmlTag","localStorage","navigator"],lookupQuerystring:"lang"},fallbackLng:"en",nsSeparator:!1})).catch((function(e){return console.error("Failed to initialize translations",e)})).then((function(){return(0,o.start)()}))}function Ke(e){console.error(e),function(e){var n=document.querySelector("#app-error");if(n){var t=n.content.cloneNode(!0),o=t.querySelector('[data-var="message"]');if(o&&(o.textContent=(null==e?void 0:e.message)||"No additional information available."),localStorage.getItem("openmrs:devtools")&&Object.keys(localStorage).some((function(e){return e.startsWith("import-map-override:")}))){var r=null==t?void 0:t.querySelector("#buttons");if(r){var i=document.createElement("button");i.className="cds--btn",i.innerHTML="Clear dev overrides",i.onclick=Ve,r.appendChild(i)}}document.body.appendChild(t)}}(e)}function Ve(){var e=!0,n=!1,t=void 0;try{for(var o,r=Object.keys(localStorage)[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;i.startsWith("import-map-override:")&&!["import-map-override:react","import-map-override:react-dom"].includes(i)&&localStorage.removeItem(i)}}catch(e){n=!0,t=e}finally{try{e||null==r.return||r.return()}finally{if(n)throw t}}location.reload()}function Ye(){return en.apply(this,arguments)}function en(){return(en=ze((function(){var e;return He(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,(0,r.registerOmrsServiceWorker)("".concat(window.getOpenmrsSpaBase(),"service-worker.js"))];case 1:return n.sent(),[4,(0,r.activateOfflineCapability)()];case 2:return n.sent(),3e5,t=null,o=function(e,n){var o=!t||(new Date).getTime()-t.getTime()>3e5;n&&e&&o&&(t=new Date,(0,r.dispatchPrecacheStaticDependencies)())},i=!1,a=!1,(0,r.getCurrentUser)({includeAuthStatus:!1}).subscribe((function(e){o(i,a=!!e)})),(0,r.subscribeConnectivity)((function(e){var n=e.online;i=n,o(n,a)})),[3,4];case 3:return e=n.sent(),console.error("Error while setting up offline mode.",e),(0,r.showNotification)({kind:"error",title:"Offline Setup Error",description:e.message}),[3,4];case 4:return[2]}var t,o,i,a}))}))).apply(this,arguments)}function nn(){return tn.apply(this,arguments)}function tn(){return(tn=ze((function(){var e;return He(this,(function(n){switch(n.label){case 0:return[4,on()];case 1:return n.sent(),e=new URL("".concat(window.openmrsBase).concat(r.restBaseUrl,"/session"),window.location.origin).href,[4,(0,r.messageOmrsServiceWorker)({type:"registerDynamicRoute",url:e,strategy:"network-first"})];case 2:return n.sent(),[4,(0,r.openmrsFetch)("".concat(r.restBaseUrl,"/session")).catch((function(e){return console.warn("Failed to precache the user session data from the app shell. MFs depending on this data may run into problems while offline.",e)}))];case 3:return n.sent(),[2]}}))}))).apply(this,arguments)}function on(){return rn.apply(this,arguments)}function rn(){return(rn=ze((function(){var e;return He(this,(function(n){switch(n.label){case 0:return[4,window.importMapOverrides.getCurrentPageMap()];case 1:return e=n.sent(),[4,(0,r.messageOmrsServiceWorker)({type:"onImportMapChanged",importMap:e})];case 2:return n.sent(),[2]}}))}))).apply(this,arguments)}function an(){window.addEventListener("offline",Xe),window.addEventListener("online",Xe)}function cn(){(0,r.subscribeConnectivity)((function(e){var n=e.online,t=document.querySelector("body");n?t.classList.remove("omrs-offline"):t.classList.add("omrs-offline")}))}function sn(e){var n=window.offlineEnabled,o=(0,r.renderLoadingSpinner)(document.body),i=function(e){var n=Promise.all(e.map((function(e){var n=(0,r.interpolateUrl)(e);return fetch(n).then((function(e){return e.json()})).then((function(n){return{name:e,value:n}})).catch((function(n){return console.error('Loading the config from "'.concat(e,'" failed.'),n),{name:e,value:{}}}))})));return function(){return n.then(Qe)}}(e);return(0,r.integrateBreakpoints)(),(0,r.renderToasts)(document.querySelector(".omrs-toasts-container")),(0,r.setupModals)(document.querySelector(".omrs-modals-container")),(0,r.renderInlineNotifications)(document.querySelector(".omrs-inline-notifications-container")),(0,r.renderActionableNotifications)(document.querySelector(".omrs-actionable-notifications-container")),(0,r.renderSnackbars)(document.querySelector(".omrs-snackbars-container")),(0,r.subscribeNotificationShown)(r.showNotification),(0,r.subscribeActionableNotificationShown)(r.showActionableNotification),(0,r.subscribeToastShown)(r.showToast),(0,r.subscribeSnackbarShown)(r.showSnackbar),(0,r.subscribePrecacheStaticDependencies)(nn),(0,r.setupApiModule)(),(0,r.setupHistory)(),function(){var e,n=(e={featureName:"app-shell",moduleName:qe},[{name:"breadcrumbs-widget",slot:"breadcrumbs-slot",load:(0,Ue.getAsyncLifecycle)((function(){return t.e(79).then(t.bind(t,1079))}),e),online:!0,offline:!0}]),o=!0,r=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value;g(qe,s)}}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}}(),function(){return Ge.apply(this,arguments)}().then(m).then(n?cn:void 0).then(n?an:void 0).then(i).then(Ze).catch(Ke).then(o).then(n?Ye:void 0)}}}]);