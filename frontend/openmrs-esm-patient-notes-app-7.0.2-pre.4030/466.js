"use strict";(globalThis.webpackChunk_openmrs_esm_patient_notes_app=globalThis.webpackChunk_openmrs_esm_patient_notes_app||[]).push([[466],{604:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(272),r=n.n(a),o=n(2609),s=n.n(o)()(r());s.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-notes__visit-notes-form__heading___wghwA{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-patient-notes__visit-notes-form__columnLabel___TmHhv{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-patient-notes__visit-notes-form__diagnosis___czR8d{padding:.75rem}.-esm-patient-notes__visit-notes-form__diagnosisList___FQwH4{margin-top:.25rem;background-color:#fff;max-height:14rem;overflow-y:auto;border:1px solid #e0e0e0}.-esm-patient-notes__visit-notes-form__diagnosisList___FQwH4 li:hover{background-color:#e0e0e0}.-esm-patient-notes__visit-notes-form__diagnosesText___BCPMx{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-patient-notes__visit-notes-form__emptyResults___FZkoC{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);margin-top:.25rem;color:#525252;min-height:1rem}.-esm-patient-notes__visit-notes-form__imgUploadHelperText___Kpw1u{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-patient-notes__visit-notes-form__imgThumbnailContainer___PkaKm{height:5rem;width:6rem;margin-top:.75rem}.-esm-patient-notes__visit-notes-form__imgThumbnail___Ux1aD{width:100%;height:100%;object-fit:cover}.-esm-patient-notes__visit-notes-form__button___IfUcE{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-notes__visit-notes-form__tablet___AGKXz{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-notes__visit-notes-form__desktop___XjbxY{padding:0rem}.-esm-patient-notes__visit-notes-form__headerGridRow___JT9ZC{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-patient-notes__visit-notes-form__dataGridRow___ZmeiS{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem}.-esm-patient-notes__visit-notes-form__formContainer___J7UTF{margin:1rem}.-esm-patient-notes__visit-notes-form__form___p3e80{display:flex;flex-direction:column;justify-content:space-between;height:var(--desktop-workspace-window-height)}.-esm-patient-notes__visit-notes-form__grid___eScqB{margin:0rem;padding:0rem}.-esm-patient-notes__visit-notes-form__row___wi4CQ{margin:.5rem 0rem 2.75rem}.-esm-patient-notes__visit-notes-form__skeleton___Ia9Qj{margin-top:.25rem;height:2rem}.-esm-patient-notes__visit-notes-form__errorMessage___j785L{color:#da1e28}.-esm-patient-notes__visit-notes-form__diagnosisErrorOutline___rEgVA .cds--search-input:focus{outline:2.5px solid #da1e28}.-esm-patient-notes__visit-notes-form__diagnosisErrorOutline___rEgVA .cds--search-magnifier svg{fill:#da1e28}.-esm-patient-notes__visit-notes-form__errorMessage___j785L{font-size:var(--cds-label-02-font-size, 0.875rem);font-weight:var(--cds-label-02-font-weight, 400);line-height:var(--cds-label-02-line-height, 1.28572);letter-spacing:var(--cds-label-02-letter-spacing, 0.16px);color:#da1e28;margin-top:.5rem}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__form___p3e80{height:var(--tablet-workspace-window-height)}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__row___wi4CQ{display:flex;gap:4rem}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__row___wi4CQ .cds--col-sm-1{flex-basis:30%;min-width:8rem;text-align:left}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__row___wi4CQ .cds--col-sm-3{flex-basis:70%}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__diagnosis___czR8d{padding:1rem .75rem}.omrs-breakpoint-lt-desktop .-esm-patient-notes__visit-notes-form__skeleton___Ia9Qj{height:2.5rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/notes/visit-notes-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,uDC81BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD51BF,mBAAA,CAGF,2DCy1BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CDv1BF,aDNQ,CCSV,yDACE,cAAA,CAGF,6DACE,iBAAA,CACA,qBDnBM,CCoBN,gBAAA,CACA,eAAA,CACA,wBAAA,CAGF,sEACE,wBDzBM,CC4BR,6DCo0BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDl0BF,aD3BQ,CC8BV,4DC+zBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD7zBF,iBAAA,CACA,aDjCQ,CCkCR,eAAA,CAGF,mECwzBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDtzBF,aDvCQ,CC0CV,qEACE,WAAA,CACA,UAAA,CACA,iBExBW,CF2Bb,4DACE,UAAA,CACA,WAAA,CACA,gBAAA,CAGF,sDACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,sDACE,mBAAA,CACA,qBDpEM,CCuER,uDACE,YAAA,CAGF,6DACE,oCAAA,CACA,QAAA,CAGF,2DACE,YAAA,CACA,iCAAA,CACA,iBAAA,CAGF,6DACE,WAAA,CAGF,oDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,6CAAA,CAGF,oDACE,WAAA,CACA,YAAA,CAGF,mDACE,yBAAA,CAGF,wDACE,iBAAA,CACA,WAAA,CAGF,4DACE,aD7FO,CCiGP,8FACE,2BAAA,CAIA,gGACE,YDvGG,CC4GT,4DCkuBI,iDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDhuBF,aD9GO,CC+GP,gBAAA,CAIA,gFACE,4CAAA,CAGF,+EACE,YAAA,CACA,QAAA,CAEA,8FACE,cAAA,CACA,cAAA,CACA,eAAA,CAGF,8FACE,cAAA,CAIJ,qFACE,mBAAA,CAGF,oFACE,aAAA",sourceRoot:""}]),s.locals={heading:"-esm-patient-notes__visit-notes-form__heading___wghwA",columnLabel:"-esm-patient-notes__visit-notes-form__columnLabel___TmHhv",diagnosis:"-esm-patient-notes__visit-notes-form__diagnosis___czR8d",diagnosisList:"-esm-patient-notes__visit-notes-form__diagnosisList___FQwH4",diagnosesText:"-esm-patient-notes__visit-notes-form__diagnosesText___BCPMx",emptyResults:"-esm-patient-notes__visit-notes-form__emptyResults___FZkoC",imgUploadHelperText:"-esm-patient-notes__visit-notes-form__imgUploadHelperText___Kpw1u",imgThumbnailContainer:"-esm-patient-notes__visit-notes-form__imgThumbnailContainer___PkaKm",imgThumbnail:"-esm-patient-notes__visit-notes-form__imgThumbnail___Ux1aD",button:"-esm-patient-notes__visit-notes-form__button___IfUcE",tablet:"-esm-patient-notes__visit-notes-form__tablet___AGKXz",desktop:"-esm-patient-notes__visit-notes-form__desktop___XjbxY",headerGridRow:"-esm-patient-notes__visit-notes-form__headerGridRow___JT9ZC",dataGridRow:"-esm-patient-notes__visit-notes-form__dataGridRow___ZmeiS",formContainer:"-esm-patient-notes__visit-notes-form__formContainer___J7UTF",form:"-esm-patient-notes__visit-notes-form__form___p3e80",grid:"-esm-patient-notes__visit-notes-form__grid___eScqB",row:"-esm-patient-notes__visit-notes-form__row___wi4CQ",skeleton:"-esm-patient-notes__visit-notes-form__skeleton___Ia9Qj",errorMessage:"-esm-patient-notes__visit-notes-form__errorMessage___j785L",diagnosisErrorOutline:"-esm-patient-notes__visit-notes-form__diagnosisErrorOutline___rEgVA"};const i=s},2466:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(268),r=n.n(a),o=n(3565),s=n.n(o),i=n(4924),l=n(6520),c=n(195),m=n(8883),A=n(3955),_=n(1842),d=n(5362),u=n(8871),g=n(6615),p=n(2870),f=n(9762),C=n(321),h=n.n(C),v=n(1195),y=n.n(v),E=n(3275),b=n.n(E),D=n(7162),w=n.n(D),k=n(2094),S=n.n(k),N=n(757),B=n.n(N),F=n(604),T={};T.styleTagTransform=B(),T.setAttributes=w(),T.insert=b().bind(null,"head"),T.domAPI=y(),T.insertStyleElement=S(),h()(F.Z,T);const x=F.Z&&F.Z.locals?F.Z.locals:void 0;var G=n(3255);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){z(e,t,n[t])}))}return e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}return o}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}var M=["jpeg","jpg","png","webp"],O=c.z.object({noteDate:c.z.date(),primaryDiagnosisSearch:c.z.string({required_error:"Choose at least one primary diagnosis"}),secondaryDiagnosisSearch:c.z.string().optional(),clinicalNote:c.z.string().optional(),image:c.z.any()});const U=function(e){var t,n,o,c=e.closeWorkspace,g=e.closeWorkspaceWithSavedChanges,C=e.patientUuid,h=e.promptBeforeClosing,v=(0,i.useTranslation)().t,y="tablet"===(0,p.useLayoutType)(),E=(0,p.useSession)(),b=(0,p.useConfig)(),D=(0,a.useMemo)((function(){return{patientUuid:C}}),[C]),w=b.visitNoteConfig,k=w.clinicianEncounterRole,S=w.encounterNoteTextConceptUuid,N=w.encounterTypeUuid,B=w.formConceptUuid,F=j((0,a.useState)(!1),2),T=F[0],I=F[1],z=j((0,a.useState)(!1),2),P=z[0],U=z[1],V=j((0,a.useState)(!1),2),H=V[0],W=V[1],Z=j((0,a.useState)([]),2),q=Z[0],X=Z[1],Y=j((0,a.useState)([]),2),K=Y[0],J=Y[1],$=j((0,a.useState)([]),2),ee=$[0],te=$[1],ne=j((0,a.useState)([]),2),ae=ne[0],re=ne[1],oe=j((0,a.useState)([]),2),se=oe[0],ie=oe[1],le=j((0,a.useState)(),2),ce=le[0],me=le[1],Ae=(0,A.cI)({mode:"onSubmit",resolver:(0,m.F)(O),defaultValues:{noteDate:new Date}}),_e=Ae.control,de=Ae.handleSubmit,ue=Ae.watch,ge=Ae.getValues,pe=Ae.setValue,fe=Ae.formState,Ce=fe.isDirty;(0,a.useEffect)((function(){h((function(){return Ce}))}),[Ce]);var he=ue("image"),ve=(0,f.q6)(C).mutateVisitNotes,ye=(0,f.OD)(C).mutateVisits,Ee=null==E||null===(t=E.sessionLocation)||void 0===t?void 0:t.uuid,be=null==E||null===(n=E.currentProvider)||void 0===n?void 0:n.uuid,De=function(e){var t=ue(e);t&&we(t,e)},we=(0,a.useMemo)((function(){return(0,l.Z)((function(e,t){if(e){"primaryDiagnosisSearch"===t?U(!0):"secondaryDiagnosisSearch"===t&&W(!0);var n=(0,f.Ti)(e).subscribe((function(e){"primaryDiagnosisSearch"==t?(te(e),U(!1)):"secondaryDiagnosisSearch"==t&&(re(e),W(!1))}),(function(){return(0,p.createErrorHandler)()}));return function(){n.unsubscribe()}}}),500)}),[]),ke=function(e,t){var n=Be(e);"primaryDiagnosisSearch"==t?(n.rank=1,pe("primaryDiagnosisSearch",""),te([]),X((function(e){return L(e).concat([n])}))):"secondaryDiagnosisSearch"==t&&(pe("secondaryDiagnosisSearch",""),re([]),J((function(e){return L(e).concat([n])}))),ie((function(e){return L(e).concat([n])}))},Se=function(e,t){"primaryInputSearch"==t?X(q.filter((function(t){return t.diagnosis.coded!==e.diagnosis.coded}))):"secondaryInputSearch"==t&&J(K.filter((function(t){return t.diagnosis.coded!==e.diagnosis.coded}))),ie(se.filter((function(t){return t.diagnosis.coded!==e.diagnosis.coded})))},Ne=function(e){var t=q.some((function(t){return e.uuid===t.diagnosis.coded})),n=K.some((function(t){return e.uuid===t.diagnosis.coded}));return!t&&!n},Be=function(e){return{patient:C,diagnosis:{coded:e.uuid},rank:2,certainty:"PROVISIONAL",display:e.display}},Fe=(0,a.useCallback)((function(){var e=(0,p.showModal)("capture-photo-modal",{saveFile:function(t){return pe("image",t),e(),Promise.resolve()},closeModal:function(){e()},allowedExtensions:M,multipleFiles:!1,collectDescription:!1})}),[C]),Te=(0,a.useCallback)((function(e,t){var n=e.noteDate,a=e.clinicalNote;if(I(!0),q.length){var r={encounterDatetime:s()(n).format(),form:B,patient:C,location:Ee,encounterProviders:[{encounterRole:k,provider:be}],encounterType:N,obs:a?[{concept:{uuid:S,display:""},value:a}]:[]},o=new AbortController;(0,f.aH)(o,r).then((function(e){if(201===e.status)return Promise.all(se.map((function(t,n){var a={encounter:e.data.uuid,patient:C,condition:null,diagnosis:{coded:t.diagnosis.coded},certainty:t.certainty,rank:t.rank};return(0,f.BH)(o,a)})))})).then((function(){if(e.image)return(0,p.createAttachment)(C,e.image)})).then((function(){ve(),ye(),e.image&&(0,G.JG)((function(e){return"string"==typeof e&&e.startsWith("".concat(p.restBaseUrl,"/attachment"))})),g(),(0,p.showSnackbar)({isLowContrast:!0,subtitle:v("visitNoteNowVisible","It is now visible on the Encounters page"),kind:"success",title:v("visitNoteSaved","Visit note saved")})})).catch((function(e){(0,p.createErrorHandler)(),(0,p.showSnackbar)({title:v("visitNoteSaveError","Error saving visit note"),kind:"error",isLowContrast:!1,subtitle:null==e?void 0:e.message})})).finally((function(){I(!1),o.abort()}))}else I(!1)}),[q.length,B,C,Ee,k,be,N,S,se,ve,g,v]);return r().createElement(_.l09,{className:x.form,onSubmit:de(Te,(function(e){return console.error(e)}))},y&&r().createElement(_.X2j,{className:x.headerGridRow},r().createElement(p.ExtensionSlot,{name:"visit-form-header-slot",className:x.dataGridRow,state:D})),r().createElement(_.Kqy,{className:x.formContainer,gap:2},y?r().createElement("h2",{className:x.heading},v("addVisitNote","Add a visit note")):null,r().createElement(_.X2j,{className:x.row},r().createElement(_.sgG,{sm:1},r().createElement("span",{className:x.columnLabel},v("date","Date"))),r().createElement(_.sgG,{sm:3},r().createElement(A.Qr,{name:"noteDate",control:_e,render:function(e){var t=e.field,n=t.onChange,a=t.value;return r().createElement(p.ResponsiveWrapper,null,r().createElement(_.Mtg,{dateFormat:"d/m/Y",datePickerType:"single",maxDate:(new Date).toISOString(),value:a,onChange:function(e){var t=j(e,1)[0];return n(t)}},r().createElement(_.aj6,{id:"visitDateTimePicker",labelText:v("visitDate","Visit date"),placeholder:"dd/mm/yyyy"})))}}))),r().createElement(_.X2j,{className:x.row},r().createElement(_.sgG,{sm:1},r().createElement("span",{className:x.columnLabel},v("primaryDiagnosis","Primary diagnosis"))),r().createElement(_.sgG,{sm:3},r().createElement("div",{className:x.diagnosesText,style:{marginBottom:"1.188rem"}},q&&q.length?r().createElement(r().Fragment,null,q.map((function(e,t){return r().createElement(_.Vp9,{filter:!0,key:t,onClose:function(){return Se(e,"primaryInputSearch")},style:{marginRight:"0.5rem"},type:"red"},e.display)}))):r().createElement(r().Fragment,null),K&&K.length?r().createElement(r().Fragment,null,K.map((function(e,t){return r().createElement(_.Vp9,{filter:!0,key:t,onClose:function(){return Se(e,"secondaryInputSearch")},style:{marginRight:"0.5rem"},type:"blue"},e.display)}))):r().createElement(r().Fragment,null),q&&!q.length&&K&&!K.length&&r().createElement("span",null,v("emptyDiagnosisText","No diagnosis selected — Enter a diagnosis below"))),r().createElement(_.cwH,{legendText:v("searchForPrimaryDiagnosis","Search for a primary diagnosis")},r().createElement(Q,{name:"primaryDiagnosisSearch",control:_e,labelText:v("enterPrimaryDiagnoses","Enter Primary diagnoses"),placeholder:v("primaryDiagnosisInputPlaceholder","Choose a primary diagnosis"),handleSearch:De,error:null==fe||null===(o=fe.errors)||void 0===o?void 0:o.primaryDiagnosisSearch}),r().createElement("div",null,ge("primaryDiagnosisSearch")?P?r().createElement(r().Fragment,null,r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton})):!P&&ee&&ee.length>0?r().createElement("ul",{className:x.diagnosisList},ee.map((function(e,t){if(Ne(e))return r().createElement("li",{role:"menuitem",className:x.diagnosis,key:t,onClick:function(){return ke(e,"primaryDiagnosisSearch")}},e.display)}))):r().createElement(r().Fragment,null,y?r().createElement(_.mh4,null,r().createElement(_.n9L,{className:x.emptyResults},r().createElement("span",null,v("noMatchingDiagnoses","No diagnoses found matching")," ",r().createElement("strong",null,'"',ue("primaryDiagnosisSearch"),'"')))):r().createElement(_.n9L,{className:x.emptyResults},r().createElement("span",null,v("noMatchingDiagnoses","No diagnoses found matching")," ",r().createElement("strong",null,'"',ue("primaryDiagnosisSearch"),'"')))):null)))),r().createElement(_.X2j,{className:x.row},r().createElement(_.sgG,{sm:1},r().createElement("span",{className:x.columnLabel},v("secondaryDiagnosis","Secondary diagnosis"))),r().createElement(_.sgG,{sm:3},r().createElement(_.cwH,{legendText:v("searchForSecondaryDiagnosis","Search for a secondary diagnosis")},r().createElement(Q,{name:"secondaryDiagnosisSearch",control:_e,labelText:v("enterSecondaryDiagnoses","Enter Secondary diagnoses"),placeholder:v("secondaryDiagnosisInputPlaceholder","Choose a secondary diagnosis"),handleSearch:De}),r().createElement("div",null,ge("secondaryDiagnosisSearch")?H?r().createElement(r().Fragment,null,r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton}),r().createElement(_.N2B,{className:x.skeleton})):!H&&ae&&ae.length>0?r().createElement("ul",{className:x.diagnosisList},ae.map((function(e,t){if(Ne(e))return r().createElement("li",{role:"menuitem",className:x.diagnosis,key:t,onClick:function(){return ke(e,"secondaryDiagnosisSearch")}},e.display)}))):r().createElement(p.ResponsiveWrapper,null,r().createElement(_.n9L,{className:x.emptyResults},r().createElement("span",null,v("noMatchingDiagnoses","No diagnoses found matching")," ",r().createElement("strong",null,'"',ue("secondaryDiagnosisSearch"),'"')))):null)))),r().createElement(_.X2j,{className:x.row},r().createElement(_.sgG,{sm:1},r().createElement("span",{className:x.columnLabel},v("note","Note"))),r().createElement(_.sgG,{sm:3},r().createElement(A.Qr,{name:"clinicalNote",control:_e,render:function(e){var t=e.field,n=t.onChange,a=t.onBlur,o=t.value;return r().createElement(p.ResponsiveWrapper,null,r().createElement(_.Kx8,{id:"additionalNote",rows:ce,labelText:v("clinicalNoteLabel","Write your notes"),placeholder:v("clinicalNotePlaceholder","Write any notes here"),value:o,onBlur:a,onChange:function(e){n(e);var t=Math.ceil(e.target.scrollHeight/24);me(t)}}))}}))),r().createElement(_.X2j,{className:x.row},r().createElement(_.sgG,{sm:1},r().createElement("span",{className:x.columnLabel},v("image","Image"))),r().createElement(_.sgG,{sm:3},r().createElement(_.cwH,null,r().createElement("p",{className:x.imgUploadHelperText},v("imageUploadHelperText","Upload an image or use this device's camera to capture an image")),(null==he?void 0:he.base64Content)?r().createElement(_.zxk,{style:{marginTop:"1rem"},kind:y?"ghost":"tertiary",onClick:function(){return Fe()},renderIcon:function(e){return r().createElement(d.I8,R({size:16},e))}},v("changeImage","Change image")):r().createElement(_.zxk,{style:{marginTop:"1rem"},kind:y?"ghost":"tertiary",onClick:function(){return Fe()},renderIcon:function(e){return r().createElement(u.mm,R({size:16},e))}},v("addImage","Add image")),(null==he?void 0:he.base64Content)&&"image"==(null==he?void 0:he.fileType)?r().createElement("div",{className:x.imgThumbnailContainer},r().createElement("img",{src:he.base64Content,className:x.imgThumbnail})):null)))),r().createElement(_.uVA,{className:y?x.tablet:x.desktop},r().createElement(_.zxk,{className:x.button,kind:"secondary",onClick:c},v("discard","Discard")),r().createElement(_.zxk,{className:x.button,kind:"primary",onClick:de,disabled:T,type:"submit"},v("saveAndClose","Save and close"))))};function Q(e){var t=e.name,n=e.control,o=e.labelText,s=e.placeholder,i=e.handleSearch,l=e.error,c="tablet"===(0,p.useLayoutType)(),m=(0,a.useRef)(null);return(0,a.useEffect)((function(){l&&m.current.focus()}),[l]),r().createElement(A.Qr,{name:t,control:n,render:function(e){var n,a=e.field,A=a.value,d=a.onChange,u=a.onBlur,f=e.fieldState;return r().createElement(r().Fragment,null,r().createElement(p.ResponsiveWrapper,null,r().createElement(_.olm,{ref:m,size:c?"lg":"md",id:t,labelText:o,className:l&&x.diagnosisErrorOutline,placeholder:s,renderIcon:l&&function(e){return r().createElement(g.Rr,R({fill:"red"},e))},onChange:function(e){d(e),i(t)},value:A,onBlur:u})),r().createElement("p",{className:x.errorMessage},null==f||null===(n=f.error)||void 0===n?void 0:n.message))}})}}}]);