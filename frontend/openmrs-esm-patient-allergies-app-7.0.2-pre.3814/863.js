(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[863],{5771:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var l=r(272),n=r.n(l),a=r(2609),i=r.n(a)()(n());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1{font-weight:800}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,wEACE,wBAAA,CAGF,gFACE,YAAA,CACA,kBAAA,CACA,wBAAA,CAGF,iFACE,eAAA",sourceRoot:""}]),i.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF",allergySeverityHigh:"-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1"};const A=i},5807:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var l=r(272),n=r.n(l),a=r(2609),i=r.n(a)()(n());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-tile__label___dMfkW{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-patient-allergies__allergies-tile__content____n5Gu{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:5px}.-esm-patient-allergies__allergies-tile__value___qWVfJ{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-tile.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,uDC+1BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CD71BF,aAAA,CAGF,yDC01BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDx1BF,aDLQ,CCMR,cAAA,CAGF,uDCo1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA",sourceRoot:""}]),i.locals={label:"-esm-patient-allergies__allergies-tile__label___dMfkW",content:"-esm-patient-allergies__allergies-tile__content____n5Gu",value:"-esm-patient-allergies__allergies-tile__value___qWVfJ"};const A=i},6705:(e,t,r)=>{"use strict";r.d(t,{PI:()=>a});var l=r(3255),n=r(2870);function a(e){var t,r="".concat(n.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),a=(0,l.ZP)(e?r:null,n.openmrsFetch),A=a.data,o=a.error,s=a.isLoading,c=a.isValidating,d=a.mutate,u=(null==A||null===(t=A.data)||void 0===t?void 0:t.total)>0?null==A?void 0:A.data.entry.map((function(e){var t;return null!==(t=e.resource)&&void 0!==t?t:[]})).map(i).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:A?u:null,isError:o,isLoading:s,isValidating:c,mutate:d}}function i(e){var t,r,l,n,a,i,A,o,s,c,d,u,p,m,g,y=null==e||null===(r=e.reaction[0])||void 0===r||null===(t=r.manifestation)||void 0===t?void 0:t.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null==e||null===(n=e.clinicalStatus)||void 0===n||null===(l=n.coding[0])||void 0===l?void 0:l.display,criticality:null==e?void 0:e.criticality,display:null==e||null===(i=e.code)||void 0===i||null===(a=i.coding[0])||void 0===a?void 0:a.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(A=e.recorder)||void 0===A?void 0:A.display,recorderType:null==e||null===(o=e.recorder)||void 0===o?void 0:o.type,note:null==e||null===(c=e.note)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.text,reactionToSubstance:null==e||null===(p=e.reaction[0])||void 0===p||null===(u=p.substance)||void 0===u||null===(d=u.coding[1])||void 0===d?void 0:d.display,reactionManifestations:y,reactionSeverity:null==e||null===(m=e.reaction[0])||void 0===m?void 0:m.severity,lastUpdated:null==e||null===(g=e.meta)||void 0===g?void 0:g.lastUpdated}}},9863:(e,t,r)=>{"use strict";r.r(t),r.d(t,{allergiesDashboardLink:()=>Z,allergiesDetailedSummary:()=>z,allergyTile:()=>V,importTranslation:()=>x,startupApp:()=>H});var l=r(2870),n=r(2821),a={concepts:{drugAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162552AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},environmentalAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162554AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},foodAllergenUuid:{_type:l.Type.ConceptUuid,_default:"162553AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},mildReactionUuid:{_type:l.Type.ConceptUuid,_default:"1498AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},moderateReactionUuid:{_type:l.Type.ConceptUuid,_default:"1499AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},severeReactionUuid:{_type:l.Type.ConceptUuid,_default:"1500AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},allergyReactionUuid:{_type:l.Type.ConceptUuid,_default:"162555AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},otherConceptUuid:{_type:l.Type.ConceptUuid,_default:"5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}}},i=r(7900),A=r.n(i),o=r(2779),s=r.n(o),c=r(4924),d=r(4398),u=r(8871),p=r(6705),m=r(321),g=r.n(m),y=r(1195),v=r.n(y),_=r(3275),f=r.n(_),b=r(7162),h=r.n(b),C=r(2094),E=r.n(C),O=r(757),w=r.n(O),D=r(5771),S={};S.styleTagTransform=w(),S.setAttributes=h(),S.insert=f().bind(null,"head"),S.domAPI=v(),S.insertStyleElement=E(),g()(D.Z,S);const j=D.Z&&D.Z.locals?D.Z.locals:void 0;var k=r(8697);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},l=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),l.forEach((function(t){P(e,t,r[t])}))}return e}var U=r(5807),R={};R.styleTagTransform=w(),R.setAttributes=h(),R.insert=f().bind(null,"head"),R.domAPI=v(),R.insertStyleElement=E(),g()(U.Z,R);const N=U.Z&&U.Z.locals?U.Z.locals:void 0;function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B="@openmrs/esm-patient-allergies-app",I={featureName:"patient-allergies",moduleName:B},x=r(3979);function H(){(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+/ws/rest/v1/concept.+"}),(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+/ws/rest/v1/patient/.+/allergy.+"}),(0,l.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+".concat(l.fhirBaseUrl,"/AllergyIntolerance.+")}),(0,l.defineConfigSchema)(B,a)}var L,M,z=(0,l.getSyncLifecycle)((function(e){var t=e.patient,r=(0,c.useTranslation)().t,a=r("allergyIntolerances","allergy intolerances"),i=r("allergies","Allergies"),o=(0,p.PI)(t.id),m=o.allergies,g=o.isError,y=o.isLoading,v=o.isValidating,_=(0,l.useLayoutType)(),f="tablet"===_,b="small-desktop"===_||"large-desktop"===_,h=A().useCallback((function(){return(0,n.launchPatientWorkspace)("patient-allergy-form-workspace")}),[]),C=[{key:"display",header:r("allergen","Allergen")},{key:"reactionSeverity",header:r("severityandReaction","Severity")},{key:"reaction",header:r("reaction","Reaction")},{key:"note",header:r("onsetDateAndComments","Onset date and comments")}],E=A().useMemo((function(){return null==m?void 0:m.map((function(e){var t,r;return function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r.push.apply(r,l)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}(T({},e),{reactionSeverity:{content:A().createElement("span",{className:j.allergyCriticality},e.reactionSeverity===k.I.SEVERE&&A().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},A().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),A().createElement("span",{className:s()(P({},j.allergySeverityHigh,e.reactionSeverity===k.I.SEVERE))},e.reactionSeverity))},lastUpdated:e.lastUpdated?(0,l.formatDate)((0,l.parseDate)(e.lastUpdated),{time:!1}):"--",reaction:null===(t=e.reactionManifestations)||void 0===t?void 0:t.join(", "),note:null!==(r=null==e?void 0:e.note)&&void 0!==r?r:"--"})}))}),[m]);return y?A().createElement(d.gqd,{role:"progressbar",compact:b,zebra:!0}):g?A().createElement(n.ErrorState,{error:g,headerTitle:i}):(null==m?void 0:m.length)?A().createElement("div",{className:j.widgetCard},A().createElement(n.CardHeader,{title:i},A().createElement("span",null,v?A().createElement(d.lSo,null):null),A().createElement(d.zxk,{kind:"ghost",renderIcon:function(e){return A().createElement(u.mm,T({size:16},e))},iconDescription:"Add allergies",onClick:h},r("add","Add"))),A().createElement(d.wQF,{rows:E,headers:C,isSortable:!0,useZebraStyles:!0,size:f?"lg":"sm"},(function(e){var t=e.rows,r=e.headers,l=e.getHeaderProps,n=e.getTableProps;return A().createElement(d.xJi,null,A().createElement(d.iA_,T({"aria-label":"allergies summary"},n()),A().createElement(d.ssF,null,A().createElement(d.SCH,null,r.map((function(e){var t,r;return A().createElement(d.xDH,T({className:s()(j.productiveHeading01,j.text02)},l({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})))),A().createElement(d.RMI,null,t.map((function(e){return A().createElement(d.SCH,{key:e.id},e.cells.map((function(e){var t,r;return A().createElement(d.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))})))))}))):A().createElement(n.EmptyState,{displayText:a,headerTitle:i,launchForm:h})}),I),Z=(0,l.getSyncLifecycle)((0,n.createDashboardLink)((L=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},l=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),l.forEach((function(t){F(e,t,r[t])}))}return e}({},{slot:"patient-chart-allergies-dashboard-slot",columns:1,path:"Allergies",title:"Allergies"}),M=null!=(M={moduleName:B})?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(M)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);r.push.apply(r,l)}return r}(Object(M)).forEach((function(e){Object.defineProperty(L,e,Object.getOwnPropertyDescriptor(M,e))})),L)),I);(0,n.registerWorkspace)({name:"patient-allergy-form-workspace",title:(0,l.translateFrom)(B,"recordNewAllergy","Record a new allergy"),load:(0,l.getAsyncLifecycle)((function(){return Promise.all([r.e(940),r.e(198),r.e(489)]).then(r.bind(r,8238))}),I),type:"form"});var V=(0,l.getSyncLifecycle)((function(e){var t=e.patientUuid,r=(0,c.useTranslation)().t,l=(0,p.PI)(t),n=l.allergies;return l.isLoading?A().createElement(d.lSo,{role:"progressbar",description:"".concat(r("loading","Loading")," ...")}):(null==n?void 0:n.length)?A().createElement("div",null,A().createElement("p",{className:N.label},r("allergies","Allergies")),A().createElement("p",{className:N.content},A().createElement("span",{className:N.value},null==n?void 0:n.map((function(e){return null==e?void 0:e.display})).join(", ")))):A().createElement("div",null,A().createElement("p",{className:N.label},r("allergies","Allergies")),A().createElement("p",{className:N.content},"--"))}),I)},8697:(e,t,r)=>{"use strict";var l,n;r.d(t,{H:()=>n,I:()=>l}),function(e){e.MILD="mild",e.MODERATE="moderate",e.SEVERE="severe"}(l||(l={})),function(e){e.DRUG="DRUG",e.FOOD="FOOD",e.ENVIRONMENT="ENVIRONMENT",e.OTHER="OTHER"}(n||(n={}))},3979:(e,t,r)=>{var l={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807],"./zh.json":[8271,271],"./zh_CN.json":[1644,644]};function n(e){if(!r.o(l,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=l[e],n=t[0];return r.e(t[1]).then((()=>r(n)))}n.keys=()=>Object.keys(l),n.id=3979,e.exports=n}}]);