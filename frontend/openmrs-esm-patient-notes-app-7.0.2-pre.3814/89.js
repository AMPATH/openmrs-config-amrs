(globalThis.webpackChunk_openmrs_esm_patient_notes_app=globalThis.webpackChunk_openmrs_esm_patient_notes_app||[]).push([[89],{1368:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-notes__notes-overview__widgetCard___birMz{border:1px solid #e0e0e0}.-esm-patient-notes__notes-overview__expandedRow___v_Gc7>td{padding-left:2.5rem !important}.-esm-patient-notes__notes-overview__expandedRow___v_Gc7>td>div{max-height:max-content !important}.-esm-patient-notes__notes-overview__expandedRow___v_Gc7 th[colspan] td[colspan]>div:first-child{padding:0 1rem}.-esm-patient-notes__notes-overview__copy___ZJPsO{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);display:flex;flex-direction:column}.-esm-patient-notes__notes-overview__container___n8apy{margin:.5rem}.-esm-patient-notes__notes-overview__metadata___sFTBw{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252;margin:.5rem 0}.-esm-patient-notes__notes-overview__hiddenRow___zo2KM{display:none}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/notes/notes-overview.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,wDACE,wBAAA,CAGF,4DACE,8BAAA,CAGF,gEACE,iCAAA,CAGF,iGACE,cAAA,CAGF,kDC80BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD30BF,YAAA,CACA,qBAAA,CAGF,uDACE,YAAA,CAGF,sDCm0BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDj0BF,aD5BQ,CC6BR,cAAA,CAGF,uDACE,YAAA",sourceRoot:""}]),a.locals={widgetCard:"-esm-patient-notes__notes-overview__widgetCard___birMz",expandedRow:"-esm-patient-notes__notes-overview__expandedRow___v_Gc7",copy:"-esm-patient-notes__notes-overview__copy___ZJPsO",container:"-esm-patient-notes__notes-overview__container___n8apy",metadata:"-esm-patient-notes__notes-overview__metadata___sFTBw",hiddenRow:"-esm-patient-notes__notes-overview__hiddenRow___zo2KM"};const s=a},3089:(e,t,n)=>{"use strict";n.r(t),n.d(t,{importTranslation:()=>X,notesOverview:()=>te,startupApp:()=>ee,visitNotesActionButton:()=>ne,visitNotesForm:()=>re});var r=n(2870),o={visitNoteConfig:{clinicianEncounterRole:{_type:r.Type.UUID,_default:"240b26f9-dd88-4172-823d-4a8bfeb7841f"},visitDiagnosesConceptUuid:{_type:r.Type.ConceptUuid,_default:"159947AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},encounterNoteTextConceptUuid:{_type:r.Type.ConceptUuid,_default:"162169AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},encounterTypeUuid:{_type:r.Type.UUID,_default:"d7151f82-c1f3-4152-a605-2f9ea7414a79"},formConceptUuid:{_type:r.Type.ConceptUuid,_default:"c75f120a-04ec-11e3-8780-2b40bef9a44b"}}},i=n(268),a=n.n(i),s=n(4924),c=n(1842),l=n(8871),u=n(2821),p=n(9762),d=n(2779),f=n.n(d),v=n(5598),m=n(9523),y=n(5660);const h=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e};var A=n(2198);var b=n(3282);const _=(g=function(e,t){return e&&h(e,t,A.Z)},function(e,t){if(null==e)return e;if(!(0,b.Z)(e))return g(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e});var g;var w=n(3225),C=n(2758);const E=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=(0,C.Z)(e),a=void 0!==t,s=null===t,c=t==t,l=(0,C.Z)(t);if(!s&&!l&&!i&&e>t||i&&a&&c&&!s&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!c)return-1}return 0};var O=n(9930),S=n(7885);const T=function(e,t,n){t=t.length?(0,v.Z)(t,(function(e){return(0,S.Z)(e)?function(t){return(0,m.Z)(t,1===e.length?e[0]:e)}:e})):[O.Z];var r=-1;t=(0,v.Z)(t,(0,w.Z)(y.Z));var o=function(e,t){var n=-1,r=(0,b.Z)(e)?Array(e.length):[];return _(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}(e,(function(e,n,o){return{criteria:(0,v.Z)(t,(function(t){return t(e)})),index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(o,(function(e,t){return function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var c=E(o[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))},D=function(e,t,n,r){return null==e?[]:((0,S.Z)(t)||(t=null==t?[]:[t]),n=r?void 0:n,(0,S.Z)(n)||(n=null==n?[]:[n]),T(e,t,n))};var P=n(321),j=n.n(P),x=n(1195),k=n.n(x),N=n(3275),z=n.n(N),U=n(7162),F=n.n(U),R=n(2094),Z=n.n(R),L=n(757),B=n.n(L),I=n(1368),G={};G.styleTagTransform=B(),G.setAttributes=F(),G.insert=z().bind(null,"head"),G.domAPI=k(),G.insertStyleElement=Z(),j()(I.Z,G);const V=I.Z&&I.Z.locals?I.Z.locals:void 0;function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){H(e,t,n[t])}))}return e}const W=function(e){var t,n,o=e.notes,l=e.pageSize,p=e.pageUrl,d=e.urlLabel,v=(0,s.useTranslation)().t,m="tablet"===(0,r.useLayoutType)(),y=(t=(0,i.useState)({key:"",order:"none"}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=y[0],A=y[1],b=[{key:"encounterDate",header:v("date","Date")},{key:"diagnoses",header:v("diagnoses","Diagnoses")}],_=h.key,g=h.order,w="encounterDate"===_?function(e,t){return D(e,[function(e){return new Date(e.encounterDate).getTime()}],"ASC"===t?["desc"]:["asc"])}(o,g):D(o,[_],"DESC"===g?["desc"]:["asc"]),C=(0,r.usePagination)(w,l),E=C.results,O=C.goTo,S=C.currentPage,T=a().useMemo((function(){return null==E?void 0:E.map((function(e){return t=q({},e),n=null!=(n={id:"".concat(e.id),encounterDate:(0,r.formatDate)((0,r.parseDate)(e.encounterDate),{mode:"wide"}),diagnoses:e.diagnoses?e.diagnoses:"--"})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n}))}),[E]);return a().createElement(a().Fragment,null,a().createElement(c.wQF,{rows:T,sortRow:function(e,t,n){var r=n.sortDirection,o=(n.sortStates,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["sortDirection","sortStates"]).key);A({key:o,order:r})},headers:b,isSortable:!0,size:m?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,o=e.getExpandHeaderProps,i=e.getTableProps,s=e.getTableContainerProps,l=e.getHeaderProps,u=e.getRowProps;return a().createElement(c.xJi,s,a().createElement(c.iA_,i(),a().createElement(c.ssF,null,a().createElement(c.SCH,null,a().createElement(c.MOD,q({enableToggle:!0},o())),n.map((function(e,t){return a().createElement(c.xDH,q({key:t,className:f()(V.productiveHeading01,V.text02)},l({header:e})),e.header)})))),a().createElement(c.RMI,null,t.map((function(e,t){var o,i,s,l,p;return a().createElement(a().Fragment,{key:e.id},a().createElement(c.RcE,u({row:e}),e.cells.map((function(e){return a().createElement(c.pj1,{key:e.id},e.value)}))),e.isExpanded?a().createElement(c.WdL,{className:V.expandedRow,colSpan:n.length+1},a().createElement("div",{className:V.container,key:t},(null==T||null===(o=T[t])||void 0===o?void 0:o.encounterNote)?a().createElement("div",{className:V.copy},a().createElement("span",{className:V.content},null==T||null===(i=T[t])||void 0===i?void 0:i.encounterNote),a().createElement("span",{className:V.metadata},(0,r.formatTime)(new Date(null==T||null===(s=T[t])||void 0===s?void 0:s.encounterNoteRecordedAt))," Â·"," ",null==T||null===(l=T[t])||void 0===l?void 0:l.encounterProvider,", ",null==T||null===(p=T[t])||void 0===p?void 0:p.encounterProviderRole)):a().createElement("span",{className:V.copy},v("noVisitNoteToDisplay","No visit note to display")))):a().createElement(c.WdL,{className:V.hiddenRow,colSpan:n.length+2}))})))))})),a().createElement(u.PatientChartPagination,{pageNumber:S,totalItems:o.length,currentItems:E.length,pageSize:l,onPageNumberChange:function(e){var t=e.page;return O(t)},dashboardLinkUrl:p,dashboardLinkLabel:d}))};function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const J=function(e){var t=e.patientUuid,n=e.pageSize,o=e.urlLabel,i=e.pageUrl,d=(0,s.useTranslation)().t,f=(0,r.useVisit)(t).currentVisit,v=d("visitNotes","Visit notes"),m=d("visitNotes","Visit notes"),y=(0,p.q6)(t),h=y.visitNotes,A=y.isError,b=y.isLoading,_=y.isValidating,g=(0,r.useLayoutType)(),w="large-desktop"===g||"small-desktop"===g,C=a().useCallback((function(){f?(0,u.launchPatientWorkspace)("visit-notes-form-workspace"):(0,u.launchStartVisitPrompt)()}),[f]);return b?a().createElement(c.gqd,{role:"progressbar",compact:w,zebra:!0}):A?a().createElement(u.ErrorState,{error:A,headerTitle:m}):(null==h?void 0:h.length)?a().createElement("div",{className:V.widgetCard},a().createElement(u.CardHeader,{title:m},a().createElement("span",null,_?a().createElement(c.lSo,null):null),a().createElement(c.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(l.mm,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}({size:16},e))},iconDescription:"Add visit note",onClick:C},d("add","Add"))),a().createElement(W,{notes:h,pageSize:n,urlLabel:o,pageUrl:i})):a().createElement(u.EmptyState,{displayText:v,headerTitle:m,launchForm:C})};var K=n(1174);var Q="@openmrs/esm-patient-notes-app",$={featureName:"patient-notes",moduleName:Q},X=n(3979);function ee(){(0,r.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+/ws/rest/v1/encounter.+"}),(0,r.defineConfigSchema)(Q,o)}var te=(0,r.getSyncLifecycle)((function(e){var t=e.patientUuid,n=e.patient,r=(e.basePath,(0,s.useTranslation)().t),o="${openmrsSpaBase}/patient/".concat(n.id,"/chart/Forms & Notes"),i=r("seeAll","See all");return a().createElement(J,{patientUuid:t,pageSize:5,urlLabel:i,pageUrl:o})}),$),ne=(0,r.getSyncLifecycle)((function(){var e=(0,s.useTranslation)().t,t=(0,u.useLaunchWorkspaceRequiringVisit)("visit-notes-form-workspace");return a().createElement(u.SiderailNavButton,{name:"visit-note-nav-button",getIcon:function(e){return a().createElement(K.Gm,e)},label:e("visitNote","Visit note"),iconDescription:e("note","Note"),handler:t,type:"visit-note"})}),$),re=(0,u.registerWorkspace)({name:"visit-notes-form-workspace",load:(0,r.getAsyncLifecycle)((function(){return Promise.all([n.e(271),n.e(466)]).then(n.bind(n,2466))}),$),title:(0,r.translateFrom)(Q,"visitNoteWorkspaceTitle","Visit Note"),type:"visit-note",canHide:!0})},9762:(e,t,n)=>{"use strict";n.d(t,{Ti:()=>U,BH:()=>R,aH:()=>F,q6:()=>z});var r=n(3255);function o(e){return"function"==typeof e}var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var u,p=((u=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),u.prototype.constructor=u,u);function d(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var f=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=s(a),d=u.next();!d.done;d=u.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else a.remove(this);var f=this.initialTeardown;if(o(f))try{f()}catch(e){i=e instanceof p?e.errors:[e]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var y=s(m),h=y.next();!h.done;h=y.next()){var A=h.value;try{v(A)}catch(e){i=null!=i?i:[],e instanceof p?i=l(l([],c(i)),c(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}}if(i)throw new p(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)v(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&d(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&d(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function v(e){o(e)?e():e.unsubscribe()}f.EMPTY;var m=null,y=null,h=!1,A=!1,b={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=b.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,l([e,t],c(n))):setTimeout.apply(void 0,l([e,t],c(n)))},clearTimeout:function(e){var t=b.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function _(){}var g=w("C",void 0,void 0);function w(e,t,n){return{kind:e,value:t,error:n}}var C=function(e){function t(t){var n,r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,((n=t)instanceof f||n&&"closed"in n&&o(n.remove)&&o(n.add)&&o(n.unsubscribe))&&t.add(r)):r.destination=j,r}return a(t,e),t.create=function(e,t,n){return new T(e,t,n)},t.prototype.next=function(e){this.isStopped?P(function(e){return w("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?P(w("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?P(g,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(f),E=Function.prototype.bind;function O(e,t){return E.call(e,t)}var S=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){D(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){D(e)}else D(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){D(e)}},e}(),T=function(e){function t(t,n,r){var i,a,s=e.call(this)||this;return o(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&A?((a=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&O(t.next,a),error:t.error&&O(t.error,a),complete:t.complete&&O(t.complete,a)}):i=t,s.destination=new S(i),s}return a(t,e),t}(C);function D(e){h||function(e){b.setTimeout((function(){if(!m)throw e;m(e)}))}(e)}function P(e,t){var n=y;n&&b.setTimeout((function(){return n(e,t)}))}var j={closed:!0,next:_,error:function(e){throw e},complete:_},x=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return a(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(C);function k(e,t){return n=function(n,r){var o=0;n.subscribe(new x(r,(function(n){r.next(e.call(t,n,o++))}),void 0,void 0,void 0))},function(e){if(function(e){return o(null==e?void 0:e.lift)}(e))return e.lift((function(e){try{return n(e,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")};var n}var N=n(2870);function z(e){var t,n,o,i=(0,N.useConfig)().visitNoteConfig,a=i.encounterNoteTextConceptUuid,s=i.visitDiagnosesConceptUuid,c="/ws/rest/v1/encounter?patient=".concat(e,"&obs=").concat(s,"&v=").concat("custom:(uuid,display,encounterDatetime,patient,obs,encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display))),diagnoses"),l=(0,r.ZP)(c,N.openmrsFetch),u=l.data,p=l.error,d=l.isLoading,f=l.isValidating,v=l.mutate,m=null==u||null===(o=u.data)||void 0===o||null===(n=o.results)||void 0===n||null===(t=n.map((function(e,t){var n,r,o,i,s,c,l;return{id:"".concat(t),diagnoses:e.diagnoses.map((function(e){return e.display})).filter((function(e){return e})).join(", "),encounterDate:e.encounterDatetime,encounterNote:null===(n=e.obs.find((function(e){return e.concept.uuid===a})))||void 0===n?void 0:n.value,encounterNoteRecordedAt:null===(r=e.obs.find((function(e){return e.concept.uuid===a})))||void 0===r?void 0:r.obsDatetime,encounterProvider:null==e||null===(s=e.encounterProviders[0])||void 0===s||null===(i=s.provider)||void 0===i||null===(o=i.person)||void 0===o?void 0:o.display,encounterProviderRole:null==e||null===(l=e.encounterProviders[0])||void 0===l||null===(c=l.encounterRole)||void 0===c?void 0:c.display}})))||void 0===t?void 0:t.sort((function(e,t){return new Date(t.encounterDate).getTime()-new Date(e.encounterDate).getTime()}));return{visitNotes:u?m:null,isError:p,isLoading:d,isValidating:f,mutateVisitNotes:v}}function U(e){return(0,N.openmrsObservableFetch)("/ws/rest/v1/concept?q=".concat(e,"&searchType=fuzzy&class=8d4918b0-c2cc-11de-8d13-0010c6dffd0f&q=&v=custom:(uuid,display)")).pipe(k((function(e){return e.data.results})))}function F(e,t){return(0,N.openmrsFetch)("/ws/rest/v1/encounter",{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}function R(e,t){return(0,N.openmrsFetch)("/ws/rest/v1/patientdiagnoses",{headers:{"Content-Type":"application/json"},method:"POST",body:t})}},3979:(e,t,n)=>{var r={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807],"./zh.json":[8271,384],"./zh_CN.json":[1644,644]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n(o)))}o.keys=()=>Object.keys(r),o.id=3979,e.exports=o}}]);