"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[149],{2202:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(272),i=n.n(r),u=n(2609),s=n.n(u)()(i());s.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-service-queues__transition-dialogs__radioButtonGroup___PY3t_{display:flex;flex-direction:column;align-items:flex-start;margin-top:.5rem;min-height:4rem;width:100%;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-service-queues__transition-dialogs__radioButton___rQaY8{padding:.25rem .25rem;margin:.5rem 0}section{margin:.5rem}.-esm-service-queues__transition-dialogs__sectionTitle___dL0sK{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__transition-dialogs__modalBody___uYZmL{padding-bottom:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/queue-table/transitions/transition-dialogs.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,mEACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,gBCaW,CDZX,eC+CW,CD9CX,UAAA,CEw1BE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFp1BJ,8DACE,qBAAA,CACA,cAAA,CAGF,QACE,YCCW,CDEb,+DE20BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFz0BF,aDpBQ,CCqBR,oBAAA,CAGF,4DACE,mBCCW",sourceRoot:""}]),s.locals={radioButtonGroup:"-esm-service-queues__transition-dialogs__radioButtonGroup___PY3t_",radioButton:"-esm-service-queues__transition-dialogs__radioButton___rQaY8",sectionTitle:"-esm-service-queues__transition-dialogs__sectionTitle___dL0sK",modalBody:"-esm-service-queues__transition-dialogs__modalBody___uYZmL"};const a=s},4149:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(8855),i=n(5206),u=n.n(i),s=n(4924),a=n(2312),o=n(1354),l=n.n(o),c=n(1583),d=n.n(c),m=n(7378),A=n.n(m),p=n(5993),f=n.n(p),y=n(4154),v=n.n(y),g=n(8141),_=n.n(g),b=n(2202),C={};C.styleTagTransform=_(),C.setAttributes=f(),C.insert=A().bind(null,"head"),C.domAPI=d(),C.insertStyleElement=v(),l()(b.Z,C);const h=b.Z&&b.Z.locals?b.Z.locals:void 0;var E=n(2870),w=n(3255);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}function B(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,u=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(u.push(r.value),!t||u.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const k=function(e){var t,n=e.queueEntry,o=e.closeModal,l=(0,s.useTranslation)().t,c=(t=(0,w.kY)().mutate,{mutateQueueEntries:function(){return t((function(e){return"string"==typeof e&&e.startsWith("".concat(E.restBaseUrl,"/queue-entry"))}))}}).mutateQueueEntries,d=O((0,i.useState)({selectedQueue:n.queue.uuid,selectedPriority:n.priority.uuid,selectedStatus:n.status.uuid}),2),m=d[0],A=d[1],p=(0,a.y)().queues,f=O((0,i.useState)(!1),2),y=f[0],v=f[1],g=p.find((function(e){return e.uuid==m.selectedQueue})),_=null==g?void 0:g.allowedStatuses,b=g&&0==_.length,C=null==g?void 0:g.allowedPriorities,S=g&&0==C.length,q=C.findIndex((function(e){return e.uuid==m.selectedPriority}));return u().createElement("div",null,u().createElement(r.l09,{onSubmit:function(e){var t;e.preventDefault(),v(!0),(t={queueEntryToTransition:n.uuid,newQueue:m.selectedQueue,newStatus:m.selectedStatus,newPriority:m.selectedPriority},(0,E.openmrsFetch)("".concat(E.restBaseUrl,"/queue-entry-transition"),{method:"POST",headers:{"Content-Type":"application/json"},signal:void 0,body:t})).then((function(e){if(200!==e.status)throw{message:l("unexpectedServerResponse","Unexpected Server Response")};(0,E.showSnackbar)({isLowContrast:!0,title:l("queueEntryTransitioned","Queue entry transitioned"),kind:"success",subtitle:l("queueEntryTransitionedSuccessfully","Queue entry transitioned successfully")}),c(),o()})).catch((function(e){(0,E.showSnackbar)({title:l("queueEntryTransitionFailed","Error transitioning queue entry"),kind:"error",subtitle:null==e?void 0:e.message})})).finally((function(){v(!1)}))}},u().createElement(r.xBx,{closeModal:o,title:l("transitionPatient","Transition patient")}),u().createElement(r.fef,null,u().createElement("div",{className:h.modalBody},u().createElement(r.Kqy,{gap:4},u().createElement("h5",null,n.display),u().createElement("p",null,l("transitionPatientStatusOrQueue","Select a new status or queue for patient to transition to.")),u().createElement("section",{className:h.section},u().createElement("div",{className:h.sectionTitle},l("serviceQueue","Service queue")),u().createElement(r.PhF,{labelText:l("selectQueue","Select a queue"),id:"queue",invalidText:"Required",value:m.selectedQueue,onChange:function(e){return function(e){var t,n,r=p.find((function(t){return t.uuid==e})),i=r.allowedStatuses,u=r.allowedPriorities,s=i.find((function(e){return e.uuid==m.selectedStatus})),a=u.find((function(e){return e.uuid==m.selectedPriority}));A({selectedQueue:e,selectedStatus:s?m.selectedStatus:null===(t=i[0])||void 0===t?void 0:t.uuid,selectedPriority:a?m.selectedPriority:null===(n=u[0])||void 0===n?void 0:n.uuid})}(e.target.value)}},null==p?void 0:p.map((function(e){var t=e.uuid,i=e.display;return u().createElement(r.QlF,{key:t,text:t==n.queue.uuid?l("currentValueFormatted","{{value}} (Current)",{value:i}):i,value:t})})))),u().createElement("section",null,u().createElement("div",{className:h.sectionTitle},l("queueStatus","Queue status")),b?u().createElement(r.K0D,{kind:"error",lowContrast:!0,subtitle:l("configureStatus","Please configure status to continue."),title:l("noStatusConfigured","No status configured")}):u().createElement(r.SYO,{name:"status",valueSelected:m.selectedStatus,onChange:function(e){var t;t=e,A(B(P({},m),{selectedStatus:t}))}},null==_?void 0:_.map((function(e){var t=e.uuid,i=e.display;return u().createElement(r.EUY,{key:t,name:i,labelText:t==n.status.uuid?l("currentValueFormatted","{{value}} (Current)",{value:i}):i,value:t})})))),u().createElement("section",{className:h.section},u().createElement("div",{className:h.sectionTitle},l("queuePriority","Queue priority")),S?u().createElement(r.K0D,{className:h.inlineNotification,kind:"error",lowContrast:!0,subtitle:l("configurePriorities","Please configure priorities to continue."),title:l("noPrioritiesConfigured","No priorities configured")}):u().createElement(r.GHR,{size:"sm",selectedIndex:q,onChange:function(e){var t;t=e.name,A(B(P({},m),{selectedPriority:t}))}},null==C?void 0:C.map((function(e){var t=e.uuid,i=e.display;return u().createElement(r.rsf,{role:"radio",name:t,text:t==n.priority.uuid?l("currentValueFormatted","{{value}} (Current)",{value:i}):i,key:t,value:t})}))))))),u().createElement(r.mzw,null,u().createElement(r.zxk,{kind:"secondary",onClick:o},l("cancel","Cancel")),u().createElement(r.zxk,{disabled:y||m.selectedQueue==n.queue.uuid&&m.selectedStatus==n.status.uuid,type:"submit"},l("transitionPatient","Transition patient")))))}}}]);