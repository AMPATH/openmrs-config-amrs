"use strict";(globalThis.webpackChunk_ohri_openmrs_esm_ohri_pmtct=globalThis.webpackChunk_ohri_openmrs_esm_ohri_pmtct||[]).push([[547],{7408:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{bL:()=>l,bo:()=>c,bq:()=>f,fX:()=>o,g3:()=>d,g9:()=>p,lP:()=>s});var a=n(2870);n(8821);var i="/ws/rest/v1/";function o(e){return(0,a.openmrsFetch)("/ws/rest/v1/idgen/identifiersource/".concat(e,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:{}})}function u(e){return(0,a.openmrsFetch)("/ws/rest/v1/patient",{headers:{"Content-Type":"application/json"},method:"POST",body:e})}function c(e){return Promise.all(e.map((function(e){return u(e)})))}function l(e){return(0,a.openmrsFetch)("/ws/rest/v1/relationship",{headers:{"Content-Type":"application/json"},method:"POST",body:e})}function s(e){return(0,a.openmrsFetch)("".concat(i,"/patient/").concat(e,"/identifier")).then((function(e){var t=e.data;return t.results.length?t.results:null}))}function d(e,t){return(0,a.openmrsFetch)("".concat(i,"patient/").concat(t,"/identifier"),{headers:{"Content-Type":"application/json"},method:"POST",body:e})}function p(e){return(0,a.openmrsFetch)("".concat(i,"patient?identifier=").concat(e,"&v=custom:(identifiers:(identifier,identifierType:(uuid,display)),person:(uuid,display))")).then((function(e){return e.data||null}))}function f(e,t,n){var r="patient=".concat(e,"&code=").concat(t).concat(n?"&encounter.type=".concat(n):"");return r+="&_sort=-_lastUpdated&_count=1",(0,a.openmrsFetch)("/ws/fhir2/R4/Observation?".concat(r)).then((function(e){var t,n,r=e.data;return(null===(t=r.entry)||void 0===t?void 0:t.length)?null===(n=r.entry[0].resource.valueCodeableConcept.coding[0])||void 0===n?void 0:n.display:null}))}await(0,a.getConfig)("@ohri/openmrs-esm-ohri-pmtct"),r()}catch(h){r(h)}}),1)},9547:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{default:()=>m});var a=n(268),i=n.n(a),o=n(4924),u=n(7012),c=n(8559),l=n(49),s=n(7816),d=n(2870),p=n(3565),f=n.n(p),h=e([l,s]);[l,s]=h.then?(await h)():h;const m=function(e){var t=e.patientUuid,n=(0,o.useTranslation)().t,r=(0,d.usePatient)(t),p=r.patient,h=r.isLoading,m=null==p?void 0:p.birthDate,y=(0,a.useMemo)((function(){return f()().diff(f()(null==p?void 0:p.birthDate),"year")}),[null==p?void 0:p.birthDate]);return i().createElement(i().Fragment,null,h?i().createElement(u.gqd,{rowCount:5}):i().createElement("div",{className:c.Z.tabContainer},y>10?i().createElement(u.mQc,null,i().createElement(u.tdY,{contained:!0},i().createElement(u.OK9,null,n("recentPregnancy","Recent Pregnancy"))),i().createElement(u.nPR,null,i().createElement(u.x45,null,i().createElement(l.Z,{patientUuid:t})))):i().createElement(u.mQc,null,i().createElement(u.tdY,{contained:!0},i().createElement(u.OK9,null,n("hivExposedInfant","HIV Exposed Infant"))),i().createElement(u.nPR,null,i().createElement(u.x45,null,i().createElement(s.Z,{patientUuid:t,dateOfBirth:m}))))))};r()}catch(e){r(e)}}))},49:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>D});var a=n(268),i=n.n(a),o=n(4924),u=n(8821),c=n(3565),l=n.n(c),s=n(1705),d=n(7012),p=n(2870),f=n(7408),h=e([f]);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){if(Array.isArray(e))return e}function v(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,u,"next",e)}function u(e){v(i,r,a,o,u,"throw",e)}o(void 0)}))}}function b(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){return y(e)||b(e,t)||k(e,t)||g()}function k(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function S(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}f=(h.then?(await h)():h)[0];const D=function(e){var t=e.patientUuid,n=(0,o.useTranslation)().t,r=n("recentPregnancy","Recent Pregnancy"),c=n("art","ART"),h=n("appointments","Appointments"),m=n("family","Family"),y=n("infantStatusAtBirth","Infant Status At Birth"),v=n("previousVisitsSummary","Previous Visits"),b=I((0,a.useState)([]),2),g=b[0],k=b[1],D=I((0,a.useState)([]),2),x=D[0],F=D[1],w=I((0,a.useState)([]),2),O=w[0],C=w[1],V=I((0,a.useState)([]),2),A=V[0],E=V[1],P=(0,p.useConfig)(),B=P.formNames,M=P.encounterTypes,U=P.obsConcepts,N=[{header:n("pTrackerId","PTracker ID"),key:"pTrackerId"},{header:n("name","Name"),key:"name"},{header:n("relationship","Relationship"),key:"relationship"},{header:n("dateOfBirth","Date of birth"),key:"dateOfBirth"},{header:n("hivStatus","HIV Status"),key:"hivStatus"},{header:n("finalOutcome","Final Outcome"),key:"finalOutcome"}],R=[{header:n("pTrackerId","PTracker ID"),key:"pTrackerId"},{header:n("dateOfBirth","Date of Birth"),key:"dateOfBirth"},{header:n("infantStatus","Infant Status at Birth"),key:"infantStatus"},{header:n("breastfeeding","Breast Feeding"),key:"breastfeeding"}];function Y(){return(Y=T((function(){var e,n;return S(this,(function(r){switch(r.label){case 0:return e=[],[4,(0,u.IXl)(t)];case 1:return(null==(n=r.sent())?void 0:n.length)&&n.forEach((function(t){e.push(t)})),k(e),[2]}}))}))).apply(this,arguments)}function _(){return(_=T((function(){var e,n,r;return S(this,(function(a){switch(a.label){case 0:return[4,(0,u.syo)(t,M.antenatal)];case 1:return e=a.sent(),[4,(0,u.syo)(t,M.labourAndDelivery)];case 2:return((null==(n=a.sent())?void 0:n.encounterDatetime)>(null==e?void 0:e.encounterDatetime)||null==(null==e?void 0:e.encounterDatetime))&&null!==n&&C(null===(r=n.obs)||void 0===r?void 0:r.filter((function(e){return e.concept.uuid===U.infantDeliveryGroupingConcept}))),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){!function(){_.apply(this,arguments)}(),function(){Y.apply(this,arguments)}()}),[]),(0,a.useEffect)((function(){var e=g.map((function(e){return function(e){return L.apply(this,arguments)}(e.personB.uuid)}));Promise.all(e).then((function(e){F(e.map((function(e){return{patientId:e.patientId,pTrackerId:e.pTrackerId}})))})),j()}),[g]);var j=function(){var e,t=g.map((e=T((function(e){return S(this,(function(t){switch(t.label){case 0:return[4,(0,f.bq)(e.personB.uuid,U.outcomeStatus,M.infantPostnatal)];case 1:return[2,{finalOutcome:t.sent(),childUuid:e.personB.uuid}]}}))})),function(t){return e.apply(this,arguments)}));Promise.all(t).then((function(e){E(e.map((function(e){return{finalOutcome:e.finalOutcome,childUuid:e.childUuid}})))}))};function L(){return L=T((function(e){var t,n,r,a;return S(this,(function(i){switch(i.label){case 0:return t={patientId:e,pTrackerId:"--"},[4,(0,f.lP)(e)];case 1:return(null==(n=i.sent())?void 0:n.length)&&(t.pTrackerId=null!==(a=null===(r=n.find((function(e){return e.identifierType.uuid===M.PTrackerIdentifierType})))||void 0===r?void 0:r.identifier)&&void 0!==a?a:"--"),[2,t]}}))})),L.apply(this,arguments)}var H=(0,a.useMemo)((function(){var e=[];return g.forEach((function(n){if(n.personB.uuid!==t){var r,a,o,c=i().createElement(d.rUS,{onClick:function(e){e.preventDefault(),(0,p.navigate)({to:"".concat(u.sb4).concat(n.personB.uuid,"/chart")})}},n.personB.display),s={id:n.uuid,pTrackerId:null===(r=x.find((function(e){return e.patientId===n.personB.uuid})))||void 0===r?void 0:r.pTrackerId,name:c,relationship:n.relationshipType.displayBIsToA,dateOfBirth:l()(n.personB.birthdate).format("DD-MMM-YYYY"),hivStatus:"",finalOutcome:null!==(o=null===(a=A.find((function(e){return e.childUuid===n.personB.uuid})))||void 0===a?void 0:a.finalOutcome)&&void 0!==o?o:"--"};e.push(s)}})),e}),[g,t,x,A]),Z=(0,a.useMemo)((function(){var e=[];return O.forEach((function(t){var n,r,a,i,o,u,c,s=t.groupMembers.find((function(e){return e.concept.uuid===U.infantStatusAtBirthConcept})),d={id:t.uuid,pTrackerId:null===(n=t.groupMembers.find((function(e){return e.concept.uuid===U.infantPTrackerIdConcept})))||void 0===n?void 0:n.value,dateOfBirth:l()(null===(r=t.groupMembers.find((function(e){return e.concept.uuid===U.infantDateOfBirth})))||void 0===r?void 0:r.value).format("DD-MMM-YYYY"),infantStatus:(null===(o=s.value)||void 0===o||null===(i=o.names)||void 0===i||null===(a=i.find((function(e){return"SHORT"===e.conceptNameType})))||void 0===a?void 0:a.name)||s.value.name.name,breastfeeding:null===(c=t.groupMembers.find((function(e){return e.concept.uuid===U.breastfeedingStatus})))||void 0===c||null===(u=c.value)||void 0===u?void 0:u.display};e.push(d)})),e}),[O,A]),q=(0,a.useMemo)((function(){return[{key:"motherHIVStatus",header:n("motherHIVStatus","Mother HIV Status"),encounterTypes:[M.labourAndDelivery],getObsValue:(e=T((function(e){var t,n;return S(this,(function(r){return t=I(e,1),n=t[0],(0,u.hFx)(n,U.pTrackerIdConcept),[2,"--"]}))})),function(t){return e.apply(this,arguments)})},{key:"expectedDeliveryDate",header:n("expectedDeliveryDate","Expected Delivery Date"),encounterTypes:[M.antenatal],getObsValue:function(){var e=T((function(e){var t,n;return S(this,(function(r){return t=I(e,1),n=t[0],[2,(0,u.hFx)(n,U.eDDConcept,!0)]}))}));return function(t){return e.apply(this,arguments)}}(),getObsSummary:function(e){var t=I(e,1)[0],n=(0,u.hFx)(t,U.eDDConcept,!0);if("--"!==n){var r=$(n);n=n>0?"In ".concat(r):""}return n}},{key:"motherStatus",header:n("motherStatus","Mother Status"),encounterTypes:[M.labourAndDelivery],getObsValue:function(e){return(0,u.hFx)(e,U.motherStatusConcept)}}];var e}),[]),G=(0,a.useMemo)((function(){return[{key:"artInitiation",header:n("artInitiation","ART Initiation"),encounterTypes:[M.motherPostnatal,M.labourAndDelivery,M.antenatal],getObsValue:function(e){var t={artInitiation:(0,u.hFx)(e[0],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[0],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[0],U.pTrackerIdConcept)},n={artInitiation:(0,u.hFx)(e[1],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[1],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[1],U.pTrackerIdConcept)},r={artInitiation:(0,u.hFx)(e[2],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[2],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[2],U.pTrackerIdConcept)};return Q(t,n,r).artInitiation}},{key:"artStartDate",header:n("artStartDate","ART Start Date"),encounterTypes:[M.motherPostnatal,M.labourAndDelivery,M.antenatal],getObsValue:function(e){var t={artInitiation:(0,u.hFx)(e[0],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[0],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[0],U.pTrackerIdConcept)},n={artInitiation:(0,u.hFx)(e[1],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[1],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[1],U.pTrackerIdConcept)},r={artInitiation:(0,u.hFx)(e[2],U.artInitiationConcept),artStartDate:(0,u.hFx)(e[2],U.artStartDate,!0),pTrackerId:(0,u.hFx)(e[2],U.pTrackerIdConcept)};return Q(t,n,r).artStartDate}}]}),[]),X=(0,a.useMemo)((function(){return[{key:"nextAppointmentDate",header:n("nextAppointmentDate","Next Appointment Date"),encounterTypes:[M.antenatal],getObsValue:function(e){var t=I(e,1)[0];return(0,u.hFx)(t,U.nextVisitDateConcept,!0)},getObsSummary:function(e){var t=I(e,1)[0],n=(0,u.hFx)(t,U.nextVisitDateConcept,!0);if("--"!==n){var r=$(n);n=n>0?"In ".concat(r):""}return n}},{key:"ancVisitsAttended",header:n("ancVisitsAttended","ANC visits attended"),encounterTypes:[M.antenatal],getObsValue:(e=T((function(e){var t,n;return S(this,(function(r){return t=I(e,1),n=t[0],(0,u.hFx)(n,U.pTrackerIdConcept),[2,"--"]}))})),function(t){return e.apply(this,arguments)})}];var e}),[]),K=(0,a.useMemo)((function(){return[{key:"visitType",header:n("visitType","Visit Type"),getValue:function(e){return e.encounterType.name}},{key:"visitDate",header:n("visitDate","Visit date"),getValue:function(e){return(0,u.hFx)(e,U.visitDate,!0)}},{key:"facility",header:n("facility","Facility"),getValue:function(e){return e.location.name}},{key:"nextFollowUpDate",header:n("nextFollowUpDate","Next Follow-up date"),getValue:function(e){return(0,u.hFx)(e,U.followUpDateConcept,!0)}},{key:"actions",header:n("actions","Actions"),getValue:function(e){return[{form:z(e),encounterUuid:e.uuid,intent:"*",label:n("viewDetails","View details"),mode:"view"}]}}]}),[]),Q=function(e,t,n){var r=[e,t,n].filter((function(e){return"--"!==e.artInitiation}));return 0==r.length?{artInitiation:"--",artStartDate:"--"}:(1==r.length||r.sort((function(e,t){return t.pTrackerId.localeCompare(e.pTrackerId)})),r[0])},$=function(e){var t=new Date(e).getTime()-(new Date).getTime(),n=Math.floor(t/864e5);return"".concat(n," day(s)")},z=function(e){var t=e.encounterType.name;return"Antenatal"===t?{name:B.antenatal}:"Labor and Delivery"===t?{name:B.labourAndDelivery}:{name:B.motherPostnatal}};return i().createElement("div",null,i().createElement(u.eBf,{patientUuid:t,headerTitle:r,columns:q}),i().createElement("div",{style:{display:"flex",flexDirection:"row",gap:"1rem",height:"15rem"}},i().createElement(u.eBf,{patientUuid:t,headerTitle:c,columns:G}),i().createElement(u.eBf,{patientUuid:t,headerTitle:h,columns:X})),i().createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},i().createElement(u.BRj,{patientUuid:t,headerTitle:y,headers:R,items:Z,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}}),i().createElement(u.BRj,{patientUuid:t,headerTitle:m,headers:N,items:H,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}})),i().createElement(u.IOg,{patientUuid:t,encounterType:M.mchEncounterType,columns:K,description:v,headerTitle:v,formList:[{name:B.antenatal},{name:B.labourAndDelivery},{name:B.motherPostnatal}],launchOptions:{hideFormLauncher:!0,moduleName:s.moduleName,displayText:""}}))};r()}catch(x){r(x)}}))},7816:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>D});var a=n(268),i=n.n(a),o=n(4924),u=n(8821),c=n(2870),l=n(3565),s=n.n(l),d=n(7012),p=n(1705),f=n(7408),h=e([f]);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){if(Array.isArray(e))return e}function v(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,u,"next",e)}function u(e){v(i,r,a,o,u,"throw",e)}o(void 0)}))}}function b(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){return y(e)||b(e,t)||k(e,t)||g()}function k(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function S(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}f=(h.then?(await h)():h)[0];const D=function(e){var t=e.patientUuid,n=(e.dateOfBirth,(0,o.useTranslation)().t),r=(0,c.useConfig)(),l=I((0,a.useState)([]),2),h=l[0],m=l[1],y=I((0,a.useState)([]),2),v=y[0],b=y[1];(0,a.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]);var g=(0,a.useMemo)((function(){return[{key:"artProphylaxisStatus",header:n("artProphylaxisStatus","ART Prophylaxis Status"),encounterTypes:[r.encounterTypes.infantPostnatal],getObsValue:function(e){var t=I(e,1)[0];return(0,u.hFx)(t,r.obsConcepts.artProphylaxisStatus)}},{key:"breastfeeding",header:n("breastfeeding","Breastfeeding"),encounterTypes:[r.encounterTypes.infantPostnatal],getObsValue:function(e){var t=I(e,1)[0];return(0,u.hFx)(t,r.obsConcepts.breastfeedingStatus)}},{key:"hivStatus",header:n("hivStatus","HIV Status"),encounterTypes:[r.encounterTypes.infantPostnatal],getObsValue:function(e){var t=I(e,1)[0];return(0,u.hFx)(t,r.obsConcepts.finalTestResults)}},{key:"finalOutcome",header:n("finalOutcome","Final Outcome"),encounterTypes:[r.encounterTypes.infantPostnatal],getObsValue:function(e){var t=I(e,1)[0];return(0,u.hFx)(t,r.obsConcepts.outcomeStatus)}}]}),[]),k=(0,a.useMemo)((function(){return[{key:"date",header:n("date","Date"),getValue:function(e){return(0,u.hFx)(e,r.obsConcepts.artStartDate,!0)}},{key:"testType",header:n("testType","Test Type"),getValue:function(e){return(0,u.hFx)(e,r.obsConcepts.testTypeConcept)}},{key:"ageAtTimeOfTest",header:n("ageAtTimeOfTest","Age at time of test"),getValue:function(e){var t=(0,u.hFx)(e,r.obsConcepts.artStartDate);return t?s()().diff(s()(t),"day"):"--"}},{key:"hivStatus",header:n("hivStatus","HIV Status"),getValue:function(e){return(0,u.hFx)(e,r.obsConcepts.finalTestResults)}}]}),[]),D=[{key:"pTrackerId",header:n("pTrackerId","PTracker ID")},{key:"name",header:n("name","Name")},{key:"relationship",header:n("relationship","Relationship")},{key:"dateOfBirth",header:n("dateOfBirth","Date of birth")},{key:"hivStatus",header:n("hivStatus","HIV Status")}];function x(){return(x=T((function(){var e,n;return S(this,(function(r){switch(r.label){case 0:return e=[],[4,(0,u.IXl)(t)];case 1:return(null==(n=r.sent())?void 0:n.length)&&n.forEach((function(t){e.push(t)})),m(e),[2]}}))}))).apply(this,arguments)}function F(){return F=T((function(e){var t,n;return S(this,(function(a){switch(a.label){case 0:return t={patientId:"",pTrackerId:"--"},[4,(0,f.lP)(e)];case 1:return(n=a.sent())&&(t.pTrackerId=n.find((function(e){return e.identifierType.uuid===r.identifiersTypes.ptrackerIdentifierType})).identifier,t.patientId=e),[2,t]}}))})),F.apply(this,arguments)}(0,a.useEffect)((function(){var e=h.map((function(e){return function(e){return F.apply(this,arguments)}(e.personA.uuid)}));Promise.all(e).then((function(e){b(e.map((function(e){return{patientId:e.patientId,pTrackerId:e.pTrackerId}})))}))}),[h]);var w=(0,a.useMemo)((function(){var e=[];return h.forEach((function(t){var n,r=i().createElement(d.rUS,{onClick:function(e){e.preventDefault(),(0,c.navigate)({to:"".concat(u.sb4).concat(t.personA.uuid,"/chart")})}},t.personA.display),a={id:t.uuid,pTrackerId:null===(n=v.find((function(e){return e.patientId===t.personA.uuid})))||void 0===n?void 0:n.pTrackerId,name:r,relationship:t.relationshipType.displayAIsToB,dateOfBirth:s()(t.personA.birthdate).format("DD-MMM-YYYY"),hivStatus:"",finalOutcome:""};e.push(a)})),e}),[h,v]),O=(0,a.useMemo)((function(){return[{key:"visitType",header:n("visitType","Visit Type"),getValue:function(e){return e.encounterType.name}},{key:"visitDate",header:n("visitDate","Visit date"),getValue:function(e){return(0,u.hFx)(e,r.obsConcepts.infantVisitDate,!0)}},{key:"facility",header:n("facility","Facility"),getValue:function(e){return e.location.name}},{key:"nextFollowUpDate",header:n("nextFollowUpDate","Next Follow-up date"),getValue:function(e){return(0,u.hFx)(e,r.obsConcepts.followUpDateConcept,!0)}},{key:"actions",header:n("actions","Actions"),getValue:function(e){return[{form:{name:"Infant - Postanal Form",package:"child_health"},encounterUuid:e.uuid,intent:"*",label:n("viewDetails","View details"),mode:"view"}]}}]}),[]),C=n("previousVisitsSummary","Previous Visits");return i().createElement("div",null,i().createElement(u.eBf,{patientUuid:t,headerTitle:n("infantSummary","Infants Summary"),columns:g}),i().createElement(u.IOg,{patientUuid:t,encounterType:r.encounterTypes.infantPostnatal,formList:[{name:"Infant - Postanal Form"}],columns:k,description:n("hivMonitoring","HIV Monitoring"),headerTitle:n("hivMonitoring","HIV Monitoring"),launchOptions:{hideFormLauncher:!0,displayText:"",moduleName:p.moduleName}}),i().createElement(u.BRj,{headerTitle:n("family","Family"),patientUuid:t,headers:D,items:w,isActionable:!0,isStriped:!0,launchOptions:{hideFormLauncher:!0,moduleName:"",displayText:""}}),i().createElement(u.IOg,{patientUuid:t,encounterType:r.encounterTypes.infantPostnatal,columns:O,description:C,headerTitle:C,formList:[{name:"Infant - Postanal Form"}],launchOptions:{hideFormLauncher:!0,moduleName:p.moduleName,displayText:""}}))};r()}catch(x){r(x)}}))}}]);